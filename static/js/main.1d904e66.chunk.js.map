{"version":3,"sources":["features/reports/protocols.js","features/page-redirection/redirector-slice.js","features/reports/reportsSlice.js","features/reused-components/reused-slices/replicationSlice.js","features/reused-components/reused-slices/initializeSlice.js","features/reused-components/HelpTip.js","app/infiltrometerType.js","app/soilTypes.js","features/page-redirection/Redirector.js","features/useful-functions/usefulFunctions.js","features/reused-components/initialize-views/InitializeView.js","features/baer/baer-initialize/BaerInitializeView.js","features/reports/severityRatings.js","features/photos/photoDatabase.js","features/photos/albumsSlice.js","features/reports/reportsDataPackager.js","features/baer/baer-results/table.js","features/audio/Player.js","features/audio/beep-01a.mp3","features/baer/baer-replication/BaerReplicationView.js","features/navBar/baerLogo.js","features/navBar/NavBar.js","features/reports/ReportsTable.js","features/homepage/HomePage.js","features/pdfviewer/pdf-viewer.js","features/pdfviewer/MiniDiskManual.pdf","features/pdfviewer/Field-Guide.pdf","features/pdfviewer/New-Baer-Article.pdf","features/reused-components/results-views/ResultsViewButtons.js","features/reused-components/results-views/ResultsViewNotes.js","features/standard/standard-results/ConductivityForm.js","features/regression/regression-js.js","features/standard/standard-results/ConductivityGraph.js","features/photos/PhotoCard.js","features/reused-components/results-views/ResultsViewPhotos.js","features/standard/standard-results/StandardResultsView.js","features/standard/standard-initialize/StandardInitializeView.js","features/baer/baer-results/BaerResultsView.js","features/standard/standard-replication/StandardReplicationTable.js","features/standard/standard-replication/StandardReplicationView.js","App.js","features/counter/counterAPI.js","features/counter/counterSlice.js","features/reused-components/reused-slices/resultsSlice.js","app/store.js","serviceWorker.js","index.js"],"names":["Protocols","redirectSlice","createSlice","name","initialState","page","reducers","setPage","state","action","payload","actions","selectPage","redirector","reportsSlice","reports","curId","newReport","uuidv4","id","date","protocol","readings","infiltrometerData","gatheringData","notes","addReading","_readings","length","i","secondsElapsed","push","sort","a","b","removeReadingWithTime","filter","r","setGatheringData","removeReport","Object","keys","setCurId","setNotes","setCurInfiltrometerData","selectReports","selectCurId","selectNotes","selectCurReadingID","ReplicationSlice","volume","lastVolume","setVolume","Number","setSecondsElapsed","setLastVolume","selectLastVolume","baerReplication","InitializeSlice","initialVolume","coordinates","lat","lon","soilType","nh0","alpha","infiltrometerRadius","infiltrometerSuction","timeInterval","site","observation","setInitialVolume","setInfiltrometerSuction","setTimeInterval","setSoilType","setInfiltrometerData","selectInitialVolume","baerInitialize","selectInfiltrometerData","selectTimeInterval","HelpTip","title","content","size","OverlayTrigger","rootClose","trigger","placement","overlay","Popover","Header","as","Body","Button","variant","infiltrometerTypes","radius","displayName","soilTypes","Pages","Redirector","protectedElements","curPage","useLocation","pathname","useSelector","to","addGeoDataToReading","reading","onFinished","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","err","InitializeView","curInfiltrometerData","dispatch","useDispatch","setSoilPreset","event","document","getElementById","value","useEffect","Container","className","Form","validated","onSubmit","preventDefault","form","currentTarget","suction","checkValidity","stopPropagation","updateData","Date","toString","Row","Col","Group","Label","Control","type","defaultValue","placeholder","step","required","min","Feedback","DropdownButton","onSelect","e","Dropdown","Item","eventKey","max","onClick","BaerInitializeView","SeverityRatings","Strong","Weak","None","Infinity","indexedDB","window","webkitIndexedDB","mozIndexedDB","moz_indexedDB","OpenPhotoDB","Promise","resolve","reject","req","open","onsuccess","evt","db","result","console","log","onerror","error","errorCode","onupgradeneeded","createObjectStore","keyPath","autoIncrement","addPhotoToDB","photoID","photoData","then","transaction","objectStore","add","deletePhotoFromDB","delete","albumsSlice","addPhoto","reportId","thumbnailData","fullImageData","thumbnailID","fullID","undefined","thumbnail","full","deletePhoto","photoIndex","splice","deleteAllPhotos","forEach","photoGroup","selectAlbums","album","getPhotoFromID","request","get","val","target","JSZip","require","handleTextForCSV","text","replaceAll","makeCSVFromGroupOfReports","reportGroup","reportAlbums","zip","reportPromises","reportID","index","folderName","folder","csvData","curReport","data","curReportData","findAverageRate","findSeverityRating","C1","C2","K","A","toDateString","row","time","setSeconds","getSeconds","toTimeString","findRate","input","map","join","toCsv","makeCSVDataFromReading","reportAlbum","file","fetchAllImages","imageData","img","photo","base64","all","generateAsync","saveAs","readingIndex","report","fromBeginning","_f","_s","deltaV","deltaT","sum","hasPhotos","promises","photos","ext","match","actualData","split","avgRate","Table","editable","rawReports","useState","filterReadings","curVolume","setCurVolume","visible","curTime","modalData","setModalData","readingsArr","Time","Volume","Rate","class","key","toUpperCase","renderTableHeader","toPrecision","Modal","show","Title","newVolume","String","Text","onChange","Alert","Footer","defaultProps","useAudio","url","Audio","audio","playing","setPlaying","play","pause","currentTime","addEventListener","removeEventListener","BaerReplicationView","curID","remaining","setRemaining","showHelp","setShowHelp","maxVolume","Math","timerIsPlaying","setState","setShow","beep","setAudPlaying","handleClose","isPlaying","duration","colors","onComplete","remainingTime","disabled","hidden","Offcanvas","onHide","closeButton","backdrop","centered","noValidate","volumeReading","newReading","muted","autofocus","ProgressBar","now","BaerLogo","props","viewBox","width","height","fill","d","NavBar","Navbar","collapseOnSelect","expand","bg","Brand","href","src","alt","Toggle","Collapse","Nav","Link","NavDropdown","Divider","ReportsTable","selectedReports","setSelectedReports","numberOfSelectedReports","deselectReport","_repo","deleteReport","unselectAll","reportKeys","formatDate","SelectButtons","selected","deleteAllSelected","selectAll","light","striped","bordered","hover","toLowerCase","Check","label","checked","selectReport","showReport","HomePage","PdfViewer","pdf","pdfjs","GlobalWorkerOptions","workerSrc","version","numPages","setNumPages","pageNumber","setPageNumber","changePage","offset","prevPageNumber","onLoadSuccess","renderAnnotationLayer","renderTextLayer","scale","screen","loading","ResultsViewButtons","obj","makeCSV","ResultsViewNotes","xs","ConductivityForm","setRadiusPreset","infilData","determinationCoefficient","results","predictions","observations","mean","reduce","ssyy","difference","accum","prediction","residual","round","number","precision","factor","methods","options","lhs","rhs","len","k","order","l","c","j","coefficients","matrix","n","maxrow","abs","tmp","total","gaussianElimination","v","predict","x","coeff","power","points","point","string","equation","reverse","r2","ConductivityGraph","N","h","pow","exp","readingsArray","sqrt","y","PI","interpolatedPoints","end","steps","intPoints","useMemo","color","interpolate","noData","Graph","xLabel","yLabel","showLegends","hideLines","hidePoints","parseFloat","toExponential","PhotoCard","setData","Card","Img","Spinner","animation","ResultsViewPhotos","curReportAlbum","CardGroup","click","transform","accept","files","URL","createObjectURL","xhRequest","XMLHttpRequest","onload","reader","FileReader","onloadend","readAsDataURL","response","responseType","send","StandardResultsView","onClose","dismissible","StandardInitializeView","BaerResultsView","StandardReplicationTable","intervals","rowData","rowIndex","isValid","vol","StandardReplicationRow","maximum","setMaximum","autoFocus","StandardReplicationView","endProtocol","allValid","App","exact","path","MiniDiskManual","FieldGuide","NewBaerManual","fetchCount","amount","setTimeout","incrementAsync","createAsyncThunk","counterSlice","status","increment","decrement","incrementByAmount","extraReducers","builder","addCase","pending","fulfilled","ResultsSlice","combineReducers","baerInitializeReducer","baerReplicationReducer","baerResults","baerResultsReducer","albumReducer","counter","counterReducer","reduxFormReducer","redirectReducer","persistConfig","storage","persistedReducer","persistReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","persistor","persistStore","ReactDOM","render","StrictMode","process","origin","fetch","headers","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.1d904e66.chunk.js","sourcesContent":["// Contains the reference to all protocol names\r\nexport const Protocols = {\r\n    Baer: \"BAER\",\r\n    Standard: \"Standard\",\r\n    Experimental: \"VOLUME_PROTOCOL \"\r\n}","import { createSlice } from '@reduxjs/toolkit';\r\n\r\n// This is the initial page that should be loaded\r\nconst initialState = {\r\n  page: '/'\r\n};\r\n\r\nexport const redirectSlice = createSlice({\r\n  name: 'redirector',\r\n  initialState,\r\n  reducers: {\r\n    setPage: (state, action) => {\r\n      state.page = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setPage } = redirectSlice.actions;\r\nexport const selectPage = (state) => state.redirector.page;\r\nexport default redirectSlice.reducer;","import { createSlice } from '@reduxjs/toolkit';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n// Empty array of reports\r\nconst initialState = {\r\n  reports: {},\r\n  curId: \"-1\",\r\n};\r\n\r\nexport const reportsSlice = createSlice({\r\n  name: 'reports',\r\n  initialState,\r\n  reducers: {\r\n    newReport: (state, action) => {\r\n      // Push a new report onto the report stack and increment the id\r\n      state.curId = uuidv4();\r\n\r\n      let newReport =\r\n      {\r\n        id: state.curId,\r\n        date: action.payload.date,\r\n        protocol: action.payload.protocol,\r\n        readings: [],\r\n        infiltrometerData: action.payload.infiltrometerData,\r\n        gatheringData: true,\r\n        notes: \"\",\r\n      }\r\n      // Add it to the reports\r\n      state.reports[newReport.id] = newReport;\r\n\r\n    },\r\n\r\n    /** Adds a reading to the report with the provided id\r\n     * action needs an \r\n     * @param id\r\n     * @param reading\r\n     * \r\n     */\r\n    addReading: (state, action) => {\r\n      // Add the reading to based on the reading's time and\r\n      let _readings = state.reports[state.curId].readings;\r\n\r\n      if (_readings.length === 0) {\r\n        _readings.push(action.payload);\r\n        return;\r\n      }\r\n\r\n      for (let i = 0; i < _readings.length; i++) {\r\n        if (_readings[i].secondsElapsed === action.payload.secondsElapsed) {\r\n          // Modify the elements\r\n          _readings[i] = action.payload;\r\n          return;\r\n        }\r\n      }\r\n      _readings.push(action.payload);\r\n\r\n      // Sort the elements\r\n      _readings.sort((a, b) => (a.secondsElapsed > b.secondsElapsed) ? 1 : -1);\r\n    },\r\n\r\n    removeReadingWithTime: (state, action) => {\r\n      // Remove the reading to based on the reading's time\r\n      let _readings = [...state.reports[state.curId].readings];\r\n      state.reports[state.curId].readings = [..._readings].filter(r => r.secondsElapsed !== action.payload);\r\n    },\r\n\r\n    // Sets the current gathering data report\r\n    setGatheringData: (state, action) => {\r\n      state.reports[state.curId].gatheringData = action.payload;\r\n    },\r\n\r\n    removeReport: (state, action) => {\r\n      // Remove the report with the id provided in action.payload\r\n      delete state.reports[action.payload];\r\n\r\n      // If the current report is the one we are trying to delete, set a new current id\r\n      if (state.curId === action.payload) {\r\n        state.curId = Object.keys(state.reports)[0];\r\n      }\r\n    },\r\n\r\n    setCurId: (state, action) => {\r\n      state.curId = action.payload;\r\n    },\r\n\r\n    setNotes: (state, action) => {\r\n      state.reports[state.curId].notes = action.payload;\r\n    },\r\n\r\n    // Sets the current report's infiltrometer data\r\n    setCurInfiltrometerData: (state, action) => {\r\n\r\n      state.reports[state.curId].infiltrometerData = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { newReport, addReading, removeReadingWithTime, setGatheringData, removeReport, setCurId, setNotes, setCurInfiltrometerData } = reportsSlice.actions;\r\nexport const selectReports = (state) => state.reports.reports;\r\nexport const selectCurId = (state) => state.reports.curId;\r\nexport const selectNotes = (state) => state.reports.reports[state.reports.curId].notes;\r\nexport const selectCurReadingID = (state) => state.reports.reports[state.reports.curId].readings.length - 1;\r\nexport const selectGatheringData = (state) => {\r\n  if (state.reports.reports[state.reports.curId] === undefined) return undefined;\r\n  else return state.reports.reports[state.reports.curId].gatheringData;\r\n}\r\nexport default reportsSlice.reducer;","import { createSlice } from '@reduxjs/toolkit';\r\n\r\n/**\r\n * Initialize all the data associated with a reading....\r\n * Dispatch the addReading action from the reportsSlice after validating the reading\r\n */\r\nconst initialState = {\r\n  volume: 0,\r\n  secondsElapsed: 0,\r\n  lastVolume: 0\r\n};\r\n\r\nexport const ReplicationSlice = createSlice({\r\n  name: 'baerReplication',\r\n  initialState,\r\n  // The `reducers` field lets us define reducers and generate associated actions\r\n  reducers: {\r\n    /**\r\n     *Sets the current volume in the reading \r\n     * @param {the current state} state \r\n     * @param {must contain a volume payload} action \r\n     */\r\n    setVolume: (state, action) => {\r\n      state.volume = Number(action.payload);\r\n    }\r\n    ,\r\n    setSecondsElapsed: (state, action) => {\r\n      state.secondsElapsed = Number(action.payload);\r\n    }\r\n    ,\r\n    setLastVolume: (state, action) => {\r\n      state.lastVolume = Number(action.payload);\r\n    }\r\n\r\n  }\r\n});\r\n\r\nexport const { setVolume, setSecondsElapsed, setLastVolume } = ReplicationSlice.actions;\r\n\r\n\r\nexport const selectLastVolume = (state) => state.baerReplication.lastVolume;\r\n\r\nexport default ReplicationSlice.reducer;","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n  initialVolume: 95,\r\n\r\n  coordinates: {\r\n    lat: 0,\r\n    lon: 0,\r\n  },\r\n\r\n  soilType: {\r\n    nh0: 2.28,\r\n    alpha: 0.124\r\n  },\r\n\r\n  infiltrometerRadius: 2.25,\r\n  infiltrometerSuction: -1,\r\n  timeInterval: 60,\r\n  site: \"Site\",\r\n  observation: \"Observation\",\r\n\r\n};\r\n\r\nexport const InitializeSlice = createSlice({\r\n\r\n  name: 'baerInitialize',\r\n\r\n  initialState,\r\n\r\n  reducers: {\r\n    setInitialVolume: (state, action) => {\r\n\r\n      state.initialVolume = action.payload;\r\n\r\n    },\r\n    setInfiltrometerSuction: (state, action) => {\r\n      state.infiltrometerSuction = action.payload;\r\n    },\r\n    setTimeInterval: (state, action) => {\r\n      state.timeInterval = action.payload;\r\n    },\r\n    setSoilType: (state, action) => {\r\n      state.soilType = action.payload;\r\n    },\r\n    setInfiltrometerData: (state, action) => {\r\n      state.initialVolume = action.payload.initialVolume;\r\n      state.coordinates = action.payload.coordinates;\r\n      state.soilType = action.payload.soilType;\r\n      state.timeInterval = action.payload.timeInterval;\r\n      state.infiltrometerRadius = action.payload.infiltrometerRadius;\r\n      state.infiltrometerSuction = action.payload.infiltrometerSuction;\r\n      state.site = action.payload.site;\r\n      state.observation = action.payload.observation;\r\n    }\r\n\r\n  }\r\n});\r\n\r\nexport const selectInfiltrometerRadius = (state) => state.baerInitialize.infiltrometerR;\r\nexport const selectInfiltrometerSuction = (state) => state.baerInitialize.suction;\r\nexport const selectSoilType = (state) => state.baerInitialize.soilType;\r\nexport const selectInitialVolume = (state) => state.baerInitialize.initialVolume;\r\nexport const selectInfiltrometerData = (state) => state.baerInitialize;\r\nexport const selectTimeInterval = (state) => state.baerInitialize.timeInterval;\r\nexport const { setInitialVolume, setInfiltrometerSuction, setTimeInterval, setSoilType, setInfiltrometerData } = InitializeSlice.actions;\r\n\r\nexport default InitializeSlice.reducer;","import { Popover, OverlayTrigger, Button } from 'react-bootstrap';\r\nimport { BsFillQuestionCircleFill as Qmark } from 'react-icons/bs';\r\n\r\nexport const HelpTip = ({ title, content, size }) => {\r\n    return (\r\n        <OverlayTrigger rootClose trigger=\"click\" placement=\"top\" overlay={\r\n            <Popover>\r\n                <Popover.Header as=\"h3\">{title}</Popover.Header>\r\n                <Popover.Body>\r\n                    {content}\r\n                </Popover.Body>\r\n            </Popover>\r\n        }>\r\n            <Button variant=\"outline-dark\" size=\"sm\">?</Button>\r\n        </OverlayTrigger>\r\n    );\r\n}","export const infiltrometerTypes = {\r\n   MiniDisk:{\r\n       radius: 2.25,\r\n       displayName: \"Mini Disk\"\r\n   },\r\n   MiniDiskV1:{\r\n       radius: 1.6,\r\n       displayName: \"Mini Disk Version 1\"\r\n   }\r\n}","//contains the single reference to the soil types to be used in reports under key \"soilType\"\r\nexport const soilTypes = {\r\n     clay: {\r\n          nh0: 1.09,\r\n          /* positive number, of n/h0*/\r\n          alpha: 0.008 /* positive number,*/\r\n     },\r\n     clayLoam: {\r\n          nh0: 1.31,\r\n          /* positive number, of n/h0*/\r\n          alpha: 0.019 /* positive number,*/\r\n     },\r\n     loam: {\r\n          nh0: 1.56,\r\n          /* positive number, of n/h0*/\r\n          alpha: .036 /* positive number,*/\r\n     },\r\n     sand: {\r\n          alpha: 0.145,\r\n          nh0: 2.68\r\n     },\r\n     sandyClay: {\r\n          alpha: 0.027,\r\n          nh0: 1.23\r\n     },\r\n     loamySand: {\r\n          alpha: 0.124,\r\n          nh0: 2.28\r\n     },\r\n     sandyClayLoam: {\r\n          alpha: .059,\r\n          nh0: 1.48\r\n     },\r\n     sandyLoam: {\r\n          alpha: 0.075,\r\n          nh0: 1.89\r\n     },\r\n     silt: {\r\n          alpha: 0.016,\r\n          nh0: 1.37\r\n     },\r\n     siltLoam: {\r\n          alpha: .02,\r\n          nh0: 1.41\r\n     },\r\n     siltyClay: {\r\n          alpha: 0.005,\r\n          nh0: 1.09\r\n     },\r\n     siltyClayLoam: {\r\n          alpha: 0.01,\r\n          nh0: 1.23\r\n     },\r\n     undefined: {\r\n          alpha: null,\r\n          nh0: null\r\n     }\r\n}","import { useSelector } from \"react-redux\";\r\nimport { selectPage } from \"./redirector-slice\";\r\nimport { useLocation, Redirect } from \"react-router\";\r\n\r\nexport const Pages =\r\n{\r\n  Homepage: \"/\",\r\n  BaerInitializeView: \"/baer-initialize\",\r\n  BaerReplicationView: \"/baer-replication\",\r\n  BaerResultsView: \"/baer-results\",\r\n  StandardInitializeView: \"/standard-initialize\",\r\n  StandardReplicationView: \"/standard-replication\",\r\n  StandardResultsView: \"/standard-results\",\r\n  BaerManual: \"/manuals-baer\",\r\n  InfiltrometerManual: \"/manuals-infiltrometer\",\r\n  ReportsView: \"/reports\",\r\n  NewBaerManual: \"/manuals-newBaer\"\r\n}\r\n\r\n//Used to redirect to new pages from global state\r\nexport const Redirector = ({ protectedElements }) => {\r\n  const curPage = useLocation().pathname;   // Current URL in browser\r\n  const page = useSelector(selectPage);     // Current URL in Redux store\r\n  // If the URLs match, we render the protected elements (JSX passed as a prop to this component)\r\n  // If the URLs do not match, we render a redirect message to the valid url\r\n  return page !== curPage ? <Redirect to={page} /> : protectedElements;\r\n}\r\n","/**\r\n * \r\n * @param {Returns the reading with geo data, if possible\r\n * If geo data cannot be collected, fills with \"N/A\"} reading \r\n * @param {Function to call after finishing adding the data, takes the new reading\r\n * as a param} onFinished \r\n */\r\nexport function addGeoDataToReading(reading, onFinished) {\r\n\r\n    //try to get the geolocation data\r\n    navigator.geolocation.getCurrentPosition((pos) => {\r\n        //add the intial reading\r\n        onFinished({\r\n            ...reading,\r\n            lat: pos.coords.latitude,\r\n            lon: pos.coords.longitude,\r\n        });\r\n\r\n    },\r\n        (err) => {\r\n            //add the intial reading\r\n            onFinished({\r\n                ...reading,\r\n                lat: \"N/A\",\r\n                lon: \"N/A\"\r\n            });\r\n        }\r\n    )\r\n\r\n}","/* React/Redux Imports */\r\nimport React, { useEffect } from 'react';\r\nimport { Button, Col, Container, Dropdown, DropdownButton, Form, Row } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n/* Slice Imports */\r\nimport { setPage } from '../../page-redirection/redirector-slice';\r\nimport { addReading, newReport } from '../../reports/reportsSlice';\r\nimport { setLastVolume, setVolume } from '../reused-slices/replicationSlice';\r\nimport { selectInfiltrometerData, setInfiltrometerData, setInitialVolume } from '../reused-slices/initializeSlice';\r\n\r\n/* HTML/CSS Imports */\r\nimport { HelpTip } from '../HelpTip';\r\n\r\n/* Other Imports */\r\nimport { infiltrometerTypes } from '../../../app/infiltrometerType';\r\nimport { soilTypes } from '../../../app/soilTypes';\r\nimport { Pages } from '../../page-redirection/Redirector';\r\nimport { Protocols } from '../../reports/protocols';\r\nimport { addGeoDataToReading } from '../../useful-functions/usefulFunctions';\r\n\r\n\r\n\r\nconst InitializeView = ({ protocol }) => {\r\n    const curInfiltrometerData = useSelector(selectInfiltrometerData);\r\n    const dispatch = useDispatch();\r\n\r\n    const setRadiusPreset = (event) => {\r\n        let radius = document.getElementById(\"radius\");\r\n        radius.value = event;\r\n    }\r\n\r\n    const setSuctionPreset = (event) => {\r\n        let suction = document.getElementById(\"suction\");\r\n        suction.value = event;\r\n    }\r\n\r\n    const setSoilPreset = (event) => {\r\n        let nh0 = document.getElementById(\"nh0\");\r\n        let alpha = document.getElementById(\"alpha\");\r\n        nh0.value = event.nh0;\r\n        alpha.value = event.alpha;\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const form = event.currentTarget;\r\n        let site = document.getElementById(\"site\").value;\r\n        let observation = document.getElementById(\"observation\").value;\r\n        let volume = document.getElementById(\"volume\").value;\r\n        let suction = document.getElementById(\"suction\").value;\r\n        let timeInterval = document.getElementById(\"timeInterval\").value;\r\n        let radius = document.getElementById(\"radius\").value;\r\n        let nh0 = document.getElementById(\"nh0\").value;\r\n        let alpha = document.getElementById(\"alpha\").value;\r\n\r\n        let lat = document.getElementById(\"lat\").value;\r\n        if (lat === \"\") lat = null;\r\n        let lon = document.getElementById(\"lon\").value;\r\n        if (lon === \"\") lon = null;\r\n\r\n        if (form.checkValidity() === false) {\r\n            event.stopPropagation();\r\n        }\r\n        else {\r\n            let infiltrometerData = {\r\n                initialVolume: volume,\r\n                coordinates: { lat: Number(lat), lon: Number(lon) },\r\n                soilType: { nh0: nh0, alpha: alpha },\r\n                infiltrometerRadius: radius,\r\n                timeInterval: timeInterval,\r\n                infiltrometerSuction: suction,\r\n                site,\r\n                observation\r\n            }\r\n            function updateData() {\r\n                // Set the infitrometer data in the store\r\n                dispatch(setInfiltrometerData(infiltrometerData));\r\n\r\n                // Set the last volume to the initial volume for the replication view\r\n                dispatch(setInitialVolume(volume));\r\n                dispatch(setVolume(volume));\r\n                dispatch(setLastVolume(volume));\r\n\r\n                // Send out the new report to the store\r\n                dispatch(newReport({\r\n                    date: (new Date()).toString(),\r\n                    protocol,\r\n                    infiltrometerData\r\n                }));\r\n\r\n            }\r\n            // If there is no lat/long data, try to get it\r\n            if (lat == null || lon == null) {\r\n                addGeoDataToReading({ volume, secondsElapsed: 0 }, (reading) => {\r\n                    infiltrometerData.coordinates.lat = reading.lat;\r\n                    infiltrometerData.coordinates.lon = reading.lon\r\n\r\n                    updateData();\r\n\r\n                    dispatch(addReading(reading));\r\n                    dispatch(setPage(\r\n                        protocol === Protocols.Baer ? Pages.BaerReplicationView : Pages.StandardReplicationView\r\n                    ));\r\n                });\r\n            }\r\n            else {\r\n                updateData();\r\n                dispatch(addReading({ volume, secondsElapsed: 0, lat, lon }));\r\n                dispatch(setPage(\r\n                    protocol === Protocols.Baer ? Pages.BaerReplicationView : Pages.StandardReplicationView\r\n                ));\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleReset = () => {\r\n        let site = document.getElementById(\"site\"); site.value = \"\";\r\n        let observation = document.getElementById(\"observation\"); observation.value = \"\";\r\n        let volume = document.getElementById(\"volume\"); volume.value = \"\";\r\n        let suction = document.getElementById(\"suction\"); suction.value = \"\";\r\n        let timeInterval = document.getElementById(\"timeInterval\"); timeInterval.value = \"\";\r\n        let radius = document.getElementById(\"radius\"); radius.value = \"\";\r\n        let nh0 = document.getElementById(\"nh0\"); nh0.value = \"\";\r\n        let alpha = document.getElementById(\"alpha\"); alpha.value = \"\";\r\n        let lat = document.getElementById(\"lat\"); lat.value = \"\";\r\n        let lon = document.getElementById(\"lon\"); lon.value = \"\";\r\n    }\r\n\r\n    const preloadCoordinates = () => {\r\n        let lat = document.getElementById(\"lat\").value;\r\n        if (lat === \"\") lat = null;\r\n        let lon = document.getElementById(\"lon\").value;\r\n        if (lon === \"\") lon = null;\r\n\r\n        let reading = { lat, lon };\r\n\r\n        addGeoDataToReading(reading, (reading) => {\r\n\r\n            // Make sure we haven't changed pages while waiting\r\n            if (document.getElementById(\"lat\") === null) return;\r\n\r\n            document.getElementById(\"lat\").value = reading.lat;\r\n            document.getElementById(\"lon\").value = reading.lon;\r\n        });\r\n\r\n    }\r\n    useEffect(preloadCoordinates, []);\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"mt-4 p-4 rounded border shadow\">\r\n                <h1 className=\"display-4 mb-4\">Initialize {protocol} Protocol </h1>\r\n\r\n                <Form validated onSubmit={handleSubmit}>\r\n\r\n                    {/* Site and Observation Name */}\r\n                    <Row>\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"display-6\">Site Name{\"  \"}\r\n                                    <HelpTip\r\n                                        size=\"25px\"\r\n                                        title=\"Site Name\"\r\n                                        content=\"Where you are recording data from, for organizational purposes.\" \r\n                                    />\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    id=\"site\"\r\n                                    type=\"text\"\r\n                                    size=\"lg\"\r\n                                    defaultValue={curInfiltrometerData.site}\r\n                                    placeholder=\"Enter site name...\"\r\n                                />\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label className='display-6'>Observation Name{\"  \"}\r\n                                    <HelpTip size=\"25px\" title=\"Observation Name\" content=\"The name of the observation you are recording, for organizational purposes.\" />\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    id=\"observation\"\r\n                                    type=\"text\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    defaultValue={curInfiltrometerData.observation}\r\n                                    placeholder=\"Enter observation...\"\r\n                                />\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <hr className=\"mt-5\" />\r\n\r\n                    {/* Time and Volume */}\r\n                    <Row className=\"mt-5 display-6\">\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label>Volume (mL)* {\" \"}\r\n                                    <HelpTip size=\"25px\" title=\"Volume\" content=\"The initial volume of water in the lower chamber of the infiltrometer (in mL).\" />\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    required\r\n                                    id=\"volume\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    defaultValue={curInfiltrometerData.initialVolume}\r\n                                    placeholder=\"Initial Volume (mL)\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label>Time (s)*{\"   \"}\r\n                                    <HelpTip\r\n                                        size=\"25px\"\r\n                                        title={protocol === Protocols.Baer ? \"Time\" : \"Time Interval\"}\r\n                                        content={protocol === Protocols.Baer ? \" The time interval for each observation. For the BAER protocol the time is one minute.\" : \"The time for each interval that you will record data for.\"} />\r\n                                </Form.Label>\r\n                                <Form.Control\r\n                                    required\r\n                                    id=\"timeInterval\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"1\"\r\n                                    defaultValue={curInfiltrometerData.timeInterval}\r\n                                    placeholder=\"Time (sec)\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <hr className=\"mt-5\" />\r\n\r\n                    {/* Suction and Radius */}\r\n                    <Row className=\"mt-5 display-6\">\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"display-6\">Suction (cm)*{\"  \"}\r\n                                    <HelpTip size=\"25px\" title=\"Suction\"\r\n                                        content={protocol === Protocols.Baer ?\r\n                                            \"For the BAER protocol the suction tube should be adjusted so that the 1 cm mark is aligned with the surface of the water in the upper chamber of the infiltrometer.\"\r\n                                            : \"The suction of the infiltrometer device.\"} />\r\n                                </Form.Label>\r\n                                <DropdownButton onSelect={(e) => setSuctionPreset(e)} variant=\"dark\" title=\"Preset Suction Values\">\r\n                                    <Dropdown.Item eventKey=\"-0.5\"> -0.5 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-1\"> -1 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-2\"> -2 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-3\"> -3 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-4\"> -4 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-5\"> -5 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-6\"> -6 </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey=\"-7\"> -7 </Dropdown.Item>\r\n                                </DropdownButton>\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Control\r\n                                    required\r\n                                    id=\"suction\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    max=\"0\"\r\n                                    defaultValue={curInfiltrometerData.infiltrometerSuction}\r\n                                    placeholder=\"Suction (cm)\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"display-6\">Radius (cm){\"  \"}\r\n                                    <HelpTip size=\"25px\" title=\"Radius\" content=\"Radius of the infiltrometer device being used. You may select from one of the preset types below, or input your own custom radius.\" />\r\n                                </Form.Label>\r\n                                <DropdownButton onSelect={(e) => setRadiusPreset(e)}variant=\"dark\" title=\"Preset Infiltrometer Types\">\r\n                                    <Dropdown.Item eventKey={infiltrometerTypes.MiniDisk.radius}>\r\n                                        {infiltrometerTypes.MiniDisk.displayName}\r\n                                    </Dropdown.Item>\r\n                                    <Dropdown.Item eventKey={infiltrometerTypes.MiniDiskV1.radius}>\r\n                                        {infiltrometerTypes.MiniDiskV1.displayName}\r\n                                    </Dropdown.Item>\r\n                                </DropdownButton>\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Control\r\n                                    id=\"radius\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    defaultValue={null}\r\n                                    placeholder=\"Radius (cm)\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                        <Form.Label as=\"h5\">(*) indicates a required field</Form.Label>\r\n                    </Row>\r\n\r\n                    <hr className=\"mt-5\" />\r\n\r\n                    {/* Soil Type */}\r\n                    <Row className=\"mt-5\">\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"display-6\">Soil Type{\"  \"}\r\n                                    <HelpTip size=\"25px\" title=\"Soil Type\" content=\"The type of soil you are conducting the protocol on. You may select a preset soil type from the menu below to automatically load all the necessary data, or input the N/H0 and Alpha values of a custom soil type if yours is not represented.\" />\r\n                                </Form.Label>\r\n                                <DropdownButton variant=\"dark\" title=\"Preset Soil Types\">\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sand)}> Sand </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.loamySand)}> Loamy Sand </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sandyLoam)}> Sandy Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.loam)}> Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.silt)}> Silt </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.siltLoam)}> Silt Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sandyClayLoam)}> Sandy Clay Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.clayLoam)}> Clay Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.siltyClayLoam)}> Silty Clay Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sandyClay)}> Sandy Clay </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.siltyClay)}> Silty Clay </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.clay)}> Clay </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.undefined)}> Unknown </Dropdown.Item>\r\n                                </DropdownButton>\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label>N/H0</Form.Label>\r\n                                <Form.Control\r\n                                    id=\"nh0\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    placeholder=\"N/H0\"\r\n                                />\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label>Alpha</Form.Label>\r\n                                <Form.Control\r\n                                    id=\"alpha\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    placeholder=\"Alpha\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <hr className=\"mt-5\" />\r\n\r\n                    {/* Location */}\r\n                    <Row className=\"mt-5\">\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"display-6\">Location{\"  \"}\r\n                                    <HelpTip size=\"25px\" title=\"Location\" content=\"Where you are taking data from. This is automatically loaded by the app if you have location services enabled. Otherwise, you will need to add the latitude and longitude values manually.\" />\r\n                                </Form.Label>\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label>Latitude</Form.Label>\r\n                                <Form.Control\r\n                                    id=\"lat\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    placeholder=\"Latitude\"\r\n                                />\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label>Longitude</Form.Label>\r\n                                <Form.Control\r\n                                    id=\"lon\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    placeholder=\"Longitude\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <hr className=\"mt-5\" />\r\n\r\n                    {/* Buttons */}\r\n                    <Row className=\"mt-5\">\r\n                        <Col>\r\n                            <Button type=\"submit\" variant=\"dark\" size=\"lg\" className=\"w-100\">Start Protocol</Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"mt-2\">\r\n                        <Col>\r\n                            <Button variant=\"danger\" size=\"sm\" className=\"w-100\" onClick={handleReset}>Clear Values</Button>\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default InitializeView;","\r\nimport { Protocols } from '../../reports/protocols';\r\nimport InitializeView from '../../reused-components/initialize-views/InitializeView';\r\nconst BaerInitializeView = () => {\r\n  return (<InitializeView protocol={Protocols.Baer} />)\r\n}\r\n\r\nexport default BaerInitializeView;","// Contains the reference to all protocol names\r\nexport const SeverityRatings = {\r\n    Strong: {min: 0, max: 3, name: \"Strong\"},\r\n    Weak: {min: 3, max: 8, name: \"Weak\"},\r\n    None: {min: 8, max: Infinity, name: \"None\"}\r\n}","\r\n//just used to upgrade if needed\r\nexport function InitializePhotoDB() { OpenPhotoDB(); }\r\nconst indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.moz_indexedDB;\r\nfunction OpenPhotoDB() {\r\n    return new Promise(function (resolve, reject) {\r\n        var req = indexedDB.open('photoDB');\r\n        req.onsuccess = function (evt) {\r\n            // Equal to: db = req.result;\r\n            var db = req.result;\r\n            console.log(\"openDb DONE\");\r\n            resolve(db);\r\n        };\r\n        req.onerror = function (evt) {\r\n            console.error(\"openDb:\", req.errorCode);\r\n            reject(\"Error while opening database\");\r\n        };\r\n\r\n        req.onupgradeneeded = function (evt) {\r\n\r\n            var db = req.result;\r\n            console.log(\"openDb.onupgradeneeded\");\r\n            db.createObjectStore('photos', { keyPath: 'id', autoIncrement: true });\r\n            resolve(db);\r\n        };\r\n    })\r\n\r\n}\r\n\r\nexport function clearPhotos() {\r\n    OpenPhotoDB().then((db) => {\r\n        let tx = db.transaction('photos', 'readwrite');\r\n        let request = tx.objectStore('photos').clear();\r\n        request.onerror = error => {\r\n            console.log(error);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport function addPhotoToDB(photoID, photoData) {\r\n    OpenPhotoDB().then((db) => {\r\n        let tx = db.transaction('photos', 'readwrite');\r\n        let request = tx.objectStore('photos').add({ id: photoID, value: photoData });\r\n        request.onerror = error => {\r\n            console.log(error);\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\nexport function deletePhotoFromDB(photoID) {\r\n    OpenPhotoDB().then((db) => {\r\n        let tx = db.transaction('photos', 'readwrite');\r\n        let request = tx.objectStore('photos').delete(photoID);\r\n        request.onerror = error => {\r\n            console.log(error);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport function getPhoto(photoID) {\r\n    return new Promise((resolve, reject) => {\r\n        OpenPhotoDB().then((db) => {\r\n            let transaction = db.transaction(\"photos\");\r\n            let request = transaction.objectStore(\"photos\").get(photoID);\r\n\r\n            request.onerror = function (error) {\r\n                console.log(error);\r\n                resolve(null);\r\n            }\r\n\r\n            request.onsuccess = function (val) {\r\n                if (val.target.result === undefined) return; //console.log(val.target.result.value);\r\n                resolve(val.target.result.value);\r\n            }\r\n        });\r\n\r\n    })\r\n\r\n}\r\n\r\n\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { addPhotoToDB, deletePhotoFromDB, getPhoto } from './photoDatabase';\r\n\r\n\r\n//structure like \r\n//const initialState = {\r\n//   [reportId]:\r\n//   [{thumbnail: GUID, full:GUID}]\r\n//   \r\n//}\r\nconst initialState = {};\r\n\r\nexport const albumsSlice = createSlice({\r\n    name: 'albums',\r\n    initialState,\r\n    // The `reducers` field lets us define reducers and generate associated actions\r\n    reducers: {\r\n        addPhoto: (state, action) => {\r\n\r\n            let {\r\n                reportId,\r\n                thumbnailData,\r\n                fullImageData\r\n            } = action.payload;\r\n\r\n            //generate uids for the images\r\n            let thumbnailID = uuidv4();\r\n            let fullID = uuidv4();\r\n\r\n            //add the photo data to indexDB\r\n            addPhotoToDB(thumbnailID, thumbnailData);\r\n            addPhotoToDB(fullID, fullImageData);\r\n\r\n            // Push a new photo into the store\r\n            if (state[reportId]!=undefined) {\r\n                state[reportId] = [...state[reportId],\r\n                {\r\n                    thumbnail: thumbnailID,\r\n                    full: fullID,\r\n                }\r\n                ];\r\n            }\r\n            else {\r\n                state[reportId] = [\r\n                    {\r\n                        thumbnail: thumbnailID,\r\n                        full: fullID,\r\n                    }\r\n                ];\r\n            }\r\n\r\n\r\n        },\r\n        //delete a single photo group\r\n        deletePhoto: (state, action) => {\r\n\r\n            let {\r\n                reportId,\r\n                photoIndex\r\n            } = action.payload;\r\n\r\n            //remove the photo in the state\r\n            if (state[reportId] != undefined && state[reportId] != null) {\r\n                if (state[reportId][photoIndex] != null) {\r\n                    //delete the photos from indexDB\r\n                    deletePhotoFromDB(state[reportId][photoIndex].thumbnail);\r\n                    deletePhotoFromDB(state[reportId][photoIndex].full);\r\n                }\r\n                else return;\r\n            } else return;\r\n\r\n            //remove from store\r\n            state[reportId].splice(photoIndex, 1);\r\n\r\n        },\r\n        //deletes all photos on the report group\r\n        deleteAllPhotos: (state, action) => {\r\n\r\n            let {\r\n                reportId,\r\n\r\n            } = action.payload;\r\n\r\n            //remove the photo in the state\r\n            if (state[reportId]) {\r\n                state[reportId].forEach(photoGroup => {\r\n                    //delete the photos from indexDB\r\n                    deletePhotoFromDB(photoGroup.thumbnail);\r\n                    deletePhotoFromDB(photoGroup.full);\r\n                })\r\n            } else return;\r\n\r\n            //remove from store\r\n            state[reportId] = null;\r\n\r\n        }\r\n    }\r\n});\r\n\r\nexport const { addPhoto, deletePhoto, deleteAllPhotos } = albumsSlice.actions;\r\nexport const selectAlbums = (state) => state.album;\r\n\r\n/**\r\n * \r\n * @param {The id of the photo} id\r\n * @param {The function that is called when the photo is returned from indexedDB,\r\n * base64 data is passed to the function} callback \r\n */\r\nexport const getPhotoFromID = getPhoto;\r\n\r\nexport default albumsSlice.reducer;","import { SeverityRatings } from \"./severityRatings\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { getPhotoFromID, selectAlbums } from \"../photos/albumsSlice\";\r\nimport { Protocols } from './protocols'\r\nconst JSZip = require(\"jszip\");\r\n\r\n\r\n// Create a CSV of the current report\r\nexport function makeCSV(curReport, reportAlbums) {\r\n    let obj = {};\r\n    obj[curReport.id] = curReport;\r\n    return makeCSVFromGroupOfReports(obj, reportAlbums);\r\n}\r\n\r\nfunction handleTextForCSV(text) {\r\n    if (text === undefined) return (\"\");\r\n    return text.toString().replaceAll('\"', '\"\"');\r\n}\r\n\r\n// Get data from all selected reports\r\n// Write to a CSV\r\nexport function makeCSVFromGroupOfReports(reportGroup, reportAlbums) {\r\n    var zip = new JSZip();\r\n    let reportPromises = [];\r\n    Object.keys(reportGroup).forEach((reportID, index) => {\r\n        reportPromises.push(new Promise((resolve, reject) => {\r\n            let folderName = \"report_\" + index;\r\n            let folder = zip.folder(folderName);\r\n            let curReport = reportGroup[reportID];\r\n            let csvData = makeCSVDataFromReading(curReport);\r\n\r\n            let reportAlbum = reportAlbums == null ? null : reportAlbums[reportID];\r\n\r\n            //add csv data tot he folder\r\n            folder.file(folderName + \".csv\", csvData);\r\n\r\n            //put all the images on this report in their own images folder\r\n            if (reportAlbum == null ||\r\n                reportAlbum == undefined ||\r\n                reportAlbum.length == 0) resolve();\r\n            else {\r\n                fetchAllImages(reportAlbum).then((imageData) => {\r\n                    //make sure we actually have images\r\n                    if (imageData.length === 0) resolve();\r\n                    var img = folder.folder(\"images\");\r\n                    imageData.forEach((photo) => {\r\n                        img.file(photo.name, photo.data, { base64: true });\r\n                    });\r\n                    //resolve with the folder contents\r\n                    resolve();\r\n                });\r\n            }\r\n\r\n\r\n        }));\r\n    });\r\n    Promise.all(reportPromises).then(() => {\r\n        zip.generateAsync({ type: \"blob\" })\r\n            .then(function (content) {\r\n                // see FileSaver.js\r\n                saveAs(content, \"reports.zip\");\r\n            });\r\n    });\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction makeCSVDataFromReading(curReport) {\r\n    let data = [];\r\n    let curReportData = [];\r\n    if (curReport.protocol === Protocols.Baer) {\r\n        //Download for BAER\r\n        data = [['Protocol', 'Soil Alpha', 'Soil NH/O', 'Average Rate (mL/min)', 'Suction (cm)', 'Radius (cm)', 'Severity Rating', 'Site Name', 'Observation Name',\r\n            'Notes', 'Replication Number', 'Time (sec)', 'Volume(mL)', 'Rate(mL / min)', 'Latitude', 'Longitude', 'Date', 'Time']];\r\n        curReportData = [curReport.protocol, curReport.infiltrometerData.soilType.alpha, curReport.infiltrometerData.soilType.nh0,\r\n        findAverageRate(curReport, false), curReport.infiltrometerData.infiltrometerSuction, curReport.infiltrometerData.infiltrometerRadius,\r\n        findSeverityRating(findAverageRate(curReport)).name, handleTextForCSV(curReport.infiltrometerData.site),\r\n        handleTextForCSV(curReport.infiltrometerData.observation), handleTextForCSV(curReport.notes)];\r\n    }\r\n    else {\r\n        //Download for standard\r\n        data = [['Protocol', 'Soil Alpha', 'Soil NH/O', 'C1 (cm/s^())', 'C2 (cm/s)', 'K (cm/s)', 'A', 'Suction (cm)', 'Radius (cm)', 'Site Name',\r\n            'Observation Name', 'Notes', 'Reading Number', 'Time (sec)', 'Volume(mL)', 'Latitude', 'Longitude', 'Date', 'Time']];\r\n        curReportData = [curReport.protocol, curReport.infiltrometerData.soilType.alpha, curReport.infiltrometerData.soilType.nh0,\r\n        curReport.infiltrometerData.C1, curReport.infiltrometerData.C2, curReport.infiltrometerData.K, curReport.infiltrometerData.A,\r\n        curReport.infiltrometerData.infiltrometerSuction, curReport.infiltrometerData.infiltrometerRadius, handleTextForCSV(curReport.infiltrometerData.site),\r\n        handleTextForCSV(curReport.infiltrometerData.observation), handleTextForCSV(curReport.notes)];\r\n    }\r\n    let i = 0;\r\n    let date = new Date(curReport.date).toDateString();\r\n\r\n\r\n    //readings data\r\n    curReport.readings.forEach(reading => {\r\n        //reading data\r\n        let row = [...curReportData];\r\n        //Actual time of the reading\r\n        let time = new Date(curReport.date)\r\n        time = new Date(time.setSeconds(time.getSeconds() + reading.secondsElapsed)).toTimeString();\r\n\r\n        if (curReport.protocol === Protocols.Baer) {\r\n            //Download for BAER\r\n            row.push((i + 1).toString(), reading.secondsElapsed,\r\n                reading.volume,\r\n                findRate(i, curReport), reading.lat, reading.lon, date, time);\r\n        } else {\r\n            //Download for Standard (No Rate)\r\n            row.push((i + 1).toString(), reading.secondsElapsed,\r\n                reading.volume,\r\n                reading.lat, reading.lon, date, time);\r\n        }\r\n\r\n        data.push(row);\r\n        i++;\r\n    });\r\n    return toCsv(data);\r\n}\r\n\r\n\r\nfunction toCsv(input) {\r\n    return input.map(row => row.join(',')).join('\\n')\r\n}\r\n\r\n// Find flow rate (ml/min) for an individual reading in a report\r\nexport function findRate(readingIndex, report, fromBeginning = false) {\r\n\r\n    if (readingIndex > 0) {\r\n        if (fromBeginning) {\r\n            return Number(report.readings[0].volume - report.readings[readingIndex].volume)\r\n                / (Number(report.readings[readingIndex].secondsElapsed) / 60);\r\n        }\r\n        else {\r\n            var _f = report.readings[readingIndex - 1];\r\n            var _s = report.readings[readingIndex];\r\n            let deltaV = Number(_f.volume) - Number(_s.volume);\r\n            let deltaT = Number(_s.secondsElapsed) - Number(_f.secondsElapsed);\r\n            return (deltaV) / (deltaT / 60);\r\n        }\r\n\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n\r\n// Find average flow rate (mL/min) for a report\r\nexport function findAverageRate(report, fromBeginning = false) {\r\n    let sum = 0;\r\n\r\n    for (let i = 0; i < report.readings.length; i++) {\r\n        sum += findRate(i, report, fromBeginning);\r\n    }\r\n\r\n    return sum / (report.readings.length - 1);\r\n}\r\n\r\n//fetches all the images of an album, returns promise with all the images\r\nexport function fetchAllImages(reportAlbum) {\r\n    //some constants to declare\r\n    const hasPhotos = reportAlbum !== null && reportAlbum !== undefined && reportAlbum.length > 0;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        //first get all the image data from a report\r\n        if (!hasPhotos) resolve([]); //don't download any photos if we have none\r\n        let promises = [];\r\n\r\n        for (let i = 0; i < reportAlbum.length; i++) {\r\n            promises.push(getPhotoFromID(reportAlbum[i].full));\r\n        }\r\n\r\n        let photos = [];\r\n        Promise.all(promises).then((data) => {\r\n            data.forEach((photo, i) => {\r\n\r\n                //we need to seperate the extension and the data\r\n                //the photo data comes as: data:image/png;base64, <actualData>\r\n\r\n                let ext = photo.match(/[^:/]\\w+(?=;|,)/)[0];\r\n                let actualData = photo.split(',')[1];\r\n\r\n                photos.push({ data: actualData, name: (\"site_photo_\" + i + \".\" + ext).toString() });\r\n            });\r\n            resolve(photos);\r\n        }\r\n        );\r\n\r\n    })\r\n\r\n}\r\n\r\n//downloads all the images on a report album as a zip\r\nexport function downloadAllImages(reportAlbum) {\r\n    fetchAllImages(reportAlbum).then((photos) => {\r\n        //make sure we actually have images\r\n        if (photos.length === 0) return;\r\n\r\n        var zip = new JSZip();\r\n\r\n        var img = zip.folder(\"images\");\r\n        photos.forEach((photo) => {\r\n            //console.log(photo.data);\r\n            img.file(photo.name, photo.data, { base64: true });\r\n        });\r\n        zip.generateAsync({ type: \"blob\" })\r\n            .then(function (content) {\r\n                // see FileSaver.js\r\n                saveAs(content, \"images.zip\");\r\n            });\r\n    });\r\n}\r\n\r\n\r\n// Returns severity rating based on average rate\r\n// See severityRatings.js for severity rating values\r\nexport function findSeverityRating(avgRate) {\r\n    if (avgRate >= SeverityRatings.None.min)\r\n        return SeverityRatings.None;\r\n    if (avgRate >= SeverityRatings.Strong.min && avgRate < SeverityRatings.Strong.max)\r\n        return SeverityRatings.Strong;\r\n    if (avgRate >= SeverityRatings.Weak.min && avgRate < SeverityRatings.Weak.max)\r\n        return SeverityRatings.Weak;\r\n    else return SeverityRatings.None;\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Container, Button, Modal, Form, Alert, Row } from 'react-bootstrap';\r\nimport { selectCurId, selectReports, addReading, removeReadingWithTime } from \"../../reports/reportsSlice\";\r\nimport { findAverageRate, findSeverityRating, findRate } from '../../reports/reportsDataPackager';\r\nimport { selectInfiltrometerData } from '../../reused-components/reused-slices/initializeSlice';\r\nimport { Protocols } from '../../reports/protocols';\r\nconst Table = ({ protocol, editable }) => {\r\n    const rawReports = useSelector(selectReports);\r\n    const curInfiltrometerData = useSelector(selectInfiltrometerData);\r\n    const dispatch = useDispatch();\r\n    const curReport = rawReports[useSelector(selectCurId)];\r\n    const [state] = useState(filterReadings());\r\n    const [curVolume, setCurVolume] = useState(0);\r\n    const [modalData, setModalData] = useState(\r\n        {\r\n            visible: false,\r\n            curTime: 0,\r\n            curVolume: 0,\r\n            curId: 0\r\n        }\r\n    )\r\n    // Create an array to use for a table row from reading data\r\n    function filterReadings() {\r\n        if (curReport === undefined) return { reports: [] };\r\n\r\n        let readingsArr = [];\r\n        for (let i = 0; i < curReport.readings.length; i++) {\r\n            readingsArr[i] = {\r\n                id: i,\r\n                Time: curReport.readings[i].secondsElapsed,\r\n                Volume: curReport.readings[i].volume,\r\n                Rate: findRate(i, curReport, protocol === Protocols.Standard)\r\n            };\r\n        }\r\n        return { reports: readingsArr };\r\n    }\r\n\r\n    // Map state to table elements\r\n    function renderTableData() {\r\n        return filterReadings().reports.map((report, index) => {\r\n            const { id, Time, Volume, Rate } = report //destructuring\r\n\r\n            if (protocol === Protocols.Baer) {\r\n                return (\r\n                    <tr key={id} onClick={\r\n                        () => {\r\n                            if (!editable) return;\r\n                            setModalData({ curTime: Time, curVolume: Volume, curId: id, visible: true })\r\n                            setCurVolume(Volume);\r\n\r\n\r\n                        }\r\n                    }>\r\n                        <td>{id}</td>\r\n                        <td>{Time}</td>\r\n                        <td>{Volume}</td>\r\n                        <td>{Rate.toPrecision(4)}</td>\r\n                    </tr>\r\n                )\r\n            } else {\r\n                return (\r\n                    <tr key={id} onClick={\r\n                        () => {\r\n                            if (!editable) return;\r\n                            setModalData({ curTime: Time, curVolume: Volume, curId: id, visible: true });\r\n                            setCurVolume(Volume);\r\n\r\n                        }\r\n                    }>\r\n                        <td>{id}</td>\r\n                        <td>{Time}</td>\r\n                        <td>{Volume}</td>\r\n                    </tr>\r\n                )\r\n            }\r\n        })\r\n    }\r\n\r\n    // Create table header\r\n    function renderTableHeader() {\r\n        try {\r\n            let header = Object.keys(state.reports[0])\r\n            return header.map((key, index) => {\r\n                if (key.toUpperCase() === \"ID\") {\r\n                    return <th key={index}>{key.toUpperCase()}</th>\r\n                }\r\n                if (key.toUpperCase() === \"TIME\") {\r\n                    return <th key={index}>{key.toUpperCase() + \" (s)\"}</th>\r\n                }\r\n                if (key.toUpperCase() === \"VOLUME\") {\r\n                    return <th key={index}>{key.toUpperCase() + \" (mL)\"}</th>\r\n                }\r\n                if (protocol === Protocols.Baer) {\r\n                    if (key.toUpperCase() === \"RATE\") {\r\n                        return <th key={index}>{key.toUpperCase() + \" (mL/min)\"}</th>\r\n                    }\r\n                } else {\r\n                    return;\r\n                }\r\n\r\n                return <th key={0} className=\"text-center\">No Readings To Display</th>;\r\n            })\r\n        }\r\n        catch (e) {\r\n            return <th key={0} className=\"text-center\">No Readings To Display</th>;\r\n        }\r\n\r\n    }\r\n\r\n    // Handle submit of modal\r\n    const handleSubmit = (event) => {\r\n        let newVolume = document.getElementById(\"newVolume\");\r\n        event.preventDefault();\r\n        if (event.currentTarget.checkValidity() === true) {\r\n            setModalData({ visible: false });\r\n            if (String(newVolume.value).length === 0 || newVolume.value === null || newVolume.value === undefined) {\r\n                dispatch(removeReadingWithTime(modalData.curTime));\r\n                return;\r\n            }\r\n            else {\r\n                dispatch(addReading({\r\n                    volume: modalData.curVolume,\r\n                    secondsElapsed: modalData.curTime,\r\n                    lat: curInfiltrometerData.coordinates.lat,\r\n                    lon: curInfiltrometerData.coordinates.lon\r\n                }));\r\n            }\r\n        }\r\n        else return;\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Row>\r\n                <table class=\"table table-light table-striped table-hover\" id='students'>\r\n                    <tbody>\r\n                        <tr class=\"table-dark\">{renderTableHeader()}</tr>\r\n                        {renderTableData()}\r\n                    </tbody>\r\n                </table>\r\n                {protocol === Protocols.Baer ?\r\n                    <table class=\"table table-light table-striped table-hover\">\r\n                        <tbody>\r\n                            <tr class=\"table-dark\">\r\n                                <th class=\"text-center\">AVERAGE (mL/min)</th>\r\n                                <th className=\"text-center\">SEVERITY RATING</th>\r\n                            </tr>\r\n                            <tr class=\"table-striped\">\r\n                                <td className=\"text-center\">{findAverageRate(curReport).toPrecision(4)}</td>\r\n                                <td class=\"text-center\">{findSeverityRating(findAverageRate(curReport)).name}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    : null}\r\n            </Row>\r\n\r\n            <Modal show={modalData.visible}>\r\n                <Modal.Header>\r\n                    <Modal.Title>Enter New Volumetric Data</Modal.Title>\r\n                </Modal.Header>\r\n                <Form validated onSubmit={handleSubmit}>\r\n                    <Modal.Body>\r\n                        <Form.Text>Current time: {modalData.curTime} s</Form.Text>\r\n                        <br></br>\r\n                        <Form.Text>Current volume: {curVolume} mL</Form.Text>\r\n                        <Form.Control\r\n                            id=\"newVolume\"\r\n                            type=\"number\"\r\n                            placeholder=\"New volume\"\r\n                            min=\"0\"\r\n                            defaultValue=\"\"\r\n                            onChange={() => setModalData({ ...modalData, curVolume: document.getElementById(\"newVolume\").value })}\r\n                        />\r\n                        {\r\n                            // Why are there two checks?\r\n                            // document.getElementById(\"newVolume\") doesn't exist until the modal is rendered.\r\n                            // If you try to read the value of an element that doesn't exist, compiler will throw an error.\r\n                            // So, first check if the element exists. Then, if it does, check if its empty.\r\n                            !document.getElementById(\"newVolume\") ?\r\n                                <Alert variant=\"danger\" className=\"text-center mt-3\">Submitting an empty value will remove this table entry!</Alert>\r\n                                :\r\n                                document.getElementById(\"newVolume\").value === \"\" ?\r\n                                    <Alert variant=\"danger\" className=\"text-center mt-3\">Submitting an empty value will remove this table entry!</Alert>\r\n                                    :\r\n                                    null\r\n                        }\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            onClick={() => setModalData({ ...modalData, visible: false })}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            variant=\"primary\"\r\n                        >\r\n                            {!document.getElementById(\"newVolume\") || document.getElementById(\"newVolume\").value === \"\" ? \"Delete Reading\" : \"Save Changes\"}\r\n                        </Button>\r\n                    </Modal.Footer>\r\n                </Form>\r\n            </Modal>\r\n        </Container>\r\n    )\r\n}\r\nTable.defaultProps = {\r\n    protocol: Protocols.Baer, editable: false\r\n}\r\n\r\nexport default Table","import { useState, useEffect } from \"react\";\r\n\r\nexport const useAudio = url => {\r\n    const [audio] = useState(new Audio(url));\r\n    const [playing, setPlaying] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (playing) {\r\n            audio.play()\r\n        }\r\n        else {\r\n            audio.pause();\r\n            audio.currentTime = 0;\r\n        }\r\n    },\r\n        [playing, audio]\r\n    );\r\n\r\n    useEffect(() => {\r\n        audio.addEventListener('ended', () => setPlaying(false));\r\n        return () => {\r\n            audio.removeEventListener('ended', () => setPlaying(false));\r\n        };\r\n    }, [audio]);\r\n\r\n    return [playing, setPlaying];\r\n};\r\n","export default __webpack_public_path__ + \"static/media/beep-01a.40e5c7db.mp3\";","/* React/Redux Imports */\r\nimport React, { useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { CountdownCircleTimer } from \"react-countdown-circle-timer\";\r\nimport { Modal, Button, Form, Container, Row, Col, ProgressBar, Offcanvas } from 'react-bootstrap';\r\n\r\n/* Slice Imports */\r\nimport { addReading, selectCurReadingID, setGatheringData } from '../../reports/reportsSlice';\r\nimport { selectTimeInterval, selectInitialVolume } from '../../reused-components/reused-slices/initializeSlice';\r\nimport { setVolume, setSecondsElapsed, selectLastVolume, setLastVolume } from '../../reused-components/reused-slices/replicationSlice';\r\nimport { setPage } from '../../page-redirection/redirector-slice';\r\n\r\n/* HTML/CSS Imports */\r\nimport './timer.css'\r\nimport Table from '../baer-results/table';\r\n\r\n/* Other Imports */\r\nimport { addGeoDataToReading } from '../../useful-functions/usefulFunctions';\r\nimport { useAudio } from '../../audio/Player';\r\nimport beep from '../../audio/beep-01a.mp3';\r\nimport { Pages } from '../../page-redirection/Redirector';\r\n\r\n\r\nconst BaerReplicationView = () => {\r\n  const initializeState = {\r\n    timerIsPlaying: false,\r\n    key: 0\r\n  };\r\n  const curID = useSelector(selectCurReadingID); // ID of reading, not report\r\n  const initialVolume = Number(useSelector(selectInitialVolume));\r\n\r\n\r\n  let timeInterval = useSelector(selectTimeInterval);\r\n  const [remaining, setRemaining] = useState(timeInterval);\r\n  const [showHelp, setShowHelp] = useState(false);\r\n  let lastVolume = Number(useSelector(selectLastVolume));\r\n  let maxVolume = Math.min(initialVolume, lastVolume);\r\n  let setPlaying = (playing) => setState({\r\n    ...state,\r\n    timerIsPlaying: playing\r\n  });\r\n  let dispatch = useDispatch();\r\n  let [state, setState] = useState(initializeState);\r\n\r\n  function endProtocol() { // Mark that we are done gathering data on this report\r\n    dispatch(setGatheringData(false));\r\n\r\n    // Go to the results page\r\n    dispatch(setPage(Pages.BaerResultsView))\r\n  }\r\n\r\n  // Modal ==============================================================================\r\n  let [show, setShow] = useState(false);\r\n  let [playing, setAudPlaying] = useAudio(beep);\r\n  const handleClose = () => {\r\n    setShow(false);\r\n    setPlaying(false)\r\n  };\r\n  const handleOpen = () => {\r\n    setAudPlaying(false);\r\n    setAudPlaying(true);\r\n    setShow(true);\r\n  }\r\n  // Handles render logic for the countdown timer\r\n  function renderTime({ remainingTime }) {\r\n\r\n    setRemaining(remainingTime);\r\n\r\n    if (remainingTime === 0) {\r\n      return <div className=\"timer\">Time is up!</div>;\r\n    }\r\n\r\n    return (\r\n      <div className=\"timer\">\r\n        <div className=\"text\">Time remaining:</div>\r\n        <div className=\"value\">\r\n          {remainingTime}</div>\r\n        <div className=\"text\">seconds</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const volumeReading = document.getElementById(\"volumeReading\").value;\r\n\r\n    if (form.checkValidity() === false) {\r\n      event.stopPropagation();\r\n    } else { // Calculate the total number of elapsed seconds\r\n      let secondsElapsed = (curID + 1) * timeInterval;\r\n\r\n      // Set the volume and time in the replication store\r\n      dispatch(setLastVolume(volumeReading));\r\n      dispatch(setVolume(volumeReading));\r\n      dispatch(setSecondsElapsed(secondsElapsed));\r\n\r\n      // Add the reading using the reports slice\r\n      // Try to gather geo data\r\n      addGeoDataToReading({\r\n        volume: volumeReading,\r\n        secondsElapsed\r\n      }, (newReading) => {\r\n        dispatch(addReading(newReading));\r\n      });\r\n\r\n      // Close modal\r\n      handleClose();\r\n    }\r\n  };\r\n  // ====================================================================================\r\n\r\n  return (\r\n    <>\r\n      <Container className=\"mt-4 p-3 rounded border shadow\">\r\n        <h1 className=\"mb-4 display-4\">Current Replication: {curID + 1}</h1>\r\n\r\n        {/* Timer */}\r\n        <Row>\r\n          <Col>\r\n            <div className=\"mt-4 timer-wrapper\">\r\n              <CountdownCircleTimer\r\n                key={state.key}\r\n                isPlaying={state.timerIsPlaying}\r\n                duration={Number(timeInterval)}\r\n                colors={[[\"#004777\", 0.33], [\"#F7B801\", 0.33], [\"#A30000\"]]}\r\n                onComplete={() => handleOpen()}\r\n              >\r\n                {renderTime}\r\n              </CountdownCircleTimer>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Buttons */}\r\n        <Row className=\"text-center\">\r\n          <Col className=\"mt-4\">\r\n            <Button variant=\"dark\" className=\"w-50\" size=\"lg\"\r\n              disabled={\r\n                state.timerIsPlaying\r\n              }\r\n              onClick={\r\n                () => {\r\n                  setState({\r\n                    timerIsPlaying: true,\r\n                    key: state.key + 1\r\n                  });\r\n                }\r\n              }>\r\n              {\r\n                !state.timerIsPlaying ? \"Start Replication\" : \"Replication Running...\"\r\n              } </Button>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"text-center\">\r\n          <Col className=\"mt-2\">\r\n            <Button variant=\"secondary\" className=\"w-50\" size=\"lg\"\r\n              onClick={endProtocol}>\r\n              End Protocol\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Table */}\r\n        <Row className=\"mt-4\">\r\n          <Col>\r\n            <Table>{/* This table is rendered from table.js */}</Table>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Help Button */}\r\n          <Row className=\"justify-content-center\">\r\n            <Button \r\n              variant=\"primary\" \r\n              hidden={state.timerIsPlaying}\r\n              className=\"w-50\"\r\n              size=\"lg\"\r\n              onClick={() => setShowHelp(true)}\r\n            >\r\n              Help\r\n            </Button>\r\n            <Offcanvas\r\n              show={showHelp}\r\n              onHide={() => setShowHelp(false)}\r\n              placement=\"bottom\"\r\n            >\r\n              <Offcanvas.Header closeButton>\r\n                <Offcanvas.Title>Protocol Guide</Offcanvas.Title>\r\n              </Offcanvas.Header>\r\n              <Offcanvas.Body>\r\n                <h4>To properly conduct a replication:</h4>\r\n                <ol>\r\n                  <li>Expose the soil about 1 to 3 cm in depth, removing any overlying ash or minerals.</li>\r\n                  <li>With a full infiltrometer, place the porous disk flat against the soil and perpendicular to the surface. Tap the Start Replication button as soon as the infiltrometer disk and the soil come into contact.</li>\r\n                  <li>At the end of the timer, remove the infiltrometer from the soil and hold the top of the tube so that the water is at eye level. Record the end volume.</li>\r\n                  <li>Repeat these steps for as many replications as necessary.</li>\r\n                  <li>Once all replications have been completed, select the \"End Protocol\" button</li>\r\n                </ol>\r\n              </Offcanvas.Body>\r\n            </Offcanvas>\r\n          </Row>\r\n\r\n      </Container>\r\n\r\n      {/* Modal */}\r\n      <Modal show={show}\r\n        onHide={handleClose}\r\n        backdrop=\"static\"\r\n        centered>\r\n        <Modal.Header>\r\n          <Modal.Title>Enter volumetric data for replication: {\r\n            curID + 1\r\n          }</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form noValidate validated\r\n            onSubmit={handleSubmit}>\r\n            <Form.Group>\r\n              <Form.Text muted>\r\n                Previous volume: {maxVolume} mL\r\n              </Form.Text>\r\n              <Form.Control required autofocus type=\"number\" step=\"any\" size=\"lg\" min=\"0\"\r\n                max={maxVolume}\r\n                id=\"volumeReading\"\r\n                placeholder=\"Volume (mL)\" />\r\n              <Form.Control.Feedback type=\"invalid\">\r\n                Enter a valid reading, or hit \"Cancel\".\r\n              </Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Modal.Footer>\r\n              <Button variant=\"outline-secondary\" size=\"lg\"\r\n                onClick={handleClose}>\r\n                Cancel\r\n              </Button>\r\n              <Button type=\"submit\" variant=\"dark\" size=\"lg\">\r\n                Submit\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Form>\r\n        </Modal.Body>\r\n      </Modal>\r\n\r\n      <ProgressBar className=\"fixed-bottom\" now={ (remaining / (timeInterval)) * 100} />\r\n    </>\r\n  );\r\n\r\n}\r\n\r\nexport default BaerReplicationView;\r\n","import React from \"react\"\n\nexport function BaerLogo(props) {\n    return (\n        <svg viewBox={\"0 0 \" + props.width + \" \" + props.height} width=\"127\" height=\"53\">\n            <path fill=\"#ffffff\" d=\"M34 29L34 31L35.4722 32.5L36.6944 34.0556L37.1944 35L37.4722 37L37 39L36.6667 40L36.3333 41L35.3333 44L35 45L34.6944 46L34.4167 47L34.1111 49L34.1111 50L34.3889 52L34.7778 54L34.9167 55L34.9722 57L34.9167 58L34.7778 59L34.3611 61L34.1389 62L33.8611 63L33.3889 65L33.1944 66L32.8056 68L32.3889 70L32.0833 72L31.9167 74L31.7778 75L31.3889 77L31.0833 79L31.0278 80L31 82L31 84L31 87L31 90L31 91L31.0278 93L31.0833 94L31.2222 95L31.7222 97L32.6389 98.9167L34.1111 100.583L36 102L37 102.667L38 103.333L40 104.611L41 105.194L43 106.389L45 107.611L47 108.75L48 109.222L50 110.222L51 110.75L53 111.5L54.9722 111.583L55.8889 111.25L57.2778 109.889L57.8333 108.056L57.7222 107.056L57 105L58.5 104.333L60.0556 103.583L62 102.889L63 102.639L64 102.389L66 102.083L68 102L69 102L71 101.917L73 101.611L74 101.389L75 101.222L77 101.111L79 101.472L80 101.833L81 102.167L82 102.556L83 102.833L85 103.361L86 103.611L88 103.833L90 103.583L90.9444 103.333L91.9444 102.972L92.5 102.806L94 102L93.4722 100.583L92.5 99.4167L90.9167 98.25L89.9722 97.75L88.0833 96.5278L86.5 94.9167L85.9444 93.9722L85.4722 93L84.8333 91L84.5556 90L83.7222 88L82.5278 86L81.75 85L79.9722 83L79 82L77 80.0833L76 79.2222L74 77.6111L72 75.9167L70.1111 74.0556L69.3056 73.0556L68.7778 72.5L68 71L70.0556 70.9167L72 70.5278L74 69.7222L75 69.1667L77 68.0278L79 67.1667L80 66.9722L82 67.25L83 67.5556L84.9444 67.9167L85.5 67.9722L87 68L87 66.5L86.9167 64.9444L86.75 64L86.5278 63L86.1389 62L85.1389 60.0833L83.75 58.5L82.9167 57.9444L81 57.25L80 57.0833L78 57L77 57L75 56.9722L74 56.8889L72 56.3056L70.0556 55.1944L69.5 54.75L68 54L68 52L69.25 51.2222L69.6667 50.6944L71.1389 48.9722L72.6389 47.0278L73.3889 46.0833L75.0556 44.3889L75.9444 43.6111L77.5278 41.9167L78.1389 40.9722L78.7222 40L79.1389 39.0556L79.7222 37.5L80 36L78.5 35.3056L77.9444 35.3333L76.9444 35.2778L75 35.6944L73 36.3889L72 36.8333L70 37.7778L69 38.2222L68 38.7778L67 39.25L65 40.3611L64.0556 40.9167L63.0556 41.3611L62.5 41.6667L61 42L61 38.9444L61 37L61.0278 35L61.25 33L61.5 32L62.3889 30L62.9167 29L63.6944 27L63.9722 25L64 23L64 22.0556L64 19L61.9444 19L60 18.9167L58 18.5278L57 18.1667L55 17.4722L53 17.1111L52 17.1111L51 17.2222L49 17.6389L47 18.1667L46 18.4722L44.0833 19.5L43.2222 20.25L42.4167 21.0833L41 22.9722L39.5833 24.75L38.7778 25.5278L37.0278 26.7778L35.5 27.7778L34 29M53 21L52.2778 22.1389L51.75 22.3333L50 23L51 21L53 21M63 27L62.2222 27.7222L61.75 27.75L60.9444 27.9444L59 28L59.7778 27.2778L60.25 27.25L61.0556 27.0556L63 27M39 29.3333L39.3333 29.6667L38.6667 29.6667L39 29.3333M65 56L64.2222 57.5L62.9444 58.9444L62.0278 59.6944L61.5 60.2222L60 61L60.7778 59.5L62.0556 58.0556L62.9722 57.3056L63.5 56.7778L65 56M64.6667 59.6667L64.6667 60.3333L64.3333 60.3333L64.3333 59.6667L64.6667 59.6667M59 61L58 63L57 63L57 62L59 61M65.6667 62.6667L65.6667 63.3333L65.3333 63.3333L65.3333 62.6667L65.6667 62.6667M70.6667 84.6667L70.6667 85L70.3333 85.3333L70.3333 84.6667L70.6667 84.6667M70 87L69.9167 88.5L69.7778 89.0556L69.3333 90.9444L68.9722 91.9444L68.8056 92.5L68 94L67.5278 93.2222L67.6667 92.6944L67.75 91.8889L68.3333 90.0278L68.6389 89.1111L69.0278 88.3056L69.1944 87.7778L70 87M36 88L39 88L40 89L35 89L36 88M42 89L41 90L42 89M67 95L66 96L67 95z\" />\n        </svg>\n    );\n}\n\n\n","\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setPage } from \"../page-redirection/redirector-slice\";\r\nimport { Navbar, Nav, Container, NavDropdown } from \"react-bootstrap\";\r\nimport { BaerLogo } from \"./baerLogo\";\r\nimport { Pages } from \"../page-redirection/Redirector\";\r\nexport const NavBar = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    return (\r\n        <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n            <Container>\r\n\r\n                <Navbar.Brand >\r\n                    <div className=\"container\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col\">\r\n                                <BaerLogo width={1} height={110}>\r\n                                </BaerLogo>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </Navbar.Brand>\r\n                <Navbar.Brand href=\"https://www.mtu.edu/computing/\" >\r\n                    <div className=\"container\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col\">\r\n                                <img\r\n                                    src=\"https://www.mtu.edu/mtu_resources/images/download-central/logos/husky-icon/white.png\"\r\n                                    width=\"56\"\r\n                                    className=\"d-inline-block align-top\"\r\n                                    alt=\"MTU logo\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Navbar.Brand>\r\n                <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                    <Nav className=\"me-auto\">\r\n                        <Nav.Link onClick={() => dispatch(setPage(Pages.Homepage))}>\r\n                            Home\r\n                        </Nav.Link>\r\n                        <NavDropdown title=\"New Test\" id=\"new-test-drop-down\">\r\n                            <NavDropdown.Item onClick={() => dispatch(setPage(Pages.BaerInitializeView))}>\r\n                                BAER Protocol</NavDropdown.Item>\r\n                            <NavDropdown.Item onClick={() => dispatch(setPage(Pages.StandardInitializeView))}>\r\n                                Standard Protocol</NavDropdown.Item>\r\n                        </NavDropdown>\r\n                        <Nav.Link onClick={() => dispatch(setPage(Pages.ReportsView))}>\r\n                            My Reports\r\n                        </Nav.Link>\r\n                        <NavDropdown title=\"Manuals\" id=\"manuals-drop-down\">\r\n                            <NavDropdown.Divider />\r\n                            <NavDropdown.Item onClick={() => dispatch(setPage(Pages.BaerManual))}>\r\n                                USDA Field Guide\r\n                            </NavDropdown.Item>\r\n                            <NavDropdown.Divider />\r\n                            <NavDropdown.Item onClick={() => dispatch(setPage(Pages.NewBaerManual))}>\r\n                                BAER Article\r\n                            </NavDropdown.Item>\r\n                            <NavDropdown.Divider />\r\n                            <NavDropdown.Item onClick={() => dispatch(setPage(Pages.InfiltrometerManual))}>\r\n                                MiniDisk Manual\r\n                            </NavDropdown.Item>\r\n                            <NavDropdown.Divider />\r\n                        </NavDropdown>\r\n                    </Nav>\r\n                    <Nav>\r\n                        <Nav.Link href=\"https://github.com/2021-SD-UI/Infiltrometer/\">\r\n                            GitHub\r\n                        </Nav.Link>\r\n                    </Nav>\r\n                </Navbar.Collapse>\r\n            </Container>\r\n        </Navbar>\r\n    );\r\n\r\n\r\n}","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { setPage } from \"../page-redirection/redirector-slice\";\r\nimport { Protocols } from \"./protocols\";\r\nimport { removeReport, selectReports, setCurId } from \"./reportsSlice\";\r\nimport { CSVLink } from \"react-csv\";\r\nimport { makeCSVFromGroupOfReports } from \"./reportsDataPackager\";\r\nimport React, { useState } from \"react\";\r\nimport { Container, Row, Col, Form, Button, Table, Alert } from \"react-bootstrap\";\r\nimport { Pages } from \"../page-redirection/Redirector\";\r\nimport { deleteAllPhotos } from \"../photos/albumsSlice\"\r\nimport { selectAlbums } from \"../photos/albumsSlice\";\r\n\r\nconst ReportsTable = () => {\r\n    const [selectedReports, setSelectedReports] = useState({});\r\n    const numberOfSelectedReports = Object.keys(selectedReports).length;\r\n    const reports = useSelector(selectReports);\r\n    const dispatch = useDispatch();\r\n    const reportAlbums = useSelector(selectAlbums);\r\n    // Map the current state to table elements\r\n    function renderTableData() {\r\n        return Object.keys(reports).map(reportID => {\r\n            const report = reports[reportID]\r\n            return (\r\n                <>\r\n                    <tr key={report.id}>\r\n                        <td key={report.id}>\r\n                            <Container className=\"my-2\">\r\n                                <Row>\r\n                                    <Col>\r\n                                        <Form>\r\n                                            <Form.Check\r\n                                                label={formatDate(report.date)}\r\n                                                checked={selectedReports[report.id] !== undefined}\r\n                                                onChange={() => {\r\n                                                    if (selectedReports[report.id] !== undefined) {\r\n                                                        deselectReport(report);\r\n                                                    }\r\n                                                    else {\r\n                                                        selectReport(report);\r\n                                                    }\r\n\r\n                                                }\r\n                                                }\r\n                                            />\r\n                                        </Form>\r\n\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </td>\r\n                        <td>\r\n                            <Container className=\"my-2\">\r\n                                <Row>\r\n                                    {report.protocol}\r\n                                </Row>\r\n                            </Container>\r\n                        </td>\r\n                        <td>\r\n                            <Container className=\"my-2\">\r\n                                <Row>\r\n                                    {report.infiltrometerData.site}\r\n                                </Row>\r\n                            </Container>\r\n                        </td>\r\n                        <td>\r\n                            <Container>\r\n                                <Row>\r\n                                    <Col>\r\n                                        <Button\r\n                                            variant=\"dark\"\r\n                                            className=\"w-100 my-1\"\r\n                                            onClick={() => { showReport(report) }}\r\n                                        >\r\n                                            View\r\n                                        </Button>\r\n                                    </Col>\r\n\r\n                                    <Col>\r\n                                        <Button\r\n                                            variant=\"danger\"\r\n                                            className=\"w-100 my-1\"\r\n                                            onClick={() => { deleteReport(report) }}\r\n                                        >\r\n                                            Delete\r\n                                        </Button>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </td>\r\n                    </tr>\r\n                </>\r\n            )\r\n        })\r\n    }\r\n\r\n    // Removes a report from the selected reports\r\n    function deselectReport(report) {\r\n        var _repo = { ...selectedReports };\r\n        delete _repo[report.id];\r\n        setSelectedReports(_repo);\r\n    }\r\n\r\n    // Deselects and deletes a report\r\n    function deleteReport(report) {\r\n        // Delete the report from selected if it is in selected\r\n        if (selectedReports[report.id] !== undefined) deselectReport(report);\r\n        // Delete all the photos on this report\r\n        dispatch(deleteAllPhotos({ reportId: report.id }));\r\n        // Remove the report from the store\r\n        dispatch(removeReport(report.id))\r\n    }\r\n\r\n    // Deselects and deletes all the currently selected reports\r\n    function deleteAllSelected() {\r\n        let selected = { ...selectedReports };\r\n        let reportKeys = Object.keys(selected);\r\n        for (var i = 0; i < reportKeys.length; i++) {\r\n            deleteReport(selected[reportKeys[i]]);\r\n        }\r\n        unselectAll();\r\n    }\r\n\r\n    // Adds the report to the selected reports\r\n    function selectReport(report) {\r\n        var _repo = { ...selectedReports };\r\n        _repo[report.id] = report;\r\n        setSelectedReports(_repo);\r\n    }\r\n\r\n    // Adds all reports to the selected reports\r\n    function selectAll() {\r\n        let reportKeys = Object.keys(reports);\r\n        var _repo = { ...selectedReports };\r\n        for (var i = 0; i < reportKeys.length; i++) {\r\n            _repo[reportKeys[i]] = reports[reportKeys[i]];\r\n        }\r\n        setSelectedReports(_repo);\r\n    }\r\n\r\n    // Removes all reports from the selected reports\r\n    function unselectAll() {\r\n        let reportKeys = Object.keys(reports);\r\n        var _repo = { ...selectedReports };\r\n        for (var i = 0; i < reportKeys.length; i++) {\r\n            delete _repo[reportKeys[i]];\r\n        }\r\n        setSelectedReports(_repo);\r\n    }\r\n\r\n    // Sets the page to the result view of the current report\r\n    function showReport(report) {\r\n        switch (report.protocol) {\r\n            case Protocols.Baer:\r\n                dispatch(setCurId(report.id));\r\n                dispatch(setPage(Pages.BaerResultsView));\r\n\r\n                break;\r\n            case Protocols.Standard:\r\n                dispatch(setCurId(report.id));\r\n                dispatch(setPage(Pages.StandardResultsView));\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Renders dates for the Reports table\r\n    function formatDate(date) {\r\n        let d = new Date(date);\r\n        if (d.toDateString() === new Date().toDateString()) {\r\n            return \"Today\";\r\n        }\r\n        return (d.toDateString());\r\n    }\r\n\r\n\r\n    // Create header for table\r\n    function renderTableHeader() {\r\n        let header = ['Date', 'Protocol', 'Site', 'Options'];\r\n        return header.map((key, index) => {\r\n            console.log(key.toUpperCase())\r\n            if (key.toLowerCase() === \"site\") {\r\n                return <th class=\"table-dark text-center\" key={index}>Site</th>\r\n            }\r\n            if (key.toLowerCase() === \"date\") {\r\n                return <th class=\"table-dark text-center\" key={index}>Date</th>\r\n            }\r\n            if (key.toLowerCase() === \"protocol\") {\r\n                return <th class=\"table-dark text-center\" key={index}>Protocol</th>\r\n            }\r\n            if (key.toLowerCase() === \"options\") {\r\n                return <th class=\"table-dark text-center\" key={index}>Options</th>\r\n            }\r\n            return null;\r\n        })\r\n    }\r\n\r\n    // Conditional renderer for the download and delete buttons that require selecting\r\n    // If no reports are selected, render disabled buttons. Otherwise, render enabled buttons\r\n    function SelectButtons() {\r\n\r\n        if (numberOfSelectedReports > 0) {\r\n            return (\r\n                <>\r\n                    <Col className=\"m-2 col-6 col-md-3 col-lg-2 text-center\">\r\n                        <Button\r\n                            variant=\"danger\"\r\n                            className=\"w-100\"\r\n                            onClick={() => { deleteAllSelected() }}\r\n                        >\r\n                            Delete ({numberOfSelectedReports})\r\n                        </Button>\r\n                    </Col>\r\n\r\n                    <Col className=\"m-2 col-6 col-md-3 col-lg-2 text-center\">\r\n                        <Button onClick={() => makeCSVFromGroupOfReports(selectedReports, reportAlbums)} variant=\"success\" className=\"w-100\">\r\n                            Download ({numberOfSelectedReports})\r\n                        </Button>\r\n                    </Col>\r\n                </>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <>\r\n                    <Col className=\"m-2 col-6 col-md-3 col-lg-2 text-center\">\r\n                        <Button\r\n                            disabled\r\n                            variant=\"secondary\"\r\n                            className=\"w-100\"\r\n                        >\r\n                            Delete ({numberOfSelectedReports})\r\n                        </Button>\r\n                    </Col>\r\n\r\n                    <Col className=\"m-2 col-6 col-md-3 col-lg-2 text-center\">\r\n                        <Button\r\n                            disabled\r\n                            variant=\"secondary\"\r\n                            className=\"w-100\"\r\n                        >\r\n                            Download ({numberOfSelectedReports})\r\n                        </Button>\r\n                    </Col>\r\n                </>\r\n            );\r\n        }\r\n\r\n\r\n    }\r\n    // Only render the Reports table if there are reports in the first place\r\n    if (Object.keys(reports).length > 0) {\r\n        return (\r\n            <Container className=\"mt-3\">\r\n                <div class=\"rounded border shadow\">\r\n                    <h1 className=\"my-5 display-4\">Reports</h1>\r\n                    <Row className=\"justify-content-center m-2\">\r\n                        <Col className=\"m-2 col-6 col-md-3 col-lg-2 text-center\">\r\n                            <Button\r\n                                variant=\"dark\"\r\n                                className=\"w-100\"\r\n                                onClick={() => { selectAll() }}\r\n                            >\r\n                                Select All\r\n                            </Button>\r\n                        </Col>\r\n                        <Col className=\"m-2 col-6 col-md-3 col-lg-2 text-center\">\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                className=\"w-100\"\r\n                                onClick={() => { unselectAll() }}\r\n                            >\r\n                                Unselect All\r\n                            </Button>\r\n                        </Col>\r\n                        <SelectButtons />\r\n                    </Row>\r\n                    <Row className=\"m-3\">\r\n                        <Col>\r\n                            <Table light striped bordered hover id='students'>\r\n                                <tbody>\r\n                                    <tr>{renderTableHeader()}</tr>\r\n                                    {renderTableData()}\r\n                                </tbody>\r\n                            </Table>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n            </Container>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <Container className=\"mt-3\">\r\n                <div class=\"rounded border shadow\">\r\n                    <Row>\r\n                        <h1 className=\"display-4\">No Saved Reports</h1>\r\n                    </Row>\r\n                    <Row className=\"justify-content-center\">\r\n                        <Alert variant=\"danger w-50\" className=\"text-center\">Click \"New Test\" to start creating a report.</Alert>\r\n                    </Row>\r\n                </div>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\nexport default ReportsTable;","import React from \"react\";\r\nimport { Container, Row, Col, Alert } from \"react-bootstrap\";\r\n\r\nexport function HomePage() {\r\n    return (\r\n        <>\r\n            <Container className=\"mt-4 p-4 rounded border shadow\">\r\n                <h1 className=\"display-4 mb-4\">Mini-Disk Infiltrometer Companion</h1>\r\n                <Row className=\"p-2\">\r\n                    <h3 className=\"display-6\">About The App</h3>\r\n                    <Col>\r\n                        This application was developed by software engineering students at \r\n                        Michigan Technological University, and is meant to be used with the \r\n                        Mini-Disk Infiltrometer to aid in recording soil infiltration data. \r\n                        Gathered data will be stored on your local device upon completing a reading. \r\n                        This data can be downloaded as a CSV for later use. \r\n                        These CSV reports may also be viewed in Excel.\r\n                    </Col>\r\n                </Row>\r\n                <hr />\r\n                <Row className=\"p-2\">\r\n                    <h3 className=\"display-6\">How To Start a Test</h3>\r\n                    <Col>\r\n                        Begin a new test using the desired protocol by clicking \"New Test\" in \r\n                        the navigation bar at the top of the screen. On smaller devices, click \r\n                        the icon with three horizontal lines on the top right to view the navigation \r\n                        bar's contents. Select the protocol you wish to use, and follow the on-screen \r\n                        prompts to fill in the required information. For more information about how to \r\n                        conduct a test, see the \"Manual\" section of the navigation bar at the top of the screen.\r\n                        <br /><br />\r\n                        The app can use your device's GPS to determine your location, but you need \r\n                        to allow it to do so when the protocol page loads.\r\n                    </Col>\r\n                </Row>\r\n                <hr />\r\n                <Row className=\"p-2\">\r\n                    <h3 className=\"display-6\">How To View/Download a Report</h3>\r\n                    <Col>\r\n                        <Alert variant=\"danger\" className=\"text-center\">\r\n                            This app stores reports temporarily in your web browser's local storage. \r\n                            To prevent data from being lost, please download your reports from the \"My Reports\" page.\r\n                        </Alert>\r\n                        All of your saved reports can be found under \"My Reports\" in the navigation bar. \r\n                        A report can be accessed by using the \"View\" button next to a report. A report can \r\n                        be deleted by using the red \"Delete\" button next to a report or by selecting report(s) \r\n                        via the checkbox and using the \"Delete\" button above the table of reports. Report(s) \r\n                        can be downloaded by selecting report(s) via the checkbox and using the \"Download\" button.\r\n                    </Col>\r\n                </Row>\r\n                <hr />\r\n                <Row className=\"p-2\">\r\n                    <h3 className=\"display-6\">More Information</h3>\r\n                    <Col>\r\n                        More information about how to use the Mini-Disk Infiltrometer can be found \r\n                        under \"Manuals\" in the navigation bar.\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        </>);\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Button, Col, Container, Form, Row } from 'react-bootstrap';\r\nimport { Document, Page, pdfjs } from 'react-pdf';\r\n\r\nexport const PdfViewer = ({ pdf }) => {\r\n    pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n    const [numPages, setNumPages] = useState(null);\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n    const previousPage = (event) => {\r\n        event.preventDefault();\r\n        changePage(-1);\r\n    }\r\n    const nextPage = (event) => {\r\n        event.preventDefault();\r\n        changePage(1);\r\n    }\r\n\r\n    function onDocumentLoadSuccess({ numPages }) {\r\n        setNumPages(numPages);\r\n        setPageNumber(1);\r\n    }\r\n\r\n    function changePage(offset) {\r\n        setPageNumber(prevPageNumber => prevPageNumber + offset);\r\n    }\r\n\r\n    function setPDFScale() {\r\n        if (window.screen.width < 450)\r\n            return 0.6;\r\n        else\r\n            return 1;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"mt-4 p-3 rounded border shadow\">\r\n                <h1 className=\"mb-4 display-4\">Manuals</h1>\r\n                <Row>\r\n                    <Col></Col>\r\n                    <Col>\r\n                        <Document\r\n                            className=\"text-center\"\r\n                            file={pdf}\r\n                            onLoadSuccess={onDocumentLoadSuccess}\r\n                        >\r\n                            <Page\r\n                                pageNumber={pageNumber}\r\n                                renderAnnotationLayer={false}\r\n                                renderTextLayer={false}\r\n                                scale={setPDFScale()}\r\n                                loading={\r\n                                    // This prevents the webpage\r\n                                    // from scrolling back to the top\r\n                                    // when you change PDF page numbers\r\n                                    <Page pageNumber={1}></Page>\r\n                                }\r\n                            />\r\n                            <Container className=\"rounded border shadow\">\r\n                                <Row><Form.Label>Page {pageNumber} of {numPages}</Form.Label></Row>\r\n                                <Row className=\"pb-3 text-center\">\r\n                                    <Col>\r\n                                        <Button\r\n                                            variant=\"secondary\"\r\n                                            className=\"w-75\"\r\n                                            disabled={pageNumber <= 1}\r\n                                            onClick={previousPage}\r\n                                        >\r\n                                            Previous\r\n                                        </Button>\r\n                                    </Col>\r\n                                    <Col>\r\n                                        <Button\r\n                                            variant=\"dark\"\r\n                                            className=\"w-75\"\r\n                                            disabled={pageNumber >= numPages}\r\n                                            onClick={nextPage}\r\n                                        >\r\n                                            Next\r\n                                        </Button>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </Document>\r\n                    </Col>\r\n                    <Col></Col>\r\n                </Row>\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/MiniDiskManual.606fae66.pdf\";","export default __webpack_public_path__ + \"static/media/Field-Guide.31fa5636.pdf\";","export default __webpack_public_path__ + \"static/media/New-Baer-Article.a9da2a5e.pdf\";","\r\nimport React from 'react';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectCurId, selectReports } from \"../../reports/reportsSlice\";\r\nimport { setPage } from '../../page-redirection/redirector-slice';\r\nimport { CSVLink } from \"react-csv\";\r\nimport { makeCSV } from \"../../reports/reportsDataPackager\";\r\nimport { Button, Col, Row } from 'react-bootstrap';\r\nimport { Pages } from '../../page-redirection/Redirector';\r\nimport { Protocols } from '../../reports/protocols';\r\nimport { selectAlbums } from '../../photos/albumsSlice';\r\n\r\nexport const ResultsViewButtons = ({ protocol }) => {\r\n    const reports = useSelector(selectReports);\r\n    const curReport = reports[useSelector(selectCurId)];\r\n    const dispatch = useDispatch();\r\n    const reportAlbums = useSelector(selectAlbums);\r\n    return (\r\n        <>\r\n            <hr />\r\n            < Row className=\"text-center\" >\r\n                <Col>\r\n                    <Button\r\n                        variant=\"dark\"\r\n                        className=\"w-50\"\r\n                        size=\"lg\"\r\n                        onClick={() => {\r\n                            if (protocol === Protocols.Standard) {\r\n                                dispatch(setPage(Pages.StandardInitializeView));\r\n                            }\r\n                            else if (protocol === Protocols.Baer) {\r\n                                dispatch(setPage(Pages.BaerInitializeView));\r\n                            }\r\n\r\n                        }}\r\n                    >\r\n                        New Test\r\n                    </Button>\r\n                </Col>\r\n            </Row >\r\n            <Row className=\"my-2 text-center\">\r\n                <Col>\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        className=\"w-50\"\r\n                        size=\"lg\"\r\n                        onClick={() => dispatch(setPage(Pages.ReportsView))}\r\n                    >\r\n                        Reports\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n            <Row className=\"text-center\">\r\n                <Col>\r\n                    <Button variant=\"success\" size=\"lg\" className=\"w-50\" onClick={() => { makeCSV(curReport, reportAlbums) }}>\r\n                        Download Report\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n        </>\r\n    );\r\n}","\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Col, Form, Row } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport { selectNotes, setNotes } from \"../../reports/reportsSlice\";\r\nexport const ResultsViewNotes = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const [notes, setState] = useState(useSelector(selectNotes));\r\n    const changeNotes = (event) => {\r\n        dispatch(setNotes(event));\r\n        setState(event);\r\n    }\r\n    useEffect(() => setState(notes), [notes]);\r\n    return (\r\n        <>\r\n            <Row className=\"justify-content-center\">\r\n                <Col xs={11}>\r\n                    <Form.Label as=\"h4\">Notes</Form.Label>\r\n                    <TextareaAutosize className=\"w-100\" value={notes} onChange={(e) => changeNotes(e.target.value)} />\r\n                </Col>\r\n            </Row>\r\n            <hr/>\r\n        </>\r\n    );\r\n}","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { soilTypes } from \"../../../app/soilTypes\";\r\nimport { selectCurId, selectReports } from \"../../reports/reportsSlice\";\r\nimport { Button, Col, Container, Dropdown, DropdownButton, Form, Row } from 'react-bootstrap';\r\nimport { setCurInfiltrometerData } from \"../../reports/reportsSlice\";\r\nimport { useEffect } from \"react\";\r\nimport { infiltrometerTypes } from \"../../../app/infiltrometerType\";\r\nimport { selectInfiltrometerData } from \"../../reused-components/reused-slices/initializeSlice\";\r\n\r\nconst ConductivityForm = () => {\r\n\r\n\r\n    const curInfiltrometerData = useSelector(selectInfiltrometerData);\r\n    const dispatch = useDispatch();\r\n    const reports = useSelector(selectReports);\r\n    const curReport = reports[useSelector(selectCurId)];\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        // Get the current data\r\n        let infilData = { ...curReport.infiltrometerData };\r\n        let nh0 = document.getElementById(\"nh0\");\r\n        let alpha = document.getElementById(\"alpha\");\r\n        let radius = document.getElementById(\"radius\");\r\n\r\n        // Update it\r\n        infilData.infiltrometerRadius = radius.value;\r\n        infilData.soilType = { nh0: nh0.value, alpha: alpha.value };\r\n\r\n        // Send to store\r\n        dispatch(setCurInfiltrometerData(infilData));\r\n    }\r\n\r\n    function setSoilPreset(event) {\r\n        let nh0 = document.getElementById(\"nh0\");\r\n        let alpha = document.getElementById(\"alpha\");\r\n        nh0.value = event.nh0;\r\n        alpha.value = event.alpha;\r\n    }\r\n\r\n    function setRadiusPreset(event) {\r\n        let radius = document.getElementById(\"radius\");\r\n        radius.value = event;\r\n    }\r\n\r\n    // Automatically update soil and radius input values\r\n    // to match the current report data\r\n    useEffect(() => {\r\n        setSoilPreset(curReport.infiltrometerData.soilType);\r\n        setRadiusPreset(curReport.infiltrometerData.infiltrometerRadius);\r\n    }, [curReport.infiltrometerData.soilType, curReport.infiltrometerData.infiltrometerRadius])\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"p-3 rounded border shadow\">\r\n                <Form noValidate validated onSubmit={handleSubmit}>\r\n                    <Row>\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"display-6\">Soil Type</Form.Label>\r\n                                <DropdownButton variant=\"dark\" title=\"Preset Soil Types\">\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sand)}> Sand </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.loamySand)}> Loamy Sand </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sandyLoam)}> Sandy Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.loam)}> Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.silt)}> Silt </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.siltLoam)}> Silt Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sandyClayLoam)}> Sandy Clay Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.clayLoam)}> Clay Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.siltyClayLoam)}> Silty Clay Loam </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.sandyClay)}> Sandy Clay </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.siltyClay)}> Silty Clay </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.clay)}> Clay </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setSoilPreset(soilTypes.undefined)}> Unknown </Dropdown.Item>\r\n                                </DropdownButton>\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label>N/H0</Form.Label>\r\n                                <Form.Control\r\n                                    required\r\n                                    id=\"nh0\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    defaultValue={curInfiltrometerData.soilType.nh0}\r\n                                    placeholder=\"N/H0\"\r\n                                />\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Label>Alpha</Form.Label>\r\n                                <Form.Control\r\n                                    required\r\n                                    id=\"alpha\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    defaultValue={curInfiltrometerData.soilType.alpha}\r\n                                    placeholder=\"Alpha\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <Form.Group>\r\n                                <Form.Label className=\"pt-3 display-6\">Radius (cm)</Form.Label>\r\n                                <DropdownButton variant=\"dark\" title=\"Preset Infiltrometer Types\">\r\n                                    <Dropdown.Item onClick={() => setRadiusPreset(infiltrometerTypes.MiniDisk.radius)}>\r\n                                        {infiltrometerTypes.MiniDisk.displayName}\r\n                                    </Dropdown.Item>\r\n                                    <Dropdown.Item onClick={() => setRadiusPreset(infiltrometerTypes.MiniDiskV1.radius)}>\r\n                                        {infiltrometerTypes.MiniDiskV1.displayName}\r\n                                    </Dropdown.Item>\r\n                                </DropdownButton>\r\n                                <div className=\"pt-2\" />\r\n                                <Form.Control\r\n                                    required\r\n                                    id=\"radius\"\r\n                                    type=\"number\"\r\n                                    step=\"any\"\r\n                                    size=\"lg\"\r\n                                    min=\"0\"\r\n                                    defaultValue={curInfiltrometerData.infiltrometerRadius}\r\n                                    placeholder=\"Radius (cm)\"\r\n                                />\r\n                                <Form.Control.Feedback type=\"invalid\">\r\n                                    Required!\r\n                                </Form.Control.Feedback>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"mt-4\">\r\n                        <Col>\r\n                            <Button type=\"submit\" variant=\"dark\" size=\"lg\" className=\"w-100\">Graph and Calculate Conductivity</Button>\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\nexport default ConductivityForm;","// const DEFAULT_OPTIONS = { order: 2, precision: 2, period: null };\r\n\r\n/**\r\n* Determine the coefficient of determination (r^2) of a fit from the observations\r\n* and predictions.\r\n*\r\n* @param {Array<Array<number>>} data - Pairs of observed x-y values\r\n* @param {Array<Array<number>>} results - Pairs of observed predicted x-y values\r\n*\r\n* @return {number} - The r^2 value, or NaN if one cannot be calculated.\r\n*/\r\nfunction determinationCoefficient(data, results) {\r\n  const predictions = [];\r\n  const observations = [];\r\n\r\n  data.forEach((d, i) => {\r\n    if (d[1] !== null) {\r\n      observations.push(d);\r\n      predictions.push(results[i]);\r\n    }\r\n  });\r\n\r\n  const sum = observations.reduce((a, observation) => a + observation[1], 0);\r\n  const mean = sum / observations.length;\r\n\r\n  const ssyy = observations.reduce((a, observation) => {\r\n    const difference = observation[1] - mean;\r\n    return a + (difference * difference);\r\n  }, 0);\r\n\r\n  const sse = observations.reduce((accum, observation, index) => {\r\n    const prediction = predictions[index];\r\n    const residual = observation[1] - prediction[1];\r\n    return accum + (residual * residual);\r\n  }, 0);\r\n\r\n  return 1 - (sse / ssyy);\r\n}\r\n\r\n/**\r\n* Determine the solution of a system of linear equations A * x = b using\r\n* Gaussian elimination.\r\n*\r\n* @param {Array<Array<number>>} input - A 2-d matrix of data in row-major form [ A | b ]\r\n* @param {number} order - How many degrees to solve for\r\n*\r\n* @return {Array<number>} - Vector of normalized solution coefficients matrix (x)\r\n*/\r\nfunction gaussianElimination(input, order) {\r\n  const matrix = input;\r\n  const n = input.length - 1;\r\n  const coefficients = [order];\r\n\r\n  for (let i = 0; i < n; i++) {\r\n    let maxrow = i;\r\n    for (let j = i + 1; j < n; j++) {\r\n      if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][maxrow])) {\r\n        maxrow = j;\r\n      }\r\n    }\r\n\r\n    for (let k = i; k < n + 1; k++) {\r\n      const tmp = matrix[k][i];\r\n      matrix[k][i] = matrix[k][maxrow];\r\n      matrix[k][maxrow] = tmp;\r\n    }\r\n\r\n    for (let j = i + 1; j < n; j++) {\r\n      for (let k = n; k >= i; k--) {\r\n        matrix[k][j] -= (matrix[k][i] * matrix[i][j]) / matrix[i][i];\r\n      }\r\n    }\r\n  }\r\n\r\n  for (let j = n - 1; j >= 0; j--) {\r\n    let total = 0;\r\n    for (let k = j + 1; k < n; k++) {\r\n      total += matrix[k][j] * coefficients[k];\r\n    }\r\n\r\n    coefficients[j] = (matrix[n][j] - total) / matrix[j][j];\r\n  }\r\n\r\n  return coefficients;\r\n}\r\n\r\n/**\r\n* Round a number to a precision, specificed in number of decimal places\r\n*\r\n* @param {number} number - The number to round\r\n* @param {number} precision - The number of decimal places to round to:\r\n*                             > 0 means decimals, < 0 means powers of 10\r\n*\r\n*\r\n* @return {numbr} - The number, rounded\r\n*/\r\nfunction round(number, precision) {\r\n  const factor = 10 ** precision;\r\n  return Math.round(number * factor) / factor;\r\n}\r\n\r\n/**\r\n* The set of all fitting methods\r\n*\r\n* @namespace\r\n*/\r\nexport const methods = {\r\n  linear(data, options) {\r\n    const sum = [0, 0, 0, 0, 0];\r\n    let len = 0;\r\n\r\n    for (let n = 0; n < data.length; n++) {\r\n      if (data[n][1] !== null) {\r\n        len++;\r\n        sum[0] += data[n][0];\r\n        sum[1] += data[n][1];\r\n        sum[2] += data[n][0] * data[n][0];\r\n        sum[3] += data[n][0] * data[n][1];\r\n        sum[4] += data[n][1] * data[n][1];\r\n      }\r\n    }\r\n\r\n    const run = ((len * sum[2]) - (sum[0] * sum[0]));\r\n    const rise = ((len * sum[3]) - (sum[0] * sum[1]));\r\n    const gradient = run === 0 ? 0 : round(rise / run, options.precision);\r\n    const intercept = round((sum[1] / len) - ((gradient * sum[0]) / len), options.precision);\r\n\r\n    const predict = x => ([\r\n      round(x, options.precision),\r\n      round((gradient * x) + intercept, options.precision)]\r\n    );\r\n\r\n    const points = data.map(point => predict(point[0]));\r\n\r\n    return {\r\n      points,\r\n      predict,\r\n      equation: [gradient, intercept],\r\n      r2: round(determinationCoefficient(data, points), options.precision),\r\n      string: intercept === 0 ? `y = ${gradient}x` : `y = ${gradient}x + ${intercept}`,\r\n    };\r\n  },\r\n\r\n  exponential(data, options) {\r\n    const sum = [0, 0, 0, 0, 0, 0];\r\n\r\n    for (let n = 0; n < data.length; n++) {\r\n      if (data[n][1] !== null) {\r\n        sum[0] += data[n][0];\r\n        sum[1] += data[n][1];\r\n        sum[2] += data[n][0] * data[n][0] * data[n][1];\r\n        sum[3] += data[n][1] * Math.log(data[n][1]);\r\n        sum[4] += data[n][0] * data[n][1] * Math.log(data[n][1]);\r\n        sum[5] += data[n][0] * data[n][1];\r\n      }\r\n    }\r\n\r\n    const denominator = ((sum[1] * sum[2]) - (sum[5] * sum[5]));\r\n    const a = Math.exp(((sum[2] * sum[3]) - (sum[5] * sum[4])) / denominator);\r\n    const b = ((sum[1] * sum[4]) - (sum[5] * sum[3])) / denominator;\r\n    const coeffA = round(a, options.precision);\r\n    const coeffB = round(b, options.precision);\r\n    const predict = x => ([\r\n      round(x, options.precision),\r\n      round(coeffA * Math.exp(coeffB * x), options.precision),\r\n    ]);\r\n\r\n    const points = data.map(point => predict(point[0]));\r\n\r\n    return {\r\n      points,\r\n      predict,\r\n      equation: [coeffA, coeffB],\r\n      string: `y = ${coeffA}e^(${coeffB}x)`,\r\n      r2: round(determinationCoefficient(data, points), options.precision),\r\n    };\r\n  },\r\n\r\n  logarithmic(data, options) {\r\n    const sum = [0, 0, 0, 0];\r\n    const len = data.length;\r\n\r\n    for (let n = 0; n < len; n++) {\r\n      if (data[n][1] !== null) {\r\n        sum[0] += Math.log(data[n][0]);\r\n        sum[1] += data[n][1] * Math.log(data[n][0]);\r\n        sum[2] += data[n][1];\r\n        sum[3] += (Math.log(data[n][0]) ** 2);\r\n      }\r\n    }\r\n\r\n    const a = ((len * sum[1]) - (sum[2] * sum[0])) / ((len * sum[3]) - (sum[0] * sum[0]));\r\n    const coeffB = round(a, options.precision);\r\n    const coeffA = round((sum[2] - (coeffB * sum[0])) / len, options.precision);\r\n\r\n    const predict = x => ([\r\n      round(x, options.precision),\r\n      round(round(coeffA + (coeffB * Math.log(x)), options.precision), options.precision),\r\n    ]);\r\n\r\n    const points = data.map(point => predict(point[0]));\r\n\r\n    return {\r\n      points,\r\n      predict,\r\n      equation: [coeffA, coeffB],\r\n      string: `y = ${coeffA} + ${coeffB} ln(x)`,\r\n      r2: round(determinationCoefficient(data, points), options.precision),\r\n    };\r\n  },\r\n\r\n  power(data, options) {\r\n    const sum = [0, 0, 0, 0, 0];\r\n    const len = data.length;\r\n\r\n    for (let n = 0; n < len; n++) {\r\n      if (data[n][1] !== null) {\r\n        sum[0] += Math.log(data[n][0]);\r\n        sum[1] += Math.log(data[n][1]) * Math.log(data[n][0]);\r\n        sum[2] += Math.log(data[n][1]);\r\n        sum[3] += (Math.log(data[n][0]) ** 2);\r\n      }\r\n    }\r\n\r\n    const b = ((len * sum[1]) - (sum[0] * sum[2])) / ((len * sum[3]) - (sum[0] ** 2));\r\n    const a = ((sum[2] - (b * sum[0])) / len);\r\n    const coeffA = round(Math.exp(a), options.precision);\r\n    const coeffB = round(b, options.precision);\r\n\r\n    const predict = x => ([\r\n      round(x, options.precision),\r\n      round(round(coeffA * (x ** coeffB), options.precision), options.precision),\r\n    ]);\r\n\r\n    const points = data.map(point => predict(point[0]));\r\n\r\n    return {\r\n      points,\r\n      predict,\r\n      equation: [coeffA, coeffB],\r\n      string: `y = ${coeffA}x^${coeffB}`,\r\n      r2: round(determinationCoefficient(data, points), options.precision),\r\n    };\r\n  },\r\n\r\n  polynomial(data, options) {\r\n    const lhs = [];\r\n    const rhs = [];\r\n    let a = 0;\r\n    let b = 0;\r\n\r\n    const len = data.length;\r\n    const k = options.order + 1;\r\n\r\n    for (let i = 1; i < k; i++) {\r\n      for (let l = 0; l < len; l++) {\r\n        if (data[l][1] !== null) {\r\n          a += (data[l][0] ** i) * data[l][1];\r\n        }\r\n      }\r\n\r\n      lhs.push(a);\r\n      a = 0;\r\n\r\n      const c = [];\r\n      for (let j = 1; j < k; j++) {\r\n        for (let l = 0; l < len; l++) {\r\n          if (data[l][1] !== null) {\r\n            b += data[l][0] ** (i + j);\r\n          }\r\n        }\r\n        c.push(b);\r\n        b = 0;\r\n      }\r\n      rhs.push(c);\r\n    }\r\n    rhs.push(lhs);\r\n\r\n    const coefficients = [0,...gaussianElimination(rhs, k).map(v => round(v, options.precision))];\r\n    const predict = x => ([\r\n      round(x, options.precision),\r\n      round(\r\n        coefficients.reduce((sum, coeff, power) => sum + (coeff * (x ** power)), 0),\r\n        options.precision,\r\n      ),\r\n    ]);\r\n\r\n    const points = data.map(point => predict(point[0]));\r\n\r\n    let string = 'y = ';\r\n    for (let i = coefficients.length - 1; i >= 0; i--) {\r\n      if (i > 1) {\r\n        string += `${coefficients[i]}x^${i} + `;\r\n      } else if (i === 1) {\r\n        string += `${coefficients[i]}x + `;\r\n      } else {\r\n        string += coefficients[i];\r\n      }\r\n    }\r\n\r\n    return {\r\n      string,\r\n      points,\r\n      predict,\r\n      equation: [...coefficients].reverse(),\r\n      r2: round(determinationCoefficient(data, points), options.precision),\r\n    };\r\n  },\r\n};\r\n\r\n// function createWrapper() {\r\n//   const reduce = (accumulator, name) => ({\r\n//     _round: round,\r\n//     ...accumulator,\r\n//     [name](data, supplied) {\r\n//       return methods[name](data, {\r\n//         ...DEFAULT_OPTIONS,\r\n//         ...supplied,\r\n//       });\r\n//     },\r\n//   });\r\n\r\n//   return Object.keys(methods).reduce(reduce, {});\r\n// }\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectCurId, selectReports, setCurInfiltrometerData } from \"../../reports/reportsSlice\";\r\nimport LineChart from 'react-linechart';\r\nimport { methods } from \"../../regression/regression-js\";\r\nimport '../../../../node_modules/react-linechart/dist/styles.css';\r\nimport React, { useMemo } from \"react\";\r\nimport { Container, Row, Col, Table } from \"react-bootstrap\";\r\nimport { selectInitialVolume } from \"../../reused-components/reused-slices/initializeSlice\";\r\nconst ConductivityGraph = () => {\r\n\r\n    const reports = useSelector(selectReports);\r\n    const curReport = reports[useSelector(selectCurId)];\r\n    const soilType = curReport.infiltrometerData.soilType;\r\n    const initialVolume = Number(useSelector(selectInitialVolume));\r\n\r\n\r\n\r\n    //For Conductivity Calcuations ///////////////////////////\r\n    //THIS IS WHAT IFILTROMETER DATA LOOKS LIKE:\r\n    /*\r\n    infiltrometerData = {\r\n        initialVolume: volume,\r\n        coordinates: { lat: Number(lat), lon: Number(lon) },\r\n        soilType: { nh0: nh0, alpha: alpha },\r\n        infiltrometerRadius: radius,\r\n        timeInterval: timeInterval,\r\n        infiltrometerSuction: suction,\r\n        site,\r\n        observation,\r\n        C1,\r\n        C2,\r\n        K\r\n    }*/\r\n    const dispatch = useDispatch();\r\n    const N = soilType.nh0;\r\n    const h = curReport.infiltrometerData.infiltrometerSuction;\r\n    const alpha = soilType.alpha\r\n    const radius = curReport.infiltrometerData.infiltrometerRadius;\r\n    const C1 = curReport.infiltrometerData.C1;\r\n    const C2 = curReport.infiltrometerData.C2;\r\n    const A = () => {\r\n        if (N >= 1.9) {\r\n            return [11.65 * (Math.pow(N, 0.1) - 1) * Math.exp(2.92 * (N - 1.9) * alpha * h)] / [Math.pow(alpha * radius, 0.91)];\r\n        }\r\n        // N < 1.9\r\n        return [11.65 * (Math.pow(N, 0.1) - 1) * Math.exp(7.5 * (N - 1.9) * alpha * h)] / [Math.pow(alpha * radius, 0.91)];\r\n    }\r\n    const K = curReport.infiltrometerData.K;\r\n    ////////////////////////////////////////////////////////////\r\n\r\n    // Will give you the format:\r\n    // [{x,y}, {x,y}, ... ]\r\n    // to be used in regression\r\n    function readingsArray() {\r\n\r\n        if (curReport.readings.length <= 1) { return []; }\r\n\r\n        let points = [];\r\n        //sort the readings by time\r\n\r\n        curReport.readings.forEach(r => {\r\n            let point = { x: Math.sqrt(Number(r.secondsElapsed)), y: ((initialVolume - Number(r.volume)) / (Math.PI * Math.pow(radius, 2))) };\r\n            points.push(point);\r\n        });\r\n        return points;\r\n    }\r\n\r\n    function interpolatedPoints(end, steps) {\r\n        //get the equation\r\n        let points = [];\r\n        curReport.readings.forEach(r => {\r\n            let point = [Math.sqrt(Number(r.secondsElapsed)), ((initialVolume - Number(r.volume)) / (Math.PI * Math.pow(radius, 2)))];\r\n            points.push(point);\r\n        });\r\n\r\n        let result = methods.polynomial(points, { order: 2, precision: 15 });\r\n\r\n        //update constants in the store\r\n        dispatch(setCurInfiltrometerData(\r\n            {\r\n                ...curReport.infiltrometerData,\r\n                C1: result.equation[1],\r\n                C2: result.equation[0],\r\n                K: Number(result.equation[0] / A()),\r\n                A: A()\r\n            }));\r\n        //predict is the polynomial equation\r\n        const predict = (x) => (result.equation[0] * x * x) + (result.equation[1] * x);\r\n\r\n        let intPoints = [];\r\n        for (let i = 0; i <= end; i += (end / steps)) {\r\n            intPoints.push({ x: i, y: predict(i) });\r\n        }\r\n        return intPoints;\r\n    }\r\n\r\n\r\n\r\n    const data = useMemo(() =>\r\n\r\n        [\r\n            {\r\n                id: \"1\",\r\n                name: \"Interpolated\",\r\n                color: \"red\",\r\n                points: readingsArray().length >= 1 ? interpolatedPoints(readingsArray()[readingsArray().length - 1].x, 100) : null\r\n            },\r\n            {\r\n\r\n                id: \"0\",\r\n                name: \"Actual Data\",\r\n                color: \"Blue\",\r\n                points: readingsArray(),\r\n                interpolate: \"none\"\r\n            }\r\n\r\n        ]\r\n        , [radius, soilType]);\r\n\r\n\r\n    // The graph must be given data, even if its empty.\r\n    const noData = [\r\n        {\r\n            color: \"steelblue\",\r\n            points: [{ x: 0, y: 0 }],\r\n            interpolate: \"none\"\r\n        }\r\n    ];\r\n\r\n    // Calculations require radius, so if radius is\r\n    // null then don't render the graph.\r\n    const Graph = () => {\r\n        if (!radius || curReport.readings.length <= 1) {\r\n            return (\r\n                <LineChart\r\n                    width={380}\r\n                    height={400}\r\n                    xLabel=\"No data to show\"\r\n                    yLabel=\"\"\r\n                    data={noData}\r\n                />\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <LineChart\r\n                    showLegends=\"true\"\r\n                    width={380}\r\n                    height={400}\r\n                    xLabel=\"Square Root of Time (s)\"\r\n                    yLabel=\"Cumulative Infiltration (cm)\"\r\n                    data={data}\r\n                    hideLines={false}\r\n                    hidePoints={false}\r\n                />\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"text-center my-4\">\r\n                <Graph />\r\n                {\r\n                    C1 && C2 && K &&\r\n                    <Row className=\"mt-4\">\r\n                        <Col>\r\n                            <Table className=\"table table-striped table-hover\">\r\n                                <thead>\r\n                                    <tr class=\"table-dark\">\r\n                                        <th>\r\n                                            C1 (cm/s^())\r\n                                        </th>\r\n                                        <th>\r\n                                            C2 (cm/s)\r\n                                        </th>\r\n                                        <th>\r\n                                            K (cm/s)\r\n                                        </th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        < td>\r\n                                            {`${Number.parseFloat(C1).toExponential(4)}`}\r\n                                        </td>\r\n                                        < td>\r\n                                            {`${Number.parseFloat(C2).toExponential(4)}`}\r\n                                        </td>\r\n                                        < td>\r\n                                            {`${Number.parseFloat(K).toExponential(4)}`}\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </Table>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                }\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\nexport default ConductivityGraph;","import { useEffect, useState } from 'react';\r\nimport { Card, Button, Spinner, } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { getPhotoFromID, deletePhoto } from './albumsSlice'\r\n\r\nexport const PhotoCard = ({ index, fullID, reportId }) => {\r\n    let [data, setData] = useState(null);\r\n    let dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        setData(null)\r\n        getPhotoFromID(fullID).then((d) => { setData(d) });\r\n    }, [fullID]);\r\n\r\n    return (\r\n        <Card className=\"mt-4\">\r\n            <Card.Img className=\"mt-2\" variant=\"top\" src={data} />\r\n            <Card.Body className=\"align-content-right\">\r\n                {data === null ? <Card.Text><Spinner animation=\"border\" /></Card.Text> : null}\r\n                <Button variant=\"outline-danger\" size=\"lg\" className=\"w-100\" onClick={() => {\r\n                    dispatch(deletePhoto({ reportId, photoIndex: index }));\r\n                }\r\n                }>Delete</Button>\r\n            </Card.Body>\r\n        </Card >\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Alert, Container, Row, Col, CardGroup } from 'react-bootstrap';\r\nimport { selectCurId, selectReports } from \"../../reports/reportsSlice\";\r\nimport { addPhoto, deleteAllPhotos, selectAlbums } from '../../photos/albumsSlice';\r\nimport { PhotoCard } from '../../photos/PhotoCard'\r\nimport { downloadAllImages, fetchAllImages } from '../../reports/reportsDataPackager';\r\nexport const ResultsViewPhotos = (props) => {\r\n    const dispatch = useDispatch();\r\n    const reportId = useSelector(selectCurId);\r\n    const curReportAlbum = useSelector(selectAlbums)[reportId];\r\n    const hasPhotos = curReportAlbum !== null && curReportAlbum !== undefined && curReportAlbum.length > 0;\r\n\r\n    function handleFile(e) {\r\n        if (e.target.files[0] === undefined) return;\r\n\r\n        let url = URL.createObjectURL(e.target.files[0]);\r\n        let xhRequest = new XMLHttpRequest();\r\n\r\n        xhRequest.onload = function () {\r\n            let reader = new FileReader();\r\n            reader.onloadend = function () {\r\n                dispatch(addPhoto({ reportId, thumbnailData: \"WIP\", fullImageData: reader.result }));\r\n            }\r\n            reader.readAsDataURL(xhRequest.response);\r\n        };\r\n        xhRequest.open('GET', url);\r\n        xhRequest.responseType = 'blob';\r\n        xhRequest.send();\r\n    }\r\n\r\n    const openPhotoUpload = () => {\r\n        document.getElementById(\"photoInput\").click();\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex justify-content-center\">\r\n                <CardGroup>\r\n                    <Row>\r\n                        {!hasPhotos ? <Alert className=\"mt-2\" variant=\"secondary\"> No Photos </Alert>\r\n                            : curReportAlbum.map((photo, index) =>\r\n                                <PhotoCard\r\n                                    index={index}\r\n                                    fullID={photo.full}\r\n                                    reportId={reportId}\r\n                                />\r\n\r\n                            )\r\n                        }\r\n                    </Row>\r\n                </CardGroup>\r\n            </Container>\r\n\r\n            <Container className=\"text-center\">\r\n                <Row>\r\n                    <Col>\r\n                        <svg className=\"svg-add-photo\" onClick={openPhotoUpload}>\r\n                            <g\r\n                                transform=\"translate(100.000000, 95.000000) scale(0.01000, -0.010000)\">\r\n                                <path d=\"M4493.4,4986.4c-540.8-55.2-1136.9-227.8-1647.8-478.7C1846.7,4017.5,1091.9,3262.6,604,2268.4C-578.9-143.5,390-3043.3,2783.4-4258.4C5197.6-5485,8141.1-4520.8,9367.8-2104.3c962,1891.8,596.1,4179.4-904.4,5677.6C7425.4,4613.5,5961.7,5133.7,4493.4,4986.4z M7743,2551.5l75.9-66.7V1175.2V-132l-269.3-6.9l-271.6-6.9v1107v1104.7H4999.7H2721.3V546.9V-974.3l131.2,6.9l131.2,6.9l520.1,810.1c285.4,446.5,522.4,810.1,529.3,810.1s244-363.6,529.3-810.1l517.8-810.1l147.3-6.9c119.7-4.6,145,0,133.5,25.3c-6.9,18.4-117.4,195.6-246.3,395.8l-232.4,361.3l156.5,239.3c85.2,133.5,158.8,246.3,165.7,248.6c6.9,4.6,197.9-280.8,423.4-632.9l412-642.1h158.8h158.8l4.6-568.4l6.9-570.8l386.6-6.9l384.3-4.6v-138.1v-138.1H4735H2330l-73.6,66.7l-75.9,66.7V109.7v2375.1l75.9,66.7l73.6,66.7h2669.6h2669.6L7743,2551.5z M6613,1483.6c151.9-80.6,234.7-214,246.3-393.5c6.9-112.8,0-163.4-36.8-234.7c-195.6-379.7-706.5-377.4-881.4,2.3c-108.2,234.8-2.3,510.9,243.9,639.8C6290.8,1555,6491,1545.8,6613,1483.6z M8014.5-856.9v-391.2h379.7H8774v-264.7v-264.7h-379.7h-379.7v-379.7v-379.7h-276.2h-276.2v379.7v379.7h-379.7h-379.7v264.7v264.7h379.7h379.7V-873c0,207.1,6.9,384.3,16.1,391.2c6.9,9.2,131.2,16.1,276.2,16.1h260.1V-856.9z\" />\r\n                            </g>\r\n                        </svg>\r\n                        <input hidden type=\"file\" accept=\"image/*\" id=\"photoInput\" onChange={handleFile} />\r\n                        <h4>Add Photo</h4>\r\n                    </Col>\r\n                    {hasPhotos ?\r\n                        <Col>\r\n                            <svg className=\"svg-delete-photo\" onClick={() => { dispatch(deleteAllPhotos({ reportId })); }}>\r\n                                <g\r\n                                    transform=\"translate(100.000000, 145.000000) scale(0.1000, -0.10000)\">\r\n                                    <path d=\"M500,10C230.5,10,10,230.5,10,500s220.5,490,490,490s490-220.5,490-490S769.5,10,500,10z M726.6,622.5c24.5,24.5,24.5,73.5,0,98c-12.3,12.3-30.6,18.4-49,18.4s-36.8-6.1-49-18.4L506.1,598L383.6,720.5c-24.5,18.4-42.9,24.5-61.3,24.5c-18.4,0-36.8-6.1-49-18.4c-24.5-24.5-24.5-73.5,0-98l122.5-122.5L273.4,383.6c-24.5-24.5-24.5-73.5,0-98s73.5-24.5,98,0l122.5,122.5l122.5-122.5c24.5-24.5,73.5-24.5,98,0s24.5,73.5,0,98L591.9,506.1L726.6,622.5z\" />\r\n                                </g>\r\n                            </svg>\r\n                            <h4>Delete All Photos</h4>\r\n                        </Col> : null\r\n                    }\r\n                </Row>\r\n            </Container>\r\n        </>\r\n    )\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","//The Page we are displaying for the baer Initialize view\r\nimport React, { useState } from 'react';\r\nimport { Col, Container, Row, Alert } from 'react-bootstrap';\r\nimport Table from '../../baer/baer-results/table';\r\nimport { Protocols } from '../../reports/protocols';\r\nimport { ResultsViewButtons } from '../../reused-components/results-views/ResultsViewButtons';\r\nimport { ResultsViewNotes } from '../../reused-components/results-views/ResultsViewNotes';\r\nimport ConductivityForm from './ConductivityForm';\r\nimport ConductivityGraph from './ConductivityGraph';\r\nimport { ResultsViewPhotos } from '../../reused-components/results-views/ResultsViewPhotos';\r\n\r\nconst StandardResultsView = () => {\r\n  const [show, setShow] = useState(true);\r\n\r\n  return (\r\n    <Container className=\"mt-4 p-3 rounded border shadow\">\r\n      <h1 className=\"mb-4 display-4\">Results</h1>\r\n      <Row>\r\n        <Col>\r\n          <Table protocol={Protocols.Standard} editable>{/* This table is rendered from table.js */}</Table>\r\n        </Col>\r\n      </Row>\r\n      <Container>\r\n        <Row className=\"justify-content-center\">\r\n          <Col>\r\n            <Alert show={show} onClose={() => setShow(false)} variant=\"info\" dismissible className=\"text-center\">Need to change volume data? Tap corrosponding table entries to edit.</Alert>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n      <ConductivityForm />\r\n      <ConductivityGraph />\r\n      <ResultsViewNotes />\r\n      <ResultsViewPhotos />\r\n      <ResultsViewButtons protocol={Protocols.Standard} />\r\n    </Container>\r\n  );\r\n}\r\nexport default StandardResultsView;","//The Page we are displaying for the standard Initialize view\r\n\r\nimport { Protocols } from '../../reports/protocols'\r\nimport InitializeView from '../../reused-components/initialize-views/InitializeView';\r\n\r\nconst StandardInitializeView = () => {\r\n  return <InitializeView protocol={Protocols.Standard} />\r\n}\r\nexport default StandardInitializeView;","//The Page we are displaying for the baer Initialize view\r\nimport React, { useState } from 'react';\r\nimport { Alert, Col, Container, Row } from 'react-bootstrap';\r\nimport { Protocols } from '../../reports/protocols';\r\nimport { ResultsViewButtons } from '../../reused-components/results-views/ResultsViewButtons';\r\nimport { ResultsViewNotes } from '../../reused-components/results-views/ResultsViewNotes';\r\nimport { ResultsViewPhotos } from '../../reused-components/results-views/ResultsViewPhotos';\r\nimport Table from \"./table\";\r\n\r\nconst BaerResultsView = () => {\r\n  const [show, setShow] = useState(true);\r\n\r\n  return (\r\n    <Container className=\"mt-4 p-3 rounded border shadow\">\r\n        <h1 className=\"mb-4 display-4\">Results</h1>\r\n        <Row>\r\n          <Col>\r\n            <Table protocol={Protocols.Baer} editable>{/* This table is rendered from table.js */}</Table>\r\n          </Col>\r\n        </Row>\r\n        <Container>\r\n          <Row className=\"justify-content-center\">\r\n            <Col>\r\n              <Alert show={show} onClose={() => setShow(false)} variant=\"info\" dismissible className=\"text-center\">Need to change volume data? Tap corrosponding table entries to edit.</Alert>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <ResultsViewNotes />\r\n        <ResultsViewPhotos />\r\n        <ResultsViewButtons protocol={Protocols.Baer} />\r\n    </Container>\r\n  );\r\n}\r\nexport default BaerResultsView;","import { Container, Col, Row, Button, Table, Form, InputGroup } from \"react-bootstrap\";\r\nimport { addReading, removeReadingWithTime, selectCurReadingID, setGatheringData, selectCurId, selectReports } from '../../reports/reportsSlice';\r\nimport { selectInfiltrometerData, selectInitialVolume, selectTimeInterval } from '../../reused-components/reused-slices/initializeSlice';\r\nimport { selectLastVolume, setLastVolume, setSecondsElapsed, setVolume } from '../../reused-components/reused-slices/replicationSlice';\r\nimport React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addGeoDataToReading } from \"../../useful-functions/usefulFunctions\";\r\nimport { useState } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { ErrorTip } from '../../reused-components/ErrorTip';\r\n\r\nexport const StandardReplicationTable = ({ intervals }) => {\r\n\r\n    const timeInterval = useSelector(selectTimeInterval);\r\n    const curInfiltrometerData = useSelector(selectInfiltrometerData);\r\n    const initialVolume = curInfiltrometerData.initialVolume;\r\n\r\n    const header = () => (\r\n        <>\r\n            <th>Time (s)</th>\r\n            <th>Volume (mL)</th>\r\n        </>\r\n\r\n    );\r\n\r\n    const rowData = () => {\r\n        var data = [{ time: 0, volume: initialVolume }];\r\n\r\n        for (var i = 1; i < intervals; i++) {\r\n            data = [...data, { time: timeInterval * i, volume: null }];\r\n        }\r\n\r\n\r\n        return data;\r\n    };\r\n\r\n    const reports = useSelector(selectReports);\r\n    const curReport = reports[useSelector(selectCurId)];\r\n    const readings = curReport.readings;\r\n    let rowIndex = 0;\r\n\r\n    const isValid = (time) => {\r\n        if (time === 0) return true;\r\n        if (readings.length <= 1) return true;\r\n\r\n        let i;\r\n\r\n        for (i = 1; i < readings.length; i++) {\r\n            if (Number(readings[i].secondsElapsed) === time) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (i >= readings.length) return true;\r\n\r\n        const vol = readings[i].volume;\r\n\r\n        if (vol === 0) return true;\r\n        if (vol < 0) return false;\r\n\r\n        return Number(readings[i - 1].volume) >= Number(vol);\r\n    }\r\n\r\n    const body = () => {\r\n\r\n        const initial = () => {\r\n            return (\r\n                <tr>\r\n                    <td>0</td>\r\n                    <td>{initialVolume}</td>\r\n                </tr>\r\n            );\r\n\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {rowData().map(row => row.time === 0 ? initial() : <StandardReplicationRow time={row.time} isValid={isValid(row.time)} index={++rowIndex} />)}\r\n            </>\r\n\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Row>\r\n                <Col>\r\n                    <table class=\"table table-light table-striped table-hover\">\r\n                        <thead>\r\n                            <tr class=\"table-dark\">\r\n                                {header()}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {body()}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst StandardReplicationRow = ({ time, isValid, index }) => {\r\n    const curInfiltrometerData = useSelector(selectInfiltrometerData);\r\n    const initialVolume = curInfiltrometerData.initialVolume;\r\n    const dispatch = useDispatch();\r\n    const reports = useSelector(selectReports);\r\n    const curReport = reports[useSelector(selectCurId)];\r\n    const readings = curReport.readings;\r\n    const [maximum, setMaximum] = useState(initialVolume);\r\n\r\n    const onChange = (event) => {\r\n        var volume = event.target.value;\r\n        if (String(volume).length === 0 || volume == undefined || volume == null) {\r\n            dispatch(removeReadingWithTime(time));\r\n            return;\r\n        }\r\n        dispatch(addReading({\r\n            volume,\r\n            secondsElapsed: time,\r\n            lat: curInfiltrometerData.coordinates.lat,\r\n            lon: curInfiltrometerData.coordinates.lon\r\n        }));\r\n    }\r\n    useEffect(() => {\r\n        var min = Number(initialVolume);\r\n        //find the min up to our solution\r\n        for (var i = 0; i < readings.length; i++) {\r\n            if (readings[i].secondsElapsed === time) {\r\n                //this is us, set min\r\n                setMaximum(min);\r\n                break;\r\n            }\r\n            if (min >= Number(readings[i].volume)) {\r\n                min = Number(readings[i].volume);\r\n                setMaximum(min);\r\n            }\r\n        }\r\n    }, [readings])\r\n\r\n    return (\r\n\r\n        <tr>\r\n            <td>{time}</td>\r\n            <td>\r\n                <Form validated>\r\n                    <Form.Control\r\n                        autoFocus\r\n                        id={\"volume\" + time}\r\n                        type=\"number\"\r\n                        step=\"any\"\r\n                        size=\"sm\"\r\n                        min=\"0\"\r\n                        max={maximum}\r\n                        placeholder=\"Volume (mL)\"\r\n                        onChange={onChange}\r\n                        onSubmit={onChange}\r\n                    />\r\n                </Form>\r\n                {/*isValid ? null : <ErrorTip size='25px' title=\"Error!\" content=\"This is an invalid reading.\" />*/}\r\n\r\n            </td>\r\n        </tr>\r\n    );\r\n}","/* React/Redux Imports */\r\nimport React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Col, Container, Form, ProgressBar, Row, Alert, Modal, Offcanvas } from 'react-bootstrap';\r\nimport { CountdownCircleTimer } from \"react-countdown-circle-timer\";\r\n\r\n/* Slice Imports */\r\nimport { setPage } from '../../page-redirection/redirector-slice';\r\nimport { setGatheringData, selectCurId, selectReports } from '../../reports/reportsSlice';\r\nimport { selectTimeInterval } from '../../reused-components/reused-slices/initializeSlice';\r\n\r\n/* HTML/CSS Imports */\r\nimport './timer.css';\r\nimport { StandardReplicationTable } from './StandardReplicationTable';\r\n\r\n/* Other Imports */\r\nimport beep from '../../audio/beep-01a.mp3';\r\nimport { useAudio } from '../../audio/Player';\r\nimport { Pages } from '../../page-redirection/Redirector';\r\n\r\nconst StandardReplicationView = () => {\r\n  const initializeState = {\r\n    timerIsPlaying: false,\r\n    key: 0,\r\n  };\r\n  const timeInterval = useSelector(selectTimeInterval);\r\n  const dispatch = useDispatch();\r\n  const [playing, setAudPlaying] = useAudio(beep);\r\n  const [state, setState] = useState(initializeState);\r\n  const [remaining, setRemaining] = useState(0);\r\n  const [show, setShow] = useState(false);\r\n  const [showHelp, setShowHelp] = useState(false);\r\n  const reports = useSelector(selectReports);\r\n  const curReport = reports[useSelector(selectCurId)];\r\n  const readings = curReport.readings;\r\n  const renderTime = ({ remainingTime }) => {\r\n    setRemaining(remainingTime);\r\n    if (remainingTime === 0) \r\n      return <div className=\"timer\">Time is up!</div>;\r\n\r\n    return (\r\n      <div className=\"timer\">\r\n        <div className=\"text\">Time remaining:</div>\r\n        <div className=\"value\">{remainingTime}</div>\r\n        <div className=\"text\">seconds</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  function hideStartButton() {\r\n    document.getElementById(\"startButton\").className = \"w-50 visually-hidden\"\r\n  }\r\n\r\n  // Signal that we are done gathering data\r\n  // Go to results page\r\n  function endProtocol() {\r\n    dispatch(setGatheringData(false));\r\n    dispatch(setPage(Pages.StandardResultsView))\r\n  }\r\n\r\n  // Signal that we are done gathering data\r\n  // Show \"are you sure?\" modal\r\n  function endProtocolInvalid() {\r\n    setState({\r\n      ...state,\r\n      timerIsPlaying: false\r\n    });\r\n    setShow(true);\r\n  }\r\n\r\n  // Handles closing the \"are you sure?\" modal\r\n  function handleClose() {\r\n    setShow(false);\r\n    setState({\r\n      ...state,\r\n      timerIsPlaying: false\r\n    })\r\n  }\r\n\r\n  function handleSubmit() {\r\n    endProtocol();\r\n  }\r\n\r\n  // Function for validating table entries\r\n  // Returns false if any previous entry is less than the current entry\r\n  function allValid() {\r\n    for (let i = 1; i < readings.length; i++) {\r\n      if (Number(readings[i - 1].volume) < Number(readings[i].volume)) return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // Function for adding a new table entry\r\n  // Plays the audio beep and increments the entry key\r\n  function addRow() {\r\n    setAudPlaying(false);\r\n    setAudPlaying(true);\r\n    setState({ timerIsPlaying: true, key: state.key + 1 });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container className=\"mt-4 p-3 rounded border shadow\">\r\n          <Row>\r\n            <Col>\r\n              <div className=\"mb-3 timer-wrapper\">\r\n                <CountdownCircleTimer\r\n                  key={state.key}\r\n                  isPlaying={state.timerIsPlaying}\r\n                  duration={Number(timeInterval)}\r\n                  colors={[[\"#004777\", 0.33], [\"#F7B801\", 0.33], [\"#A30000\"]]}\r\n                  onComplete={() => addRow()}\r\n                >\r\n                  {renderTime}\r\n                </CountdownCircleTimer>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n            <StandardReplicationTable intervals={state.key} />\r\n          <Row className=\"justify-content-center\">\r\n            <Button\r\n              variant=\"dark\"\r\n              className=\"w-50\"\r\n              size=\"lg\"\r\n              id=\"startButton\"\r\n              disabled={state.timerIsPlaying}\r\n              onClick={() => { setState({ timerIsPlaying: true, key: state.key + 1 }); hideStartButton() }}\r\n            >\r\n              {!state.timerIsPlaying ? \"Start Protocol\" : \"Replication Running...\"}\r\n            </Button>\r\n          </Row>\r\n          {allValid() ? null :\r\n            <Row className=\"text-center mb-2\">\r\n              <Alert\r\n                variant=\"danger\"\r\n                className=\"w-100\"\r\n              >\r\n                Please correct all invalid data before continuing.\r\n              </Alert>\r\n            </Row>\r\n          }\r\n          <Row className=\"justify-content-center mt-2\">\r\n            <Button\r\n              variant=\"secondary\"\r\n              className=\"w-50\"\r\n              size=\"lg\"\r\n              onClick={allValid() ? endProtocol : endProtocolInvalid}\r\n            >\r\n              {state.timerIsPlaying ? \"End Protocol\" : \"Continue\"}\r\n            </Button>\r\n          </Row>\r\n\r\n          <Row className=\"justify-content-center mt-2\">\r\n            <Button \r\n              variant=\"primary\" \r\n              hidden={state.timerIsPlaying} \r\n              className=\"w-50\"\r\n              size=\"lg\"\r\n              onClick={() => setShowHelp(true)}\r\n            >\r\n              Help\r\n            </Button>\r\n            <Offcanvas\r\n              show={showHelp}\r\n              onHide={() => setShowHelp(false)}\r\n              placement=\"bottom\"\r\n            >\r\n              <Offcanvas.Header closeButton>\r\n                <Offcanvas.Title>Protocol Guide</Offcanvas.Title>\r\n              </Offcanvas.Header>\r\n              <Offcanvas.Body>\r\n                <h4>To properly conduct a Standard Protocol replication:</h4>\r\n                <ol>\r\n                  <li>Expose the soil about 1 to 3 cm in depth, removing any overlying ash or minerals.</li>\r\n                  <li>With a full infiltrometer, place the porous disk flat against the soil and perpendicular to the surface. Tap the Start Protocol\" button as soon as the infiltrometer disk and the soil come into contact.</li>\r\n                  <li>At the end of each interval, a field in the above table will automatically appear and be selected for data entry. Record the current volume.</li>\r\n                  <li>Repeat these steps for as many intervals as necessary.</li>\r\n                  <li>Once all replications have been completed, select the \"End Protocol\" button. You can then review your data and edit fields as necessary.</li>\r\n                  <li>Tap the \"Continue\" button to proceed to the results page.</li>\r\n                </ol>\r\n              </Offcanvas.Body>\r\n            </Offcanvas>\r\n          </Row>\r\n      </Container>\r\n\r\n      {/* Modal */}\r\n      <Modal show={show}\r\n        onHide={handleClose}\r\n        backdrop=\"static\"\r\n        centered>\r\n        <Modal.Header>\r\n          <Modal.Title>Continue with invalid data?</Modal.Title>\r\n        </Modal.Header>\r\n        <Form noValidate validated\r\n          onSubmit={handleSubmit}>\r\n          <Modal.Footer>\r\n            <Button variant=\"outline-secondary\" size=\"lg\"\r\n              onClick={handleClose}>\r\n              Edit Fields\r\n            </Button>\r\n            <Button type=\"submit\" variant=\"dark\" size=\"lg\">\r\n              Continue\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Form>\r\n      </Modal>\r\n      \r\n      <ProgressBar className=\"fixed-bottom\" now={ (remaining / (timeInterval)) * 100} />\r\n    </>\r\n  );\r\n\r\n}\r\n\r\nexport default StandardReplicationView;","import React from 'react';\r\nimport './App.css';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport BaerInitializeView from './features/baer/baer-initialize/BaerInitializeView';\r\nimport BaerReplicationView from './features/baer/baer-replication/BaerReplicationView';\r\nimport { Redirector } from './features/page-redirection/Redirector';\r\nimport { NavBar } from './features/navBar/NavBar';\r\nimport ReportsTable from './features/reports/ReportsTable';\r\nimport { HomePage } from './features/homepage/HomePage';\r\nimport { Pages } from './features/page-redirection/Redirector';\r\nimport { PdfViewer } from './features/pdfviewer/pdf-viewer'\r\nimport MiniDiskManual from './features/pdfviewer/MiniDiskManual.pdf';\r\nimport FieldGuide from './features/pdfviewer/Field-Guide.pdf'\r\nimport NewBaerManual from './features/pdfviewer/New-Baer-Article.pdf'\r\nimport StandardResultsView from './features/standard/standard-results/StandardResultsView';\r\nimport StandardInitializeView from './features/standard/standard-initialize/StandardInitializeView';\r\nimport BaerResultsView from './features/baer/baer-results/BaerResultsView';\r\nimport StandardReplicationView from './features/standard/standard-replication/StandardReplicationView';\r\nconst App = () => {\r\n  return (\r\n\r\n    <HashRouter>\r\n      <title>Infiltrometer Companion</title>\r\n      <NavBar />\r\n      {/*Initialize Assets so they are pre-loaded*/}\r\n\r\n      <Redirector protectedElements={\r\n        <Switch>\r\n          <Route exact path={Pages.Homepage}>\r\n            <HomePage />\r\n          </Route>\r\n          <Route exact path={Pages.BaerInitializeView}>\r\n            <BaerInitializeView />\r\n          </Route>\r\n          <Route exact path={Pages.BaerReplicationView}>\r\n            <BaerReplicationView />\r\n          </Route>\r\n          <Route exact path={Pages.BaerResultsView}>\r\n            <BaerResultsView />\r\n          </Route>\r\n          <Route exact path={Pages.StandardInitializeView}>\r\n            <StandardInitializeView />\r\n          </Route>\r\n          <Route exact path={Pages.StandardReplicationView}>\r\n            <StandardReplicationView />\r\n          </Route>\r\n          <Route exact path={Pages.StandardResultsView}>\r\n            <StandardResultsView />\r\n          </Route>\r\n          <Route exact path={Pages.InfiltrometerManual}>\r\n            <PdfViewer pdf={MiniDiskManual} />\r\n\r\n          </Route>\r\n          <Route exact path={Pages.BaerManual}>\r\n            <PdfViewer pdf={FieldGuide} />\r\n          </Route>\r\n          <Route exact path={Pages.NewBaerManual}>\r\n            <PdfViewer pdf={NewBaerManual} />\r\n          </Route>\r\n          <Route exact path={Pages.ReportsView}>\r\n            <ReportsTable />\r\n          </Route>\r\n\r\n        </Switch>\r\n      } />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// A mock function to mimic making an async request for data\r\nexport function fetchCount(amount = 1) {\r\n  return new Promise((resolve) =>\r\n    setTimeout(() => resolve({ data: amount }), 500)\r\n  );\r\n}\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { fetchCount } from './counterAPI';\r\n\r\nconst initialState = {\r\n  value: 0,\r\n  status: 'idle',\r\n};\r\n\r\n// The function below is called a thunk and allows us to perform async logic. It\r\n// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This\r\n// will call the thunk with the `dispatch` function as the first argument. Async\r\n// code can then be executed and other actions can be dispatched. Thunks are\r\n// typically used to make async requests.\r\nexport const incrementAsync = createAsyncThunk(\r\n  'counter/fetchCount',\r\n  async (amount) => {\r\n    const response = await fetchCount(amount);\r\n    // The value we return becomes the `fulfilled` action payload\r\n    return response.data;\r\n  }\r\n);\r\n\r\nexport const counterSlice = createSlice({\r\n  name: 'counter',\r\n  initialState,\r\n  // The `reducers` field lets us define reducers and generate associated actions\r\n  reducers: {\r\n    increment: (state) => {\r\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n      // doesn't actually mutate the state because it uses the Immer library,\r\n      // which detects changes to a \"draft state\" and produces a brand new\r\n      // immutable state based off those changes\r\n      state.value += 1;\r\n    },\r\n    decrement: (state) => {\r\n      state.value -= 1;\r\n    },\r\n    // Use the PayloadAction type to declare the contents of `action.payload`\r\n    incrementByAmount: (state, action) => {\r\n      state.value += action.payload;\r\n    },\r\n  },\r\n  // The `extraReducers` field lets the slice handle actions defined elsewhere,\r\n  // including actions generated by createAsyncThunk or in other slices.\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(incrementAsync.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(incrementAsync.fulfilled, (state, action) => {\r\n        state.status = 'idle';\r\n        state.value += action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions;\r\n\r\n// The function below is called a selector and allows us to select a value from\r\n// the state. Selectors can also be defined inline where they're used instead of\r\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\r\nexport const selectCount = (state) => state.counter.value;\r\n\r\n// We can also write thunks by hand, which may contain both sync and async logic.\r\n// Here's an example of conditionally dispatching actions based on current state.\r\nexport const incrementIfOdd = (amount) => (dispatch, getState) => {\r\n  const currentValue = selectCount(getState());\r\n  if (currentValue % 2 === 1) {\r\n    dispatch(incrementByAmount(amount));\r\n  }\r\n};\r\n\r\nexport default counterSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n    notes: \"hi im a note\"\r\n};\r\n\r\nexport const ResultsSlice = createSlice({\r\n    name: 'baerResults',\r\n    initialState,\r\n    reducers: {\r\n        setNotes: (state, action) => {\r\n            state.notes = action.payload;\r\n            console.log(state.notes);\r\n        }\r\n    }\r\n});\r\n\r\nexport default ResultsSlice.reducer;","import { configureStore } from '@reduxjs/toolkit';\r\nimport { combineReducers } from 'redux';\r\nimport counterReducer from '../features/counter/counterSlice';\r\n\r\n//BAER\r\nimport baerInitializeReducer from '../features/reused-components/reused-slices/initializeSlice';\r\nimport baerReplicationReducer from '../features/reused-components/reused-slices/replicationSlice';\r\nimport baerResultsReducer from '../features/reused-components/reused-slices/resultsSlice';\r\nimport albumReducer from '../features/photos/albumsSlice';\r\n\r\n\r\nimport reportsSlice from '../features/reports/reportsSlice';\r\nimport { reducer as reduxFormReducer } from 'redux-form'\r\nimport redirectReducer from '../features/page-redirection/redirector-slice';\r\nimport { persistReducer } from \"redux-persist\";\r\nimport storage from 'redux-persist-indexeddb-storage';\r\nimport {\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist'\r\n\r\nconst reducers = combineReducers({\r\n  //BAER\r\n  baerInitialize: baerInitializeReducer,\r\n  baerReplication: baerReplicationReducer,\r\n  baerResults: baerResultsReducer,\r\n\r\n  //album\r\n  album: albumReducer,\r\n\r\n  counter: counterReducer,\r\n  reports: reportsSlice,\r\n  form: reduxFormReducer,\r\n  redirector: redirectReducer\r\n\r\n});\r\n\r\nconst persistConfig = {\r\n  key: 'root',\r\n  storage: storage('myDB'),\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, reducers);\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const store = configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n});\r\n\r\n\r\n\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.0/8 are considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\n\r\nexport function register(config) {\r\n\r\n\r\n  if (\r\n    process.env.NODE_ENV === 'production' &&\r\n    'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${(process.env.PUBLIC_URL)}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n\r\n\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n\r\n\r\n  //\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { persistStore } from 'redux-persist';\r\nimport { InitializePhotoDB } from './features/photos/photoDatabase';\r\n\r\nlet persistor = persistStore(store);\r\n\r\nReactDOM.render(\r\n\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n\r\nInitializePhotoDB();\r\n"],"sourceRoot":""}