(this.webpackJsonpinfiltrometer21=this.webpackJsonpinfiltrometer21||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},214:function(e,t,n){},217:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(32),c=n.n(a),o=(n(105),n(106),n(20)),l=n(7),s=n(13),u=n(5),d=n(29),b=n(11),j=Object(b.c)({name:"reports",initialState:{reports:[],curId:-1},reducers:{newReport:function(e,t){e.curId++,e.reports=[].concat(Object(d.a)(e.reports),[{id:e.curId,date:t.payload.date,protocol:t.payload.protocol,readings:[],infiltrometerData:t.payload.infiltrometerData}])},addReading:function(e,t){e.reports[e.curId].readings=[].concat(Object(d.a)(e.reports[e.curId].readings),[t.payload])}}}),m=j.actions,p=m.newReport,h=m.addReading,f=function(e){return e.reports.reports},v=function(e){return e.reports.curId},O=function(e){return e.reports.reports[e.reports.curId].readings.length},x=j.reducer,y="BAER_PROTOCOL",g={clay:{nh0:1.09,alpha:.005},clayLoam:{nh0:1.31,alpha:1.31},loam:{nh0:1.56,alpha:.036},sand:{alpha:.145,nh0:2.68},sandyClay:{alpha:.027,nh0:1.23},loamySand:{alpha:.124,nh0:2.28},sandyClayLoam:{alpha:.059,nh0:1.48},sandyLoam:{alpha:.075,nh0:1.89},silt:{alpha:.016,nh0:1.37},siltLoam:{alpha:.02,nh0:1.41},siltyClay:{alpha:.005,nh0:1.09},siltyClayLoam:{alpha:.01,nh0:1.23}},I={initialVolume:0,coordinates:{lat:0,long:0},soilType:g.clay,infiltrometerRadius:0,timeInterval:30},w=Object(b.c)({name:"baerInitialize",initialState:I,reducers:{setInfiltrometerType:function(e,t){t.payload.infiltrometerType,e.infiltrometerR=0},setInitialVolume:function(e,t){e.initialVolume=t.payload},setInfiltrometerSuction:function(e,t){e.infiltrometerSuction=t.payload},setTimeInterval:function(e,t){e.timeInterval=t.payload},setSoilType:function(e,t){e.soilType=t.payload},setInfiltrometerData:function(e,t){e.initialVolume=t.payload.initialVolume,e.coordinates=t.payload.coordinates,e.soilType=t.payload.soilType,e.timeInterval=t.payload.timeInterval,e.infiltrometerRadius=t.payload.infiltrometerRadius,e.infiltrometerSuction=t.payload.infiltrometerSuction}}}),R=function(e){return e.baerInitialize.soilType},T=function(e){return e.baerInitialize.initialVolume},M=function(e){return e.baerInitialize},C=function(e){return e.baerInitialize.timeInterval},S=w.actions,V=(S.setInfiltrometerType,S.setInitialVolume,S.setInfiltrometerSuction,S.setTimeInterval,S.setSoilType,S.setInfiltrometerData),k=w.reducer,N=Object(b.c)({name:"baerReplication",initialState:{volume:0,secondsElapsed:0,lastVolume:0},reducers:{setVolume:function(e,t){e.volume=Number(t.payload)},setSecondsElapsed:function(e,t){e.secondsElapsed=Number(t.payload)},setLastVolume:function(e,t){e.lastVolume=Number(t.payload)}}}),E=N.actions,L=E.setVolume,P=E.setSecondsElapsed,z=E.setLastVolume,q=function(e){return e.baerReplication.lastVolume},U=N.reducer,B=n(220),D=n(219),A=Object(b.c)({name:"redirector",initialState:{page:null},reducers:{setPage:function(e,t){e.page=t.payload}}}),F=A.actions.setPage,J=function(e){return e.redirector.page},W=A.reducer,$=n(0),_=function(e){var t=e.input,n=e.label,r=e.type,i=e.meta,a=i.touched,c=i.error;return Object($.jsx)("div",{children:Object($.jsxs)("div",{children:[Object($.jsx)("input",Object(s.a)(Object(s.a)({},t),{},{placeholder:n,type:r})),a&&c&&Object($.jsx)("span",{children:c})]})})},G=Object(u.b)()(Object(D.a)({form:"baerInitializeForm",validate:function(e){var t={};return e.volume?e.volume<0&&(t.volume="Must be a value greater than zero"):t.volume="Required",e.suction?Number(e.suction)<=0&&(t.suction="Must be a positive value"):t.suction="Required",e.timeInterval?Number(e.timeInterval)<=0&&(t.timeInterval="Time interval must be greater than 0"):t.timeInterval="Required",e.radius?Number(e.radius)<=0&&(t.radius="Radius must be larger than 0"):t.radius="Required",t},onSubmit:function(e,t){var n=g.default;switch(e.soilType){case"clay":n=g.clay;break;case"clayLoam":n=g.clayLoam;break;case"loam":n=g.loam}var r={initialVolume:Number(e.volume),coordinates:{lat:0,long:0},soilType:n,infiltrometerRadius:e.radius,timeInterval:Number(e.timeInterval),infiltrometerSuction:Number(e.suction)};t(V(r)),t(z(r.initialVolume)),t(p({date:(new Date).toString(),protocol:y,infiltrometerData:r})),t(h({volume:Number(e.volume),secondsElapsed:0})),t(F("/Infiltrometer/baer-replication"))}})((function(e){Object(u.d)(M);var t=e.handleSubmit,n=e.pristine,r=e.reset,i=e.submitting;Object(u.d)(R),Object(u.c)();return Object($.jsxs)("div",{class:"col-sm",children:[Object($.jsxs)("div",{children:[Object($.jsx)("h1",{children:"Initialize Baer Protocol"}),Object($.jsx)(o.b,{to:"/Infiltrometer/baer-replication",children:"To Replication View"})]}),Object($.jsx)("div",{}),Object($.jsx)("div",{class:"container",children:Object($.jsxs)("form",{onSubmit:t,children:[Object($.jsxs)("div",{class:"fo,r-group row",children:[Object($.jsx)("label",{for:"volume",class:"col-sm-2 col-form-label",children:"Initial Volume"}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)(B.a,{name:"volume",type:"number",component:_,label:"Initial Volume"})})]}),Object($.jsxs)("div",{class:"for-group row",children:[Object($.jsx)("label",{for:"suction",class:"col-sm-2 col-form-label",children:"Suction"}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)(B.a,{name:"suction",type:"number",component:_,label:"Suction"})})]}),Object($.jsxs)("div",{class:"for-group row",children:[Object($.jsx)("label",{for:"timeInterval",class:"col-sm-2 col-form-label",children:"Time Interval"}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)(B.a,{name:"timeInterval",type:"number",component:_,label:"Time Interval"})})]}),Object($.jsxs)("div",{class:"for-group row",children:[Object($.jsx)("label",{for:"radius",class:"col-sm-2 col-form-label",children:"Radius"}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)(B.a,{name:"radius",type:"number",component:_,label:"Radius"})})]}),Object($.jsxs)("div",{class:"row",children:[Object($.jsx)("legend",{class:"col-form-label col-sm-2 pt-0",children:"Soil Type"}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)("div",{class:"form-check",children:Object($.jsxs)("label",{children:[Object($.jsx)(B.a,{name:"soilType",component:"input",type:"radio",value:"clay"})," Clay"]})})}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)("div",{class:"form-check",children:Object($.jsxs)("label",{children:[Object($.jsx)(B.a,{name:"soilType",component:"input",type:"radio",value:"loam"})," Loam"]})})}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsx)("div",{class:"form-check",children:Object($.jsxs)("label",{children:[Object($.jsx)(B.a,{name:"soilType",component:"input",type:"radio",value:"clayLoam"})," Clay Loam"]})})}),Object($.jsx)("div",{class:"col-sm-10",children:Object($.jsxs)("div",{class:"form-check",children:[Object($.jsxs)("label",{children:[Object($.jsx)(B.a,{name:"soilType",component:"input",type:"radio",value:"custom"})," Custom"]}),Object($.jsx)(B.a,{name:"nh0",component:"input",type:"number",value:"nh0"}),Object($.jsx)(B.a,{name:"alpha",component:"input",type:"number",value:"alpha"})]})})]}),Object($.jsxs)("div",{children:[Object($.jsx)("button",{type:"submit",class:"btn btn-primary",disabled:i,children:"Start Protocol"}),Object($.jsx)("button",{type:"button",class:"btn btn-secondary",disabled:n||i,onClick:r,children:"Clear Values"})]})]})})]})}))),H=n(51),K=n(98),Q=(n(214),function(e){var t=e.remainingTime;return 0===t?Object($.jsx)("div",{className:"timer",children:"Time is up!"}):Object($.jsxs)("div",{className:"timer",children:[Object($.jsx)("div",{className:"text",children:"Time remaining:"}),Object($.jsx)("div",{className:"value",children:t}),Object($.jsx)("div",{className:"text",children:"seconds"})]})}),X=function(){var e=Object(u.d)(C),t=Number(Object(u.d)(T)),n=Number(Object(u.d)(q)),i=Math.min(t,n),a=Object(u.c)(),c=Object(r.useState)({timerIsPlaying:!1,key:0}),o=Object(H.a)(c,2),l=o[0],d=o[1],b=Object(u.d)(O);function j(){var t;t=!1,d(Object(s.a)(Object(s.a)({},l),{},{timerIsPlaying:t}));var n=Number(prompt("Enter volumetric data below.",0));if(n){for(;n>i||n<0;)if(window.confirm("Invalid input! Make sure your volume reading is less than or equal to: "+i),!(n=Number(prompt("Enter volumetric data below.",0))))return;var r=(l.key+1)*e;a(z(n)),a(L(n)),a(P(r)),a(h({volume:n,secondsElapsed:r}))}}return Object($.jsxs)("div",{children:[Object($.jsx)("div",{className:"timer-wrapper",children:Object($.jsx)(K.CountdownCircleTimer,{isPlaying:l.timerIsPlaying,duration:Number(e),colors:[["#004777",.33],["#F7B801",.33],["#A30000"]],onComplete:function(){return j()},children:Q},l.key)}),Object($.jsxs)("div",{children:["Last Volume: ",i]}),Object($.jsxs)("div",{children:["Current Replication: ",b]}),Object($.jsx)("div",{class:"container",children:Object($.jsxs)("div",{class:"row",children:[Object($.jsx)("button",{type:"submit",class:"btn btn-primary",disabled:l.timerIsPlaying,onClick:function(){d({timerIsPlaying:!0,key:l.key+1})},children:l.timerIsPlaying?"Replication Running...":"Start Replication"}),Object($.jsx)("button",{type:"submit",class:"btn btn-secondary",onClick:function(){a(F("/Infiltrometer/baer-results"))},children:"End Protocol"})]})})]})},Y=function(){var e=Object(u.d)(f)[Object(u.d)(v)],t=Object(r.useState)(function(){for(var t=[],n=0;n<e.readings.length;n++)t[n]={id:n,Time:e.readings[n].secondsElapsed,Volume:e.readings[n].volume,Rate:a(n)};return{reports:t}}()),n=Object(H.a)(t,2),i=n[0];n[1];function a(t){return e.readings[t].volume/e.readings[t].secondsElapsed*60}return Object($.jsx)("div",{children:Object($.jsx)("table",{class:"table table-light table-striped table-hover",id:"students",children:Object($.jsxs)("tbody",{children:[Object($.jsx)("tr",{class:"table-dark",children:Object.keys(i.reports[0]).map((function(e,t){return console.log(e.toUpperCase()),"ID"===e.toUpperCase()?Object($.jsx)("th",{children:e.toUpperCase()},t):"TIME"===e.toUpperCase()?Object($.jsx)("th",{children:e.toUpperCase()+" (s)"},t):"VOLUME"===e.toUpperCase()?Object($.jsx)("th",{children:e.toUpperCase()+" (mL)"},t):"RATE"===e.toUpperCase()?Object($.jsx)("th",{children:e.toUpperCase()+" (mL/sec)"},t):void 0}))}),i.reports.map((function(e,t){var n=e.id,r=e.Time,i=e.Volume,a=e.Rate;return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:n}),Object($.jsx)("td",{children:r}),Object($.jsx)("td",{children:i}),Object($.jsx)("td",{children:a})]},n)}))]})})})},Z=function(){Object(u.d)(f);return Object($.jsxs)("div",{class:"container-fluid",children:[Object($.jsxs)("div",{class:"row",children:[Object($.jsx)("div",{class:"col-sm-2"}),Object($.jsx)("div",{class:"col-sm-9 text-lg-center",children:Object($.jsx)("h1",{children:"Baer Results View"})}),Object($.jsx)("div",{class:"col-sm-1"}),Object($.jsx)(o.b,{to:"/Infiltrometer/baer-initialize",children:"To Initialize View"})]}),Object($.jsxs)("div",{class:"row",children:[Object($.jsx)("div",{class:"col-sm-2"}),Object($.jsx)("div",{class:"col-sm-9",children:Object($.jsx)("div",{class:"container",children:Object($.jsx)(Y,{})})}),Object($.jsx)("div",{class:"col-sm-1"})]})]})};n(48);function ee(e,t){var n=[],r=[];e.forEach((function(e,i){null!==e[1]&&(r.push(e),n.push(t[i]))}));var i=r.reduce((function(e,t){return e+t[1]}),0)/r.length,a=r.reduce((function(e,t){var n=t[1]-i;return e+n*n}),0);return 1-r.reduce((function(e,t,r){var i=n[r],a=t[1]-i[1];return e+a*a}),0)/a}function te(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var ne={linear:function(e,t){for(var n=[0,0,0,0,0],r=0,i=0;i<e.length;i++)null!==e[i][1]&&(r++,n[0]+=e[i][0],n[1]+=e[i][1],n[2]+=e[i][0]*e[i][0],n[3]+=e[i][0]*e[i][1],n[4]+=e[i][1]*e[i][1]);var a=r*n[2]-n[0]*n[0],c=r*n[3]-n[0]*n[1],o=0===a?0:te(c/a,t.precision),l=te(n[1]/r-o*n[0]/r,t.precision),s=function(e){return[te(e,t.precision),te(o*e+l,t.precision)]},u=e.map((function(e){return s(e[0])}));return{points:u,predict:s,equation:[o,l],r2:te(ee(e,u),t.precision),string:0===l?"y = ".concat(o,"x"):"y = ".concat(o,"x + ").concat(l)}},exponential:function(e,t){for(var n=[0,0,0,0,0,0],r=0;r<e.length;r++)null!==e[r][1]&&(n[0]+=e[r][0],n[1]+=e[r][1],n[2]+=e[r][0]*e[r][0]*e[r][1],n[3]+=e[r][1]*Math.log(e[r][1]),n[4]+=e[r][0]*e[r][1]*Math.log(e[r][1]),n[5]+=e[r][0]*e[r][1]);var i=n[1]*n[2]-n[5]*n[5],a=Math.exp((n[2]*n[3]-n[5]*n[4])/i),c=(n[1]*n[4]-n[5]*n[3])/i,o=te(a,t.precision),l=te(c,t.precision),s=function(e){return[te(e,t.precision),te(o*Math.exp(l*e),t.precision)]},u=e.map((function(e){return s(e[0])}));return{points:u,predict:s,equation:[o,l],string:"y = ".concat(o,"e^(").concat(l,"x)"),r2:te(ee(e,u),t.precision)}},logarithmic:function(e,t){for(var n=[0,0,0,0],r=e.length,i=0;i<r;i++)null!==e[i][1]&&(n[0]+=Math.log(e[i][0]),n[1]+=e[i][1]*Math.log(e[i][0]),n[2]+=e[i][1],n[3]+=Math.pow(Math.log(e[i][0]),2));var a=te((r*n[1]-n[2]*n[0])/(r*n[3]-n[0]*n[0]),t.precision),c=te((n[2]-a*n[0])/r,t.precision),o=function(e){return[te(e,t.precision),te(te(c+a*Math.log(e),t.precision),t.precision)]},l=e.map((function(e){return o(e[0])}));return{points:l,predict:o,equation:[c,a],string:"y = ".concat(c," + ").concat(a," ln(x)"),r2:te(ee(e,l),t.precision)}},power:function(e,t){for(var n=[0,0,0,0,0],r=e.length,i=0;i<r;i++)null!==e[i][1]&&(n[0]+=Math.log(e[i][0]),n[1]+=Math.log(e[i][1])*Math.log(e[i][0]),n[2]+=Math.log(e[i][1]),n[3]+=Math.pow(Math.log(e[i][0]),2));var a=(r*n[1]-n[0]*n[2])/(r*n[3]-Math.pow(n[0],2)),c=(n[2]-a*n[0])/r,o=te(Math.exp(c),t.precision),l=te(a,t.precision),s=function(e){return[te(e,t.precision),te(te(o*Math.pow(e,l),t.precision),t.precision)]},u=e.map((function(e){return s(e[0])}));return{points:u,predict:s,equation:[o,l],string:"y = ".concat(o,"x^").concat(l),r2:te(ee(e,u),t.precision)}},polynomial:function(e,t){for(var n=[],r=[],i=0,a=0,c=e.length,o=t.order+1,l=1;l<o;l++){for(var s=0;s<c;s++)null!==e[s][1]&&(i+=Math.pow(e[s][0],l)*e[s][1]);n.push(i),i=0;for(var u=[],b=1;b<o;b++){for(var j=0;j<c;j++)null!==e[j][1]&&(a+=Math.pow(e[j][0],l+b));u.push(a),a=0}r.push(u)}r.push(n);for(var m=[0].concat(Object(d.a)(function(e,t){for(var n=e,r=e.length-1,i=[t],a=0;a<r;a++){for(var c=a,o=a+1;o<r;o++)Math.abs(n[a][o])>Math.abs(n[a][c])&&(c=o);for(var l=a;l<r+1;l++){var s=n[l][a];n[l][a]=n[l][c],n[l][c]=s}for(var u=a+1;u<r;u++)for(var d=r;d>=a;d--)n[d][u]-=n[d][a]*n[a][u]/n[a][a]}for(var b=r-1;b>=0;b--){for(var j=0,m=b+1;m<r;m++)j+=n[m][b]*i[m];i[b]=(n[r][b]-j)/n[b][b]}return i}(r,o).map((function(e){return te(e,t.precision)})))),p=function(e){return[te(e,t.precision),te(m.reduce((function(t,n,r){return t+n*Math.pow(e,r)}),0),t.precision)]},h=e.map((function(e){return p(e[0])})),f="y = ",v=m.length-1;v>=0;v--)f+=v>1?"".concat(m[v],"x^").concat(v," + "):1===v?"".concat(m[v],"x + "):m[v];return{string:f,points:h,predict:p,equation:Object(d.a)(m).reverse(),r2:te(ee(e,h),t.precision)}}};function re(){var e={value:"",results:{}};return Object($.jsxs)("div",{children:[Object($.jsx)("form",{children:Object($.jsxs)("label",{children:["Data Points: ",e.value,Object($.jsx)("input",{type:"text",onChange:function(t){e.value=t.target.value}})]})}),Object($.jsx)("div",{children:Object($.jsx)("button",{onClick:function(t){for(var n=e.value.split(" "),r=0;r<n.length;r++)n[r]=n[r].split(",");e.results=ne.polynomial(n,{order:2,precision:15}),alert("Points were submitted: "+n+"\nRegression output: "+e.results.string),console.log(e.results)},children:"Submit For Regression"})})]})}var ie=function(){var e=Object(l.g)().pathname,t=Object(u.d)(J),n=Object(u.c)();return e==t?(n(F(null)),null):null!=t?Object($.jsx)(l.a,{to:t}):null},ae=function(){return Object($.jsxs)(o.a,{children:[Object($.jsx)(ie,{}),Object($.jsxs)(l.d,{children:[Object($.jsx)(l.b,{exact:!0,path:"/Infiltrometer/",children:Object($.jsx)("div",{children:Object($.jsx)(o.b,{to:"/Infiltrometer/baer-initialize",children:"Baer Initialize View"})})}),Object($.jsx)(l.b,{exact:!0,path:"/Infiltrometer/baer-initialize",children:Object($.jsx)(G,{})}),Object($.jsx)(l.b,{exact:!0,path:"/Infiltrometer/baer-replication",children:Object($.jsx)(X,{})}),Object($.jsx)(l.b,{exact:!0,path:"/Infiltrometer/baer-results",children:Object($.jsx)(Z,{})}),Object($.jsx)(l.b,{exact:!0,path:"/Infiltrometer/testing/regression",children:Object($.jsx)(re,{})})]})]})},ce=n(72),oe=n.n(ce),le=n(99);function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var ue=Object(b.b)("counter/fetchCount",function(){var e=Object(le.a)(oe.a.mark((function e(t){var n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),de=Object(b.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(ue.pending,(function(e){e.status="loading"})).addCase(ue.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),be=de.actions,je=(be.increment,be.decrement,be.incrementByAmount,de.reducer),me=Object(b.c)({name:"baerResults",initialState:{volume:0,secondsElapsed:0},reducers:{}}).reducer,pe=n(221),he=Object(b.a)({reducer:{baerInitialize:k,baerReplication:U,baerResults:me,counter:je,reports:x,form:pe.a,redirector:W}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(216);c.a.render(Object($.jsx)(i.a.StrictMode,{children:Object($.jsx)(u.a,{store:he,children:Object($.jsx)(ae,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[217,1,2]]]);
//# sourceMappingURL=main.e881aea9.chunk.js.map