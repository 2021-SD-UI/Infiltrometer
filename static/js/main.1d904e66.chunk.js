(this.webpackJsonpinfiltrometer21=this.webpackJsonpinfiltrometer21||[]).push([[0],{130:function(e,t){},159:function(e,t,n){},160:function(e,t,n){},168:function(e,t,n){},180:function(e,t){},181:function(e,t){},182:function(e,t){},183:function(e,t){},184:function(e,t){},186:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(25),i=n.n(r),l=(n(159),n(160),n(145)),s=n(15),o="BAER",d="Standard",j=n(272),u=n(281),b=n(273),h=n(143),m=n(274),O=n(41),p=n(141),x=n(8),f=n(21),v=Object(f.c)({name:"redirector",initialState:{page:"/"},reducers:{setPage:function(e,t){e.page=t.payload}}}),y=v.actions.setPage,g=function(e){return e.redirector.page},L=v.reducer,N=n(17),w=n(286),I=Object(f.c)({name:"reports",initialState:{reports:{},curId:"-1"},reducers:{newReport:function(e,t){e.curId=Object(w.a)();var n={id:e.curId,date:t.payload.date,protocol:t.payload.protocol,readings:[],infiltrometerData:t.payload.infiltrometerData,gatheringData:!0,notes:""};e.reports[n.id]=n},addReading:function(e,t){var n=e.reports[e.curId].readings;if(0!==n.length){for(var a=0;a<n.length;a++)if(n[a].secondsElapsed===t.payload.secondsElapsed)return void(n[a]=t.payload);n.push(t.payload),n.sort((function(e,t){return e.secondsElapsed>t.secondsElapsed?1:-1}))}else n.push(t.payload)},removeReadingWithTime:function(e,t){var n=Object(N.a)(e.reports[e.curId].readings);e.reports[e.curId].readings=Object(N.a)(n).filter((function(e){return e.secondsElapsed!==t.payload}))},setGatheringData:function(e,t){e.reports[e.curId].gatheringData=t.payload},removeReport:function(e,t){delete e.reports[t.payload],e.curId===t.payload&&(e.curId=Object.keys(e.reports)[0])},setCurId:function(e,t){e.curId=t.payload},setNotes:function(e,t){e.reports[e.curId].notes=t.payload},setCurInfiltrometerData:function(e,t){e.reports[e.curId].infiltrometerData=t.payload}}}),k=I.actions,C=k.newReport,S=k.addReading,E=k.removeReadingWithTime,T=k.setGatheringData,D=k.removeReport,R=k.setCurId,B=k.setNotes,P=k.setCurInfiltrometerData,V=function(e){return e.reports.reports},z=function(e){return e.reports.curId},M=function(e){return e.reports.reports[e.reports.curId].notes},A=function(e){return e.reports.reports[e.reports.curId].readings.length-1},F=I.reducer,H=Object(f.c)({name:"baerReplication",initialState:{volume:0,secondsElapsed:0,lastVolume:0},reducers:{setVolume:function(e,t){e.volume=Number(t.payload)},setSecondsElapsed:function(e,t){e.secondsElapsed=Number(t.payload)},setLastVolume:function(e,t){e.lastVolume=Number(t.payload)}}}),q=H.actions,G=q.setVolume,U=q.setSecondsElapsed,W=q.setLastVolume,K=function(e){return e.baerReplication.lastVolume},_=H.reducer,Y=Object(f.c)({name:"baerInitialize",initialState:{initialVolume:95,coordinates:{lat:0,lon:0},soilType:{nh0:2.28,alpha:.124},infiltrometerRadius:2.25,infiltrometerSuction:-1,timeInterval:60,site:"Site",observation:"Observation"},reducers:{setInitialVolume:function(e,t){e.initialVolume=t.payload},setInfiltrometerSuction:function(e,t){e.infiltrometerSuction=t.payload},setTimeInterval:function(e,t){e.timeInterval=t.payload},setSoilType:function(e,t){e.soilType=t.payload},setInfiltrometerData:function(e,t){e.initialVolume=t.payload.initialVolume,e.coordinates=t.payload.coordinates,e.soilType=t.payload.soilType,e.timeInterval=t.payload.timeInterval,e.infiltrometerRadius=t.payload.infiltrometerRadius,e.infiltrometerSuction=t.payload.infiltrometerSuction,e.site=t.payload.site,e.observation=t.payload.observation}}}),J=function(e){return e.baerInitialize.initialVolume},X=function(e){return e.baerInitialize},$=function(e){return e.baerInitialize.timeInterval},Q=Y.actions,Z=Q.setInitialVolume,ee=(Q.setInfiltrometerSuction,Q.setTimeInterval,Q.setSoilType,Q.setInfiltrometerData),te=Y.reducer,ne=n(285),ae=n(153),ce=n(0),re=function(e){var t=e.title,n=e.content;e.size;return Object(ce.jsx)(ne.a,{rootClose:!0,trigger:"click",placement:"top",overlay:Object(ce.jsxs)(ae.a,{children:[Object(ce.jsx)(ae.a.Header,{as:"h3",children:t}),Object(ce.jsx)(ae.a.Body,{children:n})]}),children:Object(ce.jsx)(p.a,{variant:"outline-dark",size:"sm",children:"?"})})},ie={radius:2.25,displayName:"Mini Disk"},le={radius:1.6,displayName:"Mini Disk Version 1"},se={nh0:1.09,alpha:.008},oe={nh0:1.31,alpha:.019},de={nh0:1.56,alpha:.036},je={alpha:.145,nh0:2.68},ue={alpha:.027,nh0:1.23},be={alpha:.124,nh0:2.28},he={alpha:.059,nh0:1.48},me={alpha:.075,nh0:1.89},Oe={alpha:.016,nh0:1.37},pe={alpha:.02,nh0:1.41},xe={alpha:.005,nh0:1.09},fe={alpha:.01,nh0:1.23},ve={alpha:null,nh0:null},ye="/",ge="/baer-initialize",Le="/baer-replication",Ne="/baer-results",we="/standard-initialize",Ie="/standard-replication",ke="/standard-results",Ce="/manuals-baer",Se="/manuals-infiltrometer",Ee="/reports",Te="/manuals-newBaer",De=function(e){var t=e.protectedElements,n=Object(s.g)().pathname,a=Object(x.c)(g);return a!==n?Object(ce.jsx)(s.a,{to:a}):t},Re=n(2);function Be(e,t){navigator.geolocation.getCurrentPosition((function(n){t(Object(Re.a)(Object(Re.a)({},e),{},{lat:n.coords.latitude,lon:n.coords.longitude}))}),(function(n){t(Object(Re.a)(Object(Re.a)({},e),{},{lat:"N/A",lon:"N/A"}))}))}var Pe=function(e){var t=e.protocol,n=Object(x.c)(X),c=Object(x.b)(),r=function(e){var t=document.getElementById("nh0"),n=document.getElementById("alpha");t.value=e.nh0,n.value=e.alpha};return Object(a.useEffect)((function(){var e=document.getElementById("lat").value;""===e&&(e=null);var t=document.getElementById("lon").value;""===t&&(t=null),Be({lat:e,lon:t},(function(e){null!==document.getElementById("lat")&&(document.getElementById("lat").value=e.lat,document.getElementById("lon").value=e.lon)}))}),[]),Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(j.a,{className:"mt-4 p-4 rounded border shadow",children:[Object(ce.jsxs)("h1",{className:"display-4 mb-4",children:["Initialize ",t," Protocol "]}),Object(ce.jsxs)(u.a,{validated:!0,onSubmit:function(e){e.preventDefault();var n=e.currentTarget,a=document.getElementById("site").value,r=document.getElementById("observation").value,i=document.getElementById("volume").value,l=document.getElementById("suction").value,s=document.getElementById("timeInterval").value,d=document.getElementById("radius").value,j=document.getElementById("nh0").value,u=document.getElementById("alpha").value,b=document.getElementById("lat").value;""===b&&(b=null);var h=document.getElementById("lon").value;if(""===h&&(h=null),!1===n.checkValidity())e.stopPropagation();else{var m=function(){c(ee(O)),c(Z(i)),c(G(i)),c(W(i)),c(C({date:(new Date).toString(),protocol:t,infiltrometerData:O}))},O={initialVolume:i,coordinates:{lat:Number(b),lon:Number(h)},soilType:{nh0:j,alpha:u},infiltrometerRadius:d,timeInterval:s,infiltrometerSuction:l,site:a,observation:r};null==b||null==h?Be({volume:i,secondsElapsed:0},(function(e){O.coordinates.lat=e.lat,O.coordinates.lon=e.lon,m(),c(S(e)),c(y(t===o?Le:Ie))})):(m(),c(S({volume:i,secondsElapsed:0,lat:b,lon:h})),c(y(t===o?Le:Ie)))}},children:[Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{className:"display-6",children:["Site Name","  ",Object(ce.jsx)(re,{size:"25px",title:"Site Name",content:"Where you are recording data from, for organizational purposes."})]}),Object(ce.jsx)(u.a.Control,{id:"site",type:"text",size:"lg",defaultValue:n.site,placeholder:"Enter site name..."}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsxs)(u.a.Label,{className:"display-6",children:["Observation Name","  ",Object(ce.jsx)(re,{size:"25px",title:"Observation Name",content:"The name of the observation you are recording, for organizational purposes."})]}),Object(ce.jsx)(u.a.Control,{id:"observation",type:"text",step:"any",size:"lg",defaultValue:n.observation,placeholder:"Enter observation..."})]})})}),Object(ce.jsx)("hr",{className:"mt-5"}),Object(ce.jsxs)(b.a,{className:"mt-5 display-6",children:[Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{children:["Volume (mL)* "," ",Object(ce.jsx)(re,{size:"25px",title:"Volume",content:"The initial volume of water in the lower chamber of the infiltrometer (in mL)."})]}),Object(ce.jsx)(u.a.Control,{required:!0,id:"volume",type:"number",step:"any",size:"lg",min:"0",defaultValue:n.initialVolume,placeholder:"Initial Volume (mL)"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})}),Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{children:["Time (s)*","   ",Object(ce.jsx)(re,{size:"25px",title:t===o?"Time":"Time Interval",content:t===o?" The time interval for each observation. For the BAER protocol the time is one minute.":"The time for each interval that you will record data for."})]}),Object(ce.jsx)(u.a.Control,{required:!0,id:"timeInterval",type:"number",step:"any",size:"lg",min:"1",defaultValue:n.timeInterval,placeholder:"Time (sec)"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})})]}),Object(ce.jsx)("hr",{className:"mt-5"}),Object(ce.jsxs)(b.a,{className:"mt-5 display-6",children:[Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{className:"display-6",children:["Suction (cm)*","  ",Object(ce.jsx)(re,{size:"25px",title:"Suction",content:t===o?"For the BAER protocol the suction tube should be adjusted so that the 1 cm mark is aligned with the surface of the water in the upper chamber of the infiltrometer.":"The suction of the infiltrometer device."})]}),Object(ce.jsxs)(m.a,{onSelect:function(e){return t=e,void(document.getElementById("suction").value=t);var t},variant:"dark",title:"Preset Suction Values",children:[Object(ce.jsx)(O.a.Item,{eventKey:"-0.5",children:" -0.5 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-1",children:" -1 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-2",children:" -2 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-3",children:" -3 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-4",children:" -4 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-5",children:" -5 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-6",children:" -6 "}),Object(ce.jsx)(O.a.Item,{eventKey:"-7",children:" -7 "})]}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Control,{required:!0,id:"suction",type:"number",step:"any",size:"lg",max:"0",defaultValue:n.infiltrometerSuction,placeholder:"Suction (cm)"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})}),Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{className:"display-6",children:["Radius (cm)","  ",Object(ce.jsx)(re,{size:"25px",title:"Radius",content:"Radius of the infiltrometer device being used. You may select from one of the preset types below, or input your own custom radius."})]}),Object(ce.jsxs)(m.a,{onSelect:function(e){return t=e,void(document.getElementById("radius").value=t);var t},variant:"dark",title:"Preset Infiltrometer Types",children:[Object(ce.jsx)(O.a.Item,{eventKey:ie.radius,children:ie.displayName}),Object(ce.jsx)(O.a.Item,{eventKey:le.radius,children:le.displayName})]}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Control,{id:"radius",type:"number",step:"any",size:"lg",min:"0",defaultValue:null,placeholder:"Radius (cm)"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})}),Object(ce.jsx)(u.a.Label,{as:"h5",children:"(*) indicates a required field"})]}),Object(ce.jsx)("hr",{className:"mt-5"}),Object(ce.jsx)(b.a,{className:"mt-5",children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{className:"display-6",children:["Soil Type","  ",Object(ce.jsx)(re,{size:"25px",title:"Soil Type",content:"The type of soil you are conducting the protocol on. You may select a preset soil type from the menu below to automatically load all the necessary data, or input the N/H0 and Alpha values of a custom soil type if yours is not represented."})]}),Object(ce.jsxs)(m.a,{variant:"dark",title:"Preset Soil Types",children:[Object(ce.jsx)(O.a.Item,{onClick:function(){return r(je)},children:" Sand "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(be)},children:" Loamy Sand "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(me)},children:" Sandy Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(de)},children:" Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(Oe)},children:" Silt "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(pe)},children:" Silt Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(he)},children:" Sandy Clay Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(oe)},children:" Clay Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(fe)},children:" Silty Clay Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(ue)},children:" Sandy Clay "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(xe)},children:" Silty Clay "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(se)},children:" Clay "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(ve)},children:" Unknown "})]}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Label,{children:"N/H0"}),Object(ce.jsx)(u.a.Control,{id:"nh0",type:"number",step:"any",size:"lg",min:"0",placeholder:"N/H0"}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Label,{children:"Alpha"}),Object(ce.jsx)(u.a.Control,{id:"alpha",type:"number",step:"any",size:"lg",min:"0",placeholder:"Alpha"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})})}),Object(ce.jsx)("hr",{className:"mt-5"}),Object(ce.jsx)(b.a,{className:"mt-5",children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Label,{className:"display-6",children:["Location","  ",Object(ce.jsx)(re,{size:"25px",title:"Location",content:"Where you are taking data from. This is automatically loaded by the app if you have location services enabled. Otherwise, you will need to add the latitude and longitude values manually."})]}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Label,{children:"Latitude"}),Object(ce.jsx)(u.a.Control,{id:"lat",type:"number",step:"any",size:"lg",placeholder:"Latitude"}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Label,{children:"Longitude"}),Object(ce.jsx)(u.a.Control,{id:"lon",type:"number",step:"any",size:"lg",placeholder:"Longitude"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})})}),Object(ce.jsx)("hr",{className:"mt-5"}),Object(ce.jsx)(b.a,{className:"mt-5",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{type:"submit",variant:"dark",size:"lg",className:"w-100",children:"Start Protocol"})})}),Object(ce.jsx)(b.a,{className:"mt-2",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"danger",size:"sm",className:"w-100",onClick:function(){document.getElementById("site").value="",document.getElementById("observation").value="",document.getElementById("volume").value="",document.getElementById("suction").value="",document.getElementById("timeInterval").value="",document.getElementById("radius").value="",document.getElementById("nh0").value="",document.getElementById("alpha").value="",document.getElementById("lat").value="",document.getElementById("lon").value=""},children:"Clear Values"})})})]})]})})},Ve=function(){return Object(ce.jsx)(Pe,{protocol:o})},ze=n(7),Me=n(101),Ae=n(151),Fe=n(283),He=n(276),qe=(n(168),n(275)),Ge={Strong:{min:0,max:3,name:"Strong"},Weak:{min:3,max:8,name:"Weak"},None:{min:8,max:1/0,name:"None"}},Ue=n(120);var We=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.moz_indexedDB;function Ke(){return new Promise((function(e,t){var n=We.open("photoDB");n.onsuccess=function(t){var a=n.result;console.log("openDb DONE"),e(a)},n.onerror=function(e){console.error("openDb:",n.errorCode),t("Error while opening database")},n.onupgradeneeded=function(t){var a=n.result;console.log("openDb.onupgradeneeded"),a.createObjectStore("photos",{keyPath:"id",autoIncrement:!0}),e(a)}}))}function _e(e,t){Ke().then((function(n){n.transaction("photos","readwrite").objectStore("photos").add({id:e,value:t}).onerror=function(e){console.log(e)}}))}function Ye(e){Ke().then((function(t){t.transaction("photos","readwrite").objectStore("photos").delete(e).onerror=function(e){console.log(e)}}))}var Je=Object(f.c)({name:"albums",initialState:{},reducers:{addPhoto:function(e,t){var n=t.payload,a=n.reportId,c=n.thumbnailData,r=n.fullImageData,i=Object(w.a)(),l=Object(w.a)();_e(i,c),_e(l,r),void 0!=e[a]?e[a]=[].concat(Object(N.a)(e[a]),[{thumbnail:i,full:l}]):e[a]=[{thumbnail:i,full:l}]},deletePhoto:function(e,t){var n=t.payload,a=n.reportId,c=n.photoIndex;void 0!=e[a]&&null!=e[a]&&null!=e[a][c]&&(Ye(e[a][c].thumbnail),Ye(e[a][c].full),e[a].splice(c,1))},deleteAllPhotos:function(e,t){var n=t.payload.reportId;e[n]&&(e[n].forEach((function(e){Ye(e.thumbnail),Ye(e.full)})),e[n]=null)}}}),Xe=Je.actions,$e=Xe.addPhoto,Qe=Xe.deletePhoto,Ze=Xe.deleteAllPhotos,et=function(e){return e.album},tt=function(e){return new Promise((function(t,n){Ke().then((function(n){var a=n.transaction("photos").objectStore("photos").get(e);a.onerror=function(e){console.log(e),t(null)},a.onsuccess=function(e){void 0!==e.target.result&&t(e.target.result.value)}}))}))},nt=Je.reducer,at=n(169);function ct(e){return void 0===e?"":e.toString().replaceAll('"','""')}function rt(e,t){var n=new at,a=[];Object.keys(e).forEach((function(c,r){a.push(new Promise((function(a,i){var l="report_"+r,s=n.folder(l),d=function(e){var t=[],n=[];e.protocol===o?(t=[["Protocol","Soil Alpha","Soil NH/O","Average Rate (mL/min)","Suction (cm)","Radius (cm)","Severity Rating","Site Name","Observation Name","Notes","Replication Number","Time (sec)","Volume(mL)","Rate(mL / min)","Latitude","Longitude","Date","Time"]],n=[e.protocol,e.infiltrometerData.soilType.alpha,e.infiltrometerData.soilType.nh0,lt(e,!1),e.infiltrometerData.infiltrometerSuction,e.infiltrometerData.infiltrometerRadius,ot(lt(e)).name,ct(e.infiltrometerData.site),ct(e.infiltrometerData.observation),ct(e.notes)]):(t=[["Protocol","Soil Alpha","Soil NH/O","C1 (cm/s^(\xbd))","C2 (cm/s)","K (cm/s)","A","Suction (cm)","Radius (cm)","Site Name","Observation Name","Notes","Reading Number","Time (sec)","Volume(mL)","Latitude","Longitude","Date","Time"]],n=[e.protocol,e.infiltrometerData.soilType.alpha,e.infiltrometerData.soilType.nh0,e.infiltrometerData.C1,e.infiltrometerData.C2,e.infiltrometerData.K,e.infiltrometerData.A,e.infiltrometerData.infiltrometerSuction,e.infiltrometerData.infiltrometerRadius,ct(e.infiltrometerData.site),ct(e.infiltrometerData.observation),ct(e.notes)]);var a=0,c=new Date(e.date).toDateString();return e.readings.forEach((function(r){var i=Object(N.a)(n),l=new Date(e.date);l=new Date(l.setSeconds(l.getSeconds()+r.secondsElapsed)).toTimeString(),e.protocol===o?i.push((a+1).toString(),r.secondsElapsed,r.volume,it(a,e),r.lat,r.lon,c,l):i.push((a+1).toString(),r.secondsElapsed,r.volume,r.lat,r.lon,c,l),t.push(i),a++})),function(e){return e.map((function(e){return e.join(",")})).join("\n")}(t)}(e[c]),j=null==t?null:t[c];s.file(l+".csv",d),null==j||void 0==j||0==j.length?a():st(j).then((function(e){0===e.length&&a();var t=s.folder("images");e.forEach((function(e){t.file(e.name,e.data,{base64:!0})})),a()}))})))})),Promise.all(a).then((function(){n.generateAsync({type:"blob"}).then((function(e){Object(Ue.saveAs)(e,"reports.zip")}))}))}function it(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e>0){if(n)return Number(t.readings[0].volume-t.readings[e].volume)/(Number(t.readings[e].secondsElapsed)/60);var a=t.readings[e-1],c=t.readings[e],r=Number(a.volume)-Number(c.volume),i=Number(c.secondsElapsed)-Number(a.secondsElapsed);return r/(i/60)}return 0}function lt(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,a=0;a<e.readings.length;a++)n+=it(a,e,t);return n/(e.readings.length-1)}function st(e){var t=null!==e&&void 0!==e&&e.length>0;return new Promise((function(n,a){t||n([]);for(var c=[],r=0;r<e.length;r++)c.push(tt(e[r].full));var i=[];Promise.all(c).then((function(e){e.forEach((function(e,t){var n=e.match(/[^:/]\w+(?=;|,)/)[0],a=e.split(",")[1];i.push({data:a,name:("site_photo_"+t+"."+n).toString()})})),n(i)}))}))}function ot(e){return e>=Ge.None.min?Ge.None:e>=Ge.Strong.min&&e<Ge.Strong.max?Ge.Strong:e>=Ge.Weak.min&&e<Ge.Weak.max?Ge.Weak:Ge.None}var dt=function(e){var t=e.protocol,n=e.editable,c=Object(x.c)(V),r=Object(x.c)(X),i=Object(x.b)(),l=c[Object(x.c)(z)],s=Object(a.useState)(w()),h=Object(ze.a)(s,1)[0],m=Object(a.useState)(0),O=Object(ze.a)(m,2),f=O[0],v=O[1],y=Object(a.useState)({visible:!1,curTime:0,curVolume:0,curId:0}),g=Object(ze.a)(y,2),L=g[0],N=g[1];function w(){if(void 0===l)return{reports:[]};for(var e=[],n=0;n<l.readings.length;n++)e[n]={id:n,Time:l.readings[n].secondsElapsed,Volume:l.readings[n].volume,Rate:it(n,l,t===d)};return{reports:e}}return Object(ce.jsxs)(j.a,{children:[Object(ce.jsxs)(b.a,{children:[Object(ce.jsx)("table",{class:"table table-light table-striped table-hover",id:"students",children:Object(ce.jsxs)("tbody",{children:[Object(ce.jsx)("tr",{class:"table-dark",children:function(){try{return Object.keys(h.reports[0]).map((function(e,n){return"ID"===e.toUpperCase()?Object(ce.jsx)("th",{children:e.toUpperCase()},n):"TIME"===e.toUpperCase()?Object(ce.jsx)("th",{children:e.toUpperCase()+" (s)"},n):"VOLUME"===e.toUpperCase()?Object(ce.jsx)("th",{children:e.toUpperCase()+" (mL)"},n):t===o?"RATE"===e.toUpperCase()?Object(ce.jsx)("th",{children:e.toUpperCase()+" (mL/min)"},n):Object(ce.jsx)("th",{className:"text-center",children:"No Readings To Display"},0):void 0}))}catch(e){return Object(ce.jsx)("th",{className:"text-center",children:"No Readings To Display"},0)}}()}),w().reports.map((function(e,a){var c=e.id,r=e.Time,i=e.Volume,l=e.Rate;return t===o?Object(ce.jsxs)("tr",{onClick:function(){n&&(N({curTime:r,curVolume:i,curId:c,visible:!0}),v(i))},children:[Object(ce.jsx)("td",{children:c}),Object(ce.jsx)("td",{children:r}),Object(ce.jsx)("td",{children:i}),Object(ce.jsx)("td",{children:l.toPrecision(4)})]},c):Object(ce.jsxs)("tr",{onClick:function(){n&&(N({curTime:r,curVolume:i,curId:c,visible:!0}),v(i))},children:[Object(ce.jsx)("td",{children:c}),Object(ce.jsx)("td",{children:r}),Object(ce.jsx)("td",{children:i})]},c)}))]})}),t===o?Object(ce.jsx)("table",{class:"table table-light table-striped table-hover",children:Object(ce.jsxs)("tbody",{children:[Object(ce.jsxs)("tr",{class:"table-dark",children:[Object(ce.jsx)("th",{class:"text-center",children:"AVERAGE (mL/min)"}),Object(ce.jsx)("th",{className:"text-center",children:"SEVERITY RATING"})]}),Object(ce.jsxs)("tr",{class:"table-striped",children:[Object(ce.jsx)("td",{className:"text-center",children:lt(l).toPrecision(4)}),Object(ce.jsx)("td",{class:"text-center",children:ot(lt(l)).name})]})]})}):null]}),Object(ce.jsxs)(Fe.a,{show:L.visible,children:[Object(ce.jsx)(Fe.a.Header,{children:Object(ce.jsx)(Fe.a.Title,{children:"Enter New Volumetric Data"})}),Object(ce.jsxs)(u.a,{validated:!0,onSubmit:function(e){var t=document.getElementById("newVolume");e.preventDefault(),!0===e.currentTarget.checkValidity()&&(N({visible:!1}),0!==String(t.value).length&&null!==t.value&&void 0!==t.value?i(S({volume:L.curVolume,secondsElapsed:L.curTime,lat:r.coordinates.lat,lon:r.coordinates.lon})):i(E(L.curTime)))},children:[Object(ce.jsxs)(Fe.a.Body,{children:[Object(ce.jsxs)(u.a.Text,{children:["Current time: ",L.curTime," s"]}),Object(ce.jsx)("br",{}),Object(ce.jsxs)(u.a.Text,{children:["Current volume: ",f," mL"]}),Object(ce.jsx)(u.a.Control,{id:"newVolume",type:"number",placeholder:"New volume",min:"0",defaultValue:"",onChange:function(){return N(Object(Re.a)(Object(Re.a)({},L),{},{curVolume:document.getElementById("newVolume").value}))}}),document.getElementById("newVolume")?""===document.getElementById("newVolume").value?Object(ce.jsx)(qe.a,{variant:"danger",className:"text-center mt-3",children:"Submitting an empty value will remove this table entry!"}):null:Object(ce.jsx)(qe.a,{variant:"danger",className:"text-center mt-3",children:"Submitting an empty value will remove this table entry!"})]}),Object(ce.jsxs)(Fe.a.Footer,{children:[Object(ce.jsx)(p.a,{variant:"secondary",onClick:function(){return N(Object(Re.a)(Object(Re.a)({},L),{},{visible:!1}))},children:"Cancel"}),Object(ce.jsx)(p.a,{type:"submit",variant:"primary",children:document.getElementById("newVolume")&&""!==document.getElementById("newVolume").value?"Save Changes":"Delete Reading"})]})]})]})]})};dt.defaultProps={protocol:o,editable:!1};var jt=dt,ut=function(e){var t=Object(a.useState)(new Audio(e)),n=Object(ze.a)(t,1)[0],c=Object(a.useState)(!1),r=Object(ze.a)(c,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){i?n.play():(n.pause(),n.currentTime=0)}),[i,n]),Object(a.useEffect)((function(){return n.addEventListener("ended",(function(){return l(!1)})),function(){n.removeEventListener("ended",(function(){return l(!1)}))}}),[n]),[i,l]},bt=n.p+"static/media/beep-01a.40e5c7db.mp3",ht=function(){var e=Object(x.c)(A),t=Number(Object(x.c)(J)),n=Object(x.c)($),c=Object(a.useState)(n),r=Object(ze.a)(c,2),i=r[0],l=r[1],s=Object(a.useState)(!1),o=Object(ze.a)(s,2),d=o[0],m=o[1],O=Number(Object(x.c)(K)),f=Math.min(t,O),v=Object(x.b)(),g=Object(a.useState)({timerIsPlaying:!1,key:0}),L=Object(ze.a)(g,2),N=L[0],w=L[1];var I=Object(a.useState)(!1),k=Object(ze.a)(I,2),C=k[0],E=k[1],D=ut(bt),R=Object(ze.a)(D,2),B=(R[0],R[1]),P=function(){E(!1),function(e){w(Object(Re.a)(Object(Re.a)({},N),{},{timerIsPlaying:e}))}(!1)};return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsxs)(j.a,{className:"mt-4 p-3 rounded border shadow",children:[Object(ce.jsxs)("h1",{className:"mb-4 display-4",children:["Current Replication: ",e+1]}),Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)("div",{className:"mt-4 timer-wrapper",children:Object(ce.jsx)(Me.CountdownCircleTimer,{isPlaying:N.timerIsPlaying,duration:Number(n),colors:[["#004777",.33],["#F7B801",.33],["#A30000"]],onComplete:function(){return B(!1),B(!0),void E(!0)},children:function(e){var t=e.remainingTime;return l(t),0===t?Object(ce.jsx)("div",{className:"timer",children:"Time is up!"}):Object(ce.jsxs)("div",{className:"timer",children:[Object(ce.jsx)("div",{className:"text",children:"Time remaining:"}),Object(ce.jsx)("div",{className:"value",children:t}),Object(ce.jsx)("div",{className:"text",children:"seconds"})]})}},N.key)})})}),Object(ce.jsx)(b.a,{className:"text-center",children:Object(ce.jsx)(h.a,{className:"mt-4",children:Object(ce.jsxs)(p.a,{variant:"dark",className:"w-50",size:"lg",disabled:N.timerIsPlaying,onClick:function(){w({timerIsPlaying:!0,key:N.key+1})},children:[N.timerIsPlaying?"Replication Running...":"Start Replication"," "]})})}),Object(ce.jsx)(b.a,{className:"text-center",children:Object(ce.jsx)(h.a,{className:"mt-2",children:Object(ce.jsx)(p.a,{variant:"secondary",className:"w-50",size:"lg",onClick:function(){v(T(!1)),v(y(Ne))},children:"End Protocol"})})}),Object(ce.jsx)(b.a,{className:"mt-4",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(jt,{})})}),Object(ce.jsxs)(b.a,{className:"justify-content-center",children:[Object(ce.jsx)(p.a,{variant:"primary",hidden:N.timerIsPlaying,className:"w-50",size:"lg",onClick:function(){return m(!0)},children:"Help"}),Object(ce.jsxs)(Ae.a,{show:d,onHide:function(){return m(!1)},placement:"bottom",children:[Object(ce.jsx)(Ae.a.Header,{closeButton:!0,children:Object(ce.jsx)(Ae.a.Title,{children:"Protocol Guide"})}),Object(ce.jsxs)(Ae.a.Body,{children:[Object(ce.jsx)("h4",{children:"To properly conduct a replication:"}),Object(ce.jsxs)("ol",{children:[Object(ce.jsx)("li",{children:"Expose the soil about 1 to 3 cm in depth, removing any overlying ash or minerals."}),Object(ce.jsx)("li",{children:"With a full infiltrometer, place the porous disk flat against the soil and perpendicular to the surface. Tap the \u201cStart Replication\u201d button as soon as the infiltrometer disk and the soil come into contact."}),Object(ce.jsx)("li",{children:"At the end of the timer, remove the infiltrometer from the soil and hold the top of the tube so that the water is at eye level. Record the end volume."}),Object(ce.jsx)("li",{children:"Repeat these steps for as many replications as necessary."}),Object(ce.jsx)("li",{children:'Once all replications have been completed, select the "End Protocol" button'})]})]})]})]})]}),Object(ce.jsxs)(Fe.a,{show:C,onHide:P,backdrop:"static",centered:!0,children:[Object(ce.jsx)(Fe.a.Header,{children:Object(ce.jsxs)(Fe.a.Title,{children:["Enter volumetric data for replication: ",e+1]})}),Object(ce.jsx)(Fe.a.Body,{children:Object(ce.jsxs)(u.a,{noValidate:!0,validated:!0,onSubmit:function(t){t.preventDefault();var a=t.currentTarget,c=document.getElementById("volumeReading").value;if(!1===a.checkValidity())t.stopPropagation();else{var r=(e+1)*n;v(W(c)),v(G(c)),v(U(r)),Be({volume:c,secondsElapsed:r},(function(e){v(S(e))})),P()}},children:[Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsxs)(u.a.Text,{muted:!0,children:["Previous volume: ",f," mL"]}),Object(ce.jsx)(u.a.Control,{required:!0,autofocus:!0,type:"number",step:"any",size:"lg",min:"0",max:f,id:"volumeReading",placeholder:"Volume (mL)"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:'Enter a valid reading, or hit "Cancel".'})]}),Object(ce.jsxs)(Fe.a.Footer,{children:[Object(ce.jsx)(p.a,{variant:"outline-secondary",size:"lg",onClick:P,children:"Cancel"}),Object(ce.jsx)(p.a,{type:"submit",variant:"dark",size:"lg",children:"Submit"})]})]})})]}),Object(ce.jsx)(He.a,{className:"fixed-bottom",now:i/n*100})]})},mt=n(284),Ot=n(287),pt=n(277);function xt(e){return Object(ce.jsx)("svg",{viewBox:"0 0 "+e.width+" "+e.height,width:"127",height:"53",children:Object(ce.jsx)("path",{fill:"#ffffff",d:"M34 29L34 31L35.4722 32.5L36.6944 34.0556L37.1944 35L37.4722 37L37 39L36.6667 40L36.3333 41L35.3333 44L35 45L34.6944 46L34.4167 47L34.1111 49L34.1111 50L34.3889 52L34.7778 54L34.9167 55L34.9722 57L34.9167 58L34.7778 59L34.3611 61L34.1389 62L33.8611 63L33.3889 65L33.1944 66L32.8056 68L32.3889 70L32.0833 72L31.9167 74L31.7778 75L31.3889 77L31.0833 79L31.0278 80L31 82L31 84L31 87L31 90L31 91L31.0278 93L31.0833 94L31.2222 95L31.7222 97L32.6389 98.9167L34.1111 100.583L36 102L37 102.667L38 103.333L40 104.611L41 105.194L43 106.389L45 107.611L47 108.75L48 109.222L50 110.222L51 110.75L53 111.5L54.9722 111.583L55.8889 111.25L57.2778 109.889L57.8333 108.056L57.7222 107.056L57 105L58.5 104.333L60.0556 103.583L62 102.889L63 102.639L64 102.389L66 102.083L68 102L69 102L71 101.917L73 101.611L74 101.389L75 101.222L77 101.111L79 101.472L80 101.833L81 102.167L82 102.556L83 102.833L85 103.361L86 103.611L88 103.833L90 103.583L90.9444 103.333L91.9444 102.972L92.5 102.806L94 102L93.4722 100.583L92.5 99.4167L90.9167 98.25L89.9722 97.75L88.0833 96.5278L86.5 94.9167L85.9444 93.9722L85.4722 93L84.8333 91L84.5556 90L83.7222 88L82.5278 86L81.75 85L79.9722 83L79 82L77 80.0833L76 79.2222L74 77.6111L72 75.9167L70.1111 74.0556L69.3056 73.0556L68.7778 72.5L68 71L70.0556 70.9167L72 70.5278L74 69.7222L75 69.1667L77 68.0278L79 67.1667L80 66.9722L82 67.25L83 67.5556L84.9444 67.9167L85.5 67.9722L87 68L87 66.5L86.9167 64.9444L86.75 64L86.5278 63L86.1389 62L85.1389 60.0833L83.75 58.5L82.9167 57.9444L81 57.25L80 57.0833L78 57L77 57L75 56.9722L74 56.8889L72 56.3056L70.0556 55.1944L69.5 54.75L68 54L68 52L69.25 51.2222L69.6667 50.6944L71.1389 48.9722L72.6389 47.0278L73.3889 46.0833L75.0556 44.3889L75.9444 43.6111L77.5278 41.9167L78.1389 40.9722L78.7222 40L79.1389 39.0556L79.7222 37.5L80 36L78.5 35.3056L77.9444 35.3333L76.9444 35.2778L75 35.6944L73 36.3889L72 36.8333L70 37.7778L69 38.2222L68 38.7778L67 39.25L65 40.3611L64.0556 40.9167L63.0556 41.3611L62.5 41.6667L61 42L61 38.9444L61 37L61.0278 35L61.25 33L61.5 32L62.3889 30L62.9167 29L63.6944 27L63.9722 25L64 23L64 22.0556L64 19L61.9444 19L60 18.9167L58 18.5278L57 18.1667L55 17.4722L53 17.1111L52 17.1111L51 17.2222L49 17.6389L47 18.1667L46 18.4722L44.0833 19.5L43.2222 20.25L42.4167 21.0833L41 22.9722L39.5833 24.75L38.7778 25.5278L37.0278 26.7778L35.5 27.7778L34 29M53 21L52.2778 22.1389L51.75 22.3333L50 23L51 21L53 21M63 27L62.2222 27.7222L61.75 27.75L60.9444 27.9444L59 28L59.7778 27.2778L60.25 27.25L61.0556 27.0556L63 27M39 29.3333L39.3333 29.6667L38.6667 29.6667L39 29.3333M65 56L64.2222 57.5L62.9444 58.9444L62.0278 59.6944L61.5 60.2222L60 61L60.7778 59.5L62.0556 58.0556L62.9722 57.3056L63.5 56.7778L65 56M64.6667 59.6667L64.6667 60.3333L64.3333 60.3333L64.3333 59.6667L64.6667 59.6667M59 61L58 63L57 63L57 62L59 61M65.6667 62.6667L65.6667 63.3333L65.3333 63.3333L65.3333 62.6667L65.6667 62.6667M70.6667 84.6667L70.6667 85L70.3333 85.3333L70.3333 84.6667L70.6667 84.6667M70 87L69.9167 88.5L69.7778 89.0556L69.3333 90.9444L68.9722 91.9444L68.8056 92.5L68 94L67.5278 93.2222L67.6667 92.6944L67.75 91.8889L68.3333 90.0278L68.6389 89.1111L69.0278 88.3056L69.1944 87.7778L70 87M36 88L39 88L40 89L35 89L36 88M42 89L41 90L42 89M67 95L66 96L67 95z"})})}var ft=function(){var e=Object(x.b)();return Object(ce.jsx)(mt.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(ce.jsxs)(j.a,{children:[Object(ce.jsx)(mt.a.Brand,{children:Object(ce.jsx)("div",{className:"container",children:Object(ce.jsx)("div",{className:"row",children:Object(ce.jsx)("div",{className:"col",children:Object(ce.jsx)(xt,{width:1,height:110})})})})}),Object(ce.jsx)(mt.a.Brand,{href:"https://www.mtu.edu/computing/",children:Object(ce.jsx)("div",{className:"container",children:Object(ce.jsx)("div",{className:"row",children:Object(ce.jsx)("div",{className:"col",children:Object(ce.jsx)("img",{src:"https://www.mtu.edu/mtu_resources/images/download-central/logos/husky-icon/white.png",width:"56",className:"d-inline-block align-top",alt:"MTU logo"})})})})}),Object(ce.jsx)(mt.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(ce.jsxs)(mt.a.Collapse,{id:"responsive-navbar-nav",children:[Object(ce.jsxs)(Ot.a,{className:"me-auto",children:[Object(ce.jsx)(Ot.a.Link,{onClick:function(){return e(y(ye))},children:"Home"}),Object(ce.jsxs)(pt.a,{title:"New Test",id:"new-test-drop-down",children:[Object(ce.jsx)(pt.a.Item,{onClick:function(){return e(y(ge))},children:"BAER Protocol"}),Object(ce.jsx)(pt.a.Item,{onClick:function(){return e(y(we))},children:"Standard Protocol"})]}),Object(ce.jsx)(Ot.a.Link,{onClick:function(){return e(y(Ee))},children:"My Reports"}),Object(ce.jsxs)(pt.a,{title:"Manuals",id:"manuals-drop-down",children:[Object(ce.jsx)(pt.a.Divider,{}),Object(ce.jsx)(pt.a.Item,{onClick:function(){return e(y(Ce))},children:"USDA Field Guide"}),Object(ce.jsx)(pt.a.Divider,{}),Object(ce.jsx)(pt.a.Item,{onClick:function(){return e(y(Te))},children:"BAER Article"}),Object(ce.jsx)(pt.a.Divider,{}),Object(ce.jsx)(pt.a.Item,{onClick:function(){return e(y(Se))},children:"MiniDisk Manual"}),Object(ce.jsx)(pt.a.Divider,{})]})]}),Object(ce.jsx)(Ot.a,{children:Object(ce.jsx)(Ot.a.Link,{href:"https://github.com/2021-SD-UI/Infiltrometer/",children:"GitHub"})})]})]})})},vt=(n(127),n(278)),yt=function(){var e=Object(a.useState)({}),t=Object(ze.a)(e,2),n=t[0],c=t[1],r=Object.keys(n).length,i=Object(x.c)(V),l=Object(x.b)(),s=Object(x.c)(et);function m(e){var t=Object(Re.a)({},n);delete t[e.id],c(t)}function O(e){void 0!==n[e.id]&&m(e),l(Ze({reportId:e.id})),l(D(e.id))}function f(){for(var e=Object.keys(i),t=Object(Re.a)({},n),a=0;a<e.length;a++)delete t[e[a]];c(t)}function v(e){var t=new Date(e);return t.toDateString()===(new Date).toDateString()?"Today":t.toDateString()}function g(){return r>0?Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(h.a,{className:"m-2 col-6 col-md-3 col-lg-2 text-center",children:Object(ce.jsxs)(p.a,{variant:"danger",className:"w-100",onClick:function(){!function(){for(var e=Object(Re.a)({},n),t=Object.keys(e),a=0;a<t.length;a++)O(e[t[a]]);f()}()},children:["Delete (",r,")"]})}),Object(ce.jsx)(h.a,{className:"m-2 col-6 col-md-3 col-lg-2 text-center",children:Object(ce.jsxs)(p.a,{onClick:function(){return rt(n,s)},variant:"success",className:"w-100",children:["Download (",r,")"]})})]}):Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(h.a,{className:"m-2 col-6 col-md-3 col-lg-2 text-center",children:Object(ce.jsxs)(p.a,{disabled:!0,variant:"secondary",className:"w-100",children:["Delete (",r,")"]})}),Object(ce.jsx)(h.a,{className:"m-2 col-6 col-md-3 col-lg-2 text-center",children:Object(ce.jsxs)(p.a,{disabled:!0,variant:"secondary",className:"w-100",children:["Download (",r,")"]})})]})}return Object.keys(i).length>0?Object(ce.jsx)(j.a,{className:"mt-3",children:Object(ce.jsxs)("div",{class:"rounded border shadow",children:[Object(ce.jsx)("h1",{className:"my-5 display-4",children:"Reports"}),Object(ce.jsxs)(b.a,{className:"justify-content-center m-2",children:[Object(ce.jsx)(h.a,{className:"m-2 col-6 col-md-3 col-lg-2 text-center",children:Object(ce.jsx)(p.a,{variant:"dark",className:"w-100",onClick:function(){!function(){for(var e=Object.keys(i),t=Object(Re.a)({},n),a=0;a<e.length;a++)t[e[a]]=i[e[a]];c(t)}()},children:"Select All"})}),Object(ce.jsx)(h.a,{className:"m-2 col-6 col-md-3 col-lg-2 text-center",children:Object(ce.jsx)(p.a,{variant:"secondary",className:"w-100",onClick:function(){f()},children:"Unselect All"})}),Object(ce.jsx)(g,{})]}),Object(ce.jsx)(b.a,{className:"m-3",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(vt.a,{light:!0,striped:!0,bordered:!0,hover:!0,id:"students",children:Object(ce.jsxs)("tbody",{children:[Object(ce.jsx)("tr",{children:["Date","Protocol","Site","Options"].map((function(e,t){return console.log(e.toUpperCase()),"site"===e.toLowerCase()?Object(ce.jsx)("th",{class:"table-dark text-center",children:"Site"},t):"date"===e.toLowerCase()?Object(ce.jsx)("th",{class:"table-dark text-center",children:"Date"},t):"protocol"===e.toLowerCase()?Object(ce.jsx)("th",{class:"table-dark text-center",children:"Protocol"},t):"options"===e.toLowerCase()?Object(ce.jsx)("th",{class:"table-dark text-center",children:"Options"},t):null}))}),Object.keys(i).map((function(e){var t=i[e];return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("td",{children:Object(ce.jsx)(j.a,{className:"my-2",children:Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(u.a,{children:Object(ce.jsx)(u.a.Check,{label:v(t.date),checked:void 0!==n[t.id],onChange:function(){void 0!==n[t.id]?m(t):function(e){var t=Object(Re.a)({},n);t[e.id]=e,c(t)}(t)}})})})})})},t.id),Object(ce.jsx)("td",{children:Object(ce.jsx)(j.a,{className:"my-2",children:Object(ce.jsx)(b.a,{children:t.protocol})})}),Object(ce.jsx)("td",{children:Object(ce.jsx)(j.a,{className:"my-2",children:Object(ce.jsx)(b.a,{children:t.infiltrometerData.site})})}),Object(ce.jsx)("td",{children:Object(ce.jsx)(j.a,{children:Object(ce.jsxs)(b.a,{children:[Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"dark",className:"w-100 my-1",onClick:function(){!function(e){switch(e.protocol){case o:l(R(e.id)),l(y(Ne));break;case d:l(R(e.id)),l(y(ke))}}(t)},children:"View"})}),Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"danger",className:"w-100 my-1",onClick:function(){O(t)},children:"Delete"})})]})})})]},t.id)})}))]})})})})]})}):Object(ce.jsx)(j.a,{className:"mt-3",children:Object(ce.jsxs)("div",{class:"rounded border shadow",children:[Object(ce.jsx)(b.a,{children:Object(ce.jsx)("h1",{className:"display-4",children:"No Saved Reports"})}),Object(ce.jsx)(b.a,{className:"justify-content-center",children:Object(ce.jsx)(qe.a,{variant:"danger w-50",className:"text-center",children:'Click "New Test" to start creating a report.'})})]})})};function gt(){return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(j.a,{className:"mt-4 p-4 rounded border shadow",children:[Object(ce.jsx)("h1",{className:"display-4 mb-4",children:"Mini-Disk Infiltrometer Companion"}),Object(ce.jsxs)(b.a,{className:"p-2",children:[Object(ce.jsx)("h3",{className:"display-6",children:"About The App"}),Object(ce.jsx)(h.a,{children:"This application was developed by software engineering students at Michigan Technological University, and is meant to be used with the Mini-Disk Infiltrometer to aid in recording soil infiltration data. Gathered data will be stored on your local device upon completing a reading. This data can be downloaded as a CSV for later use. These CSV reports may also be viewed in Excel."})]}),Object(ce.jsx)("hr",{}),Object(ce.jsxs)(b.a,{className:"p-2",children:[Object(ce.jsx)("h3",{className:"display-6",children:"How To Start a Test"}),Object(ce.jsxs)(h.a,{children:['Begin a new test using the desired protocol by clicking "New Test" in the navigation bar at the top of the screen. On smaller devices, click the icon with three horizontal lines on the top right to view the navigation bar\'s contents. Select the protocol you wish to use, and follow the on-screen prompts to fill in the required information. For more information about how to conduct a test, see the "Manual" section of the navigation bar at the top of the screen.',Object(ce.jsx)("br",{}),Object(ce.jsx)("br",{}),"The app can use your device's GPS to determine your location, but you need to allow it to do so when the protocol page loads."]})]}),Object(ce.jsx)("hr",{}),Object(ce.jsxs)(b.a,{className:"p-2",children:[Object(ce.jsx)("h3",{className:"display-6",children:"How To View/Download a Report"}),Object(ce.jsxs)(h.a,{children:[Object(ce.jsx)(qe.a,{variant:"danger",className:"text-center",children:'This app stores reports temporarily in your web browser\'s local storage. To prevent data from being lost, please download your reports from the "My Reports" page.'}),'All of your saved reports can be found under "My Reports" in the navigation bar. A report can be accessed by using the "View" button next to a report. A report can be deleted by using the red "Delete" button next to a report or by selecting report(s) via the checkbox and using the "Delete" button above the table of reports. Report(s) can be downloaded by selecting report(s) via the checkbox and using the "Download" button.']})]}),Object(ce.jsx)("hr",{}),Object(ce.jsxs)(b.a,{className:"p-2",children:[Object(ce.jsx)("h3",{className:"display-6",children:"More Information"}),Object(ce.jsx)(h.a,{children:'More information about how to use the Mini-Disk Infiltrometer can be found under "Manuals" in the navigation bar.'})]})]})})}var Lt=n(67),Nt=function(e){var t=e.pdf;Lt.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Lt.c.version,"/pdf.worker.js");var n=Object(a.useState)(null),c=Object(ze.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(1),s=Object(ze.a)(l,2),o=s[0],d=s[1];function m(e){d((function(t){return t+e}))}return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(j.a,{className:"mt-4 p-3 rounded border shadow",children:[Object(ce.jsx)("h1",{className:"mb-4 display-4",children:"Manuals"}),Object(ce.jsxs)(b.a,{children:[Object(ce.jsx)(h.a,{}),Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(Lt.a,{className:"text-center",file:t,onLoadSuccess:function(e){var t=e.numPages;i(t),d(1)},children:[Object(ce.jsx)(Lt.b,{pageNumber:o,renderAnnotationLayer:!1,renderTextLayer:!1,scale:window.screen.width<450?.6:1,loading:Object(ce.jsx)(Lt.b,{pageNumber:1})}),Object(ce.jsxs)(j.a,{className:"rounded border shadow",children:[Object(ce.jsx)(b.a,{children:Object(ce.jsxs)(u.a.Label,{children:["Page ",o," of ",r]})}),Object(ce.jsxs)(b.a,{className:"pb-3 text-center",children:[Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"secondary",className:"w-75",disabled:o<=1,onClick:function(e){e.preventDefault(),m(-1)},children:"Previous"})}),Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"dark",className:"w-75",disabled:o>=r,onClick:function(e){e.preventDefault(),m(1)},children:"Next"})})]})]})]})}),Object(ce.jsx)(h.a,{})]})]})})},wt=n.p+"static/media/MiniDiskManual.606fae66.pdf",It=n.p+"static/media/Field-Guide.31fa5636.pdf",kt=n.p+"static/media/New-Baer-Article.a9da2a5e.pdf",Ct=function(e){var t=e.protocol,n=Object(x.c)(V)[Object(x.c)(z)],a=Object(x.b)(),c=Object(x.c)(et);return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("hr",{}),Object(ce.jsx)(b.a,{className:"text-center",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"dark",className:"w-50",size:"lg",onClick:function(){t===d?a(y(we)):t===o&&a(y(ge))},children:"New Test"})})}),Object(ce.jsx)(b.a,{className:"my-2 text-center",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"secondary",className:"w-50",size:"lg",onClick:function(){return a(y(Ee))},children:"Reports"})})}),Object(ce.jsx)(b.a,{className:"text-center",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{variant:"success",size:"lg",className:"w-50",onClick:function(){!function(e,t){var n={};n[e.id]=e,rt(n,t)}(n,c)},children:"Download Report"})})})]})},St=n(154),Et=function(){var e=Object(x.b)(),t=Object(a.useState)(Object(x.c)(M)),n=Object(ze.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){return r(c)}),[c]),Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(b.a,{className:"justify-content-center",children:Object(ce.jsxs)(h.a,{xs:11,children:[Object(ce.jsx)(u.a.Label,{as:"h4",children:"Notes"}),Object(ce.jsx)(St.a,{className:"w-100",value:c,onChange:function(t){return n=t.target.value,e(B(n)),void r(n);var n}})]})}),Object(ce.jsx)("hr",{})]})},Tt=function(){var e=Object(x.c)(X),t=Object(x.b)(),n=Object(x.c)(V)[Object(x.c)(z)];function c(e){var t=document.getElementById("nh0"),n=document.getElementById("alpha");t.value=e.nh0,n.value=e.alpha}function r(e){document.getElementById("radius").value=e}return Object(a.useEffect)((function(){c(n.infiltrometerData.soilType),r(n.infiltrometerData.infiltrometerRadius)}),[n.infiltrometerData.soilType,n.infiltrometerData.infiltrometerRadius]),Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsx)(j.a,{className:"p-3 rounded border shadow",children:Object(ce.jsxs)(u.a,{noValidate:!0,validated:!0,onSubmit:function(e){e.preventDefault();var a=Object(Re.a)({},n.infiltrometerData),c=document.getElementById("nh0"),r=document.getElementById("alpha"),i=document.getElementById("radius");a.infiltrometerRadius=i.value,a.soilType={nh0:c.value,alpha:r.value},t(P(a))},children:[Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsx)(u.a.Label,{className:"display-6",children:"Soil Type"}),Object(ce.jsxs)(m.a,{variant:"dark",title:"Preset Soil Types",children:[Object(ce.jsx)(O.a.Item,{onClick:function(){return c(je)},children:" Sand "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(be)},children:" Loamy Sand "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(me)},children:" Sandy Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(de)},children:" Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(Oe)},children:" Silt "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(pe)},children:" Silt Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(he)},children:" Sandy Clay Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(oe)},children:" Clay Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(fe)},children:" Silty Clay Loam "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(ue)},children:" Sandy Clay "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(xe)},children:" Silty Clay "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(se)},children:" Clay "}),Object(ce.jsx)(O.a.Item,{onClick:function(){return c(ve)},children:" Unknown "})]}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Label,{children:"N/H0"}),Object(ce.jsx)(u.a.Control,{required:!0,id:"nh0",type:"number",step:"any",size:"lg",min:"0",defaultValue:e.soilType.nh0,placeholder:"N/H0"}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Label,{children:"Alpha"}),Object(ce.jsx)(u.a.Control,{required:!0,id:"alpha",type:"number",step:"any",size:"lg",min:"0",defaultValue:e.soilType.alpha,placeholder:"Alpha"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})})}),Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(u.a.Group,{children:[Object(ce.jsx)(u.a.Label,{className:"pt-3 display-6",children:"Radius (cm)"}),Object(ce.jsxs)(m.a,{variant:"dark",title:"Preset Infiltrometer Types",children:[Object(ce.jsx)(O.a.Item,{onClick:function(){return r(ie.radius)},children:ie.displayName}),Object(ce.jsx)(O.a.Item,{onClick:function(){return r(le.radius)},children:le.displayName})]}),Object(ce.jsx)("div",{className:"pt-2"}),Object(ce.jsx)(u.a.Control,{required:!0,id:"radius",type:"number",step:"any",size:"lg",min:"0",defaultValue:e.infiltrometerRadius,placeholder:"Radius (cm)"}),Object(ce.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Required!"})]})})}),Object(ce.jsx)(b.a,{className:"mt-4",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(p.a,{type:"submit",variant:"dark",size:"lg",className:"w-100",children:"Graph and Calculate Conductivity"})})})]})})})},Dt=n(121),Rt=n.n(Dt);function Bt(e,t){var n=[],a=[];e.forEach((function(e,c){null!==e[1]&&(a.push(e),n.push(t[c]))}));var c=a.reduce((function(e,t){return e+t[1]}),0)/a.length,r=a.reduce((function(e,t){var n=t[1]-c;return e+n*n}),0);return 1-a.reduce((function(e,t,a){var c=n[a],r=t[1]-c[1];return e+r*r}),0)/r}function Pt(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var Vt=function(e,t){for(var n=[],a=[],c=0,r=0,i=e.length,l=t.order+1,s=1;s<l;s++){for(var o=0;o<i;o++)null!==e[o][1]&&(c+=Math.pow(e[o][0],s)*e[o][1]);n.push(c),c=0;for(var d=[],j=1;j<l;j++){for(var u=0;u<i;u++)null!==e[u][1]&&(r+=Math.pow(e[u][0],s+j));d.push(r),r=0}a.push(d)}a.push(n);for(var b=[0].concat(Object(N.a)(function(e,t){for(var n=e,a=e.length-1,c=[t],r=0;r<a;r++){for(var i=r,l=r+1;l<a;l++)Math.abs(n[r][l])>Math.abs(n[r][i])&&(i=l);for(var s=r;s<a+1;s++){var o=n[s][r];n[s][r]=n[s][i],n[s][i]=o}for(var d=r+1;d<a;d++)for(var j=a;j>=r;j--)n[j][d]-=n[j][r]*n[r][d]/n[r][r]}for(var u=a-1;u>=0;u--){for(var b=0,h=u+1;h<a;h++)b+=n[h][u]*c[h];c[u]=(n[a][u]-b)/n[u][u]}return c}(a,l).map((function(e){return Pt(e,t.precision)})))),h=function(e){return[Pt(e,t.precision),Pt(b.reduce((function(t,n,a){return t+n*Math.pow(e,a)}),0),t.precision)]},m=e.map((function(e){return h(e[0])})),O="y = ",p=b.length-1;p>=0;p--)O+=p>1?"".concat(b[p],"x^").concat(p," + "):1===p?"".concat(b[p],"x + "):b[p];return{string:O,points:m,predict:h,equation:Object(N.a)(b).reverse(),r2:Pt(Bt(e,m),t.precision)}},zt=(n(185),function(){var e=Object(x.c)(V)[Object(x.c)(z)],t=e.infiltrometerData.soilType,n=Number(Object(x.c)(J)),c=Object(x.b)(),r=t.nh0,i=e.infiltrometerData.infiltrometerSuction,l=t.alpha,s=e.infiltrometerData.infiltrometerRadius,o=e.infiltrometerData.C1,d=e.infiltrometerData.C2,u=function(){return r>=1.9?[11.65*(Math.pow(r,.1)-1)*Math.exp(2.92*(r-1.9)*l*i)]/[Math.pow(l*s,.91)]:[11.65*(Math.pow(r,.1)-1)*Math.exp(7.5*(r-1.9)*l*i)]/[Math.pow(l*s,.91)]},m=e.infiltrometerData.K;function O(){if(e.readings.length<=1)return[];var t=[];return e.readings.forEach((function(e){var a={x:Math.sqrt(Number(e.secondsElapsed)),y:(n-Number(e.volume))/(Math.PI*Math.pow(s,2))};t.push(a)})),t}function p(t,a){var r=[];e.readings.forEach((function(e){var t=[Math.sqrt(Number(e.secondsElapsed)),(n-Number(e.volume))/(Math.PI*Math.pow(s,2))];r.push(t)}));var i=Vt(r,{order:2,precision:15});c(P(Object(Re.a)(Object(Re.a)({},e.infiltrometerData),{},{C1:i.equation[1],C2:i.equation[0],K:Number(i.equation[0]/u()),A:u()})));for(var l,o=[],d=0;d<=t;d+=t/a)o.push({x:d,y:(l=d,i.equation[0]*l*l+i.equation[1]*l)});return o}var f=Object(a.useMemo)((function(){return[{id:"1",name:"Interpolated",color:"red",points:O().length>=1?p(O()[O().length-1].x,100):null},{id:"0",name:"Actual Data",color:"Blue",points:O(),interpolate:"none"}]}),[s,t]),v=[{color:"steelblue",points:[{x:0,y:0}],interpolate:"none"}],y=function(){return!s||e.readings.length<=1?Object(ce.jsx)(Rt.a,{width:380,height:400,xLabel:"No data to show",yLabel:"",data:v}):Object(ce.jsx)(Rt.a,{showLegends:"true",width:380,height:400,xLabel:"Square Root of Time (s)",yLabel:"Cumulative Infiltration (cm)",data:f,hideLines:!1,hidePoints:!1})};return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsxs)(j.a,{className:"text-center my-4",children:[Object(ce.jsx)(y,{}),o&&d&&m&&Object(ce.jsx)(b.a,{className:"mt-4",children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)(vt.a,{className:"table table-striped table-hover",children:[Object(ce.jsx)("thead",{children:Object(ce.jsxs)("tr",{class:"table-dark",children:[Object(ce.jsx)("th",{children:"C1 (cm/s^(\xbd))"}),Object(ce.jsx)("th",{children:"C2 (cm/s)"}),Object(ce.jsx)("th",{children:"K (cm/s)"})]})}),Object(ce.jsx)("tbody",{children:Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("td",{children:"".concat(Number.parseFloat(o).toExponential(4))}),Object(ce.jsx)("td",{children:"".concat(Number.parseFloat(d).toExponential(4))}),Object(ce.jsx)("td",{children:"".concat(Number.parseFloat(m).toExponential(4))})]})})]})})})]})})}),Mt=n(280),At=n(288),Ft=n(279),Ht=function(e){var t=e.index,n=e.fullID,c=e.reportId,r=Object(a.useState)(null),i=Object(ze.a)(r,2),l=i[0],s=i[1],o=Object(x.b)();return Object(a.useEffect)((function(){s(null),tt(n).then((function(e){s(e)}))}),[n]),Object(ce.jsxs)(At.a,{className:"mt-4",children:[Object(ce.jsx)(At.a.Img,{className:"mt-2",variant:"top",src:l}),Object(ce.jsxs)(At.a.Body,{className:"align-content-right",children:[null===l?Object(ce.jsx)(At.a.Text,{children:Object(ce.jsx)(Ft.a,{animation:"border"})}):null,Object(ce.jsx)(p.a,{variant:"outline-danger",size:"lg",className:"w-100",onClick:function(){o(Qe({reportId:c,photoIndex:t}))},children:"Delete"})]})]})},qt=function(e){var t=Object(x.b)(),n=Object(x.c)(z),a=Object(x.c)(et)[n],c=null!==a&&void 0!==a&&a.length>0;return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(j.a,{className:"d-flex justify-content-center",children:Object(ce.jsx)(Mt.a,{children:Object(ce.jsx)(b.a,{children:c?a.map((function(e,t){return Object(ce.jsx)(Ht,{index:t,fullID:e.full,reportId:n})})):Object(ce.jsx)(qe.a,{className:"mt-2",variant:"secondary",children:" No Photos "})})})}),Object(ce.jsx)(j.a,{className:"text-center",children:Object(ce.jsxs)(b.a,{children:[Object(ce.jsxs)(h.a,{children:[Object(ce.jsx)("svg",{className:"svg-add-photo",onClick:function(){document.getElementById("photoInput").click()},children:Object(ce.jsx)("g",{transform:"translate(100.000000, 95.000000) scale(0.01000, -0.010000)",children:Object(ce.jsx)("path",{d:"M4493.4,4986.4c-540.8-55.2-1136.9-227.8-1647.8-478.7C1846.7,4017.5,1091.9,3262.6,604,2268.4C-578.9-143.5,390-3043.3,2783.4-4258.4C5197.6-5485,8141.1-4520.8,9367.8-2104.3c962,1891.8,596.1,4179.4-904.4,5677.6C7425.4,4613.5,5961.7,5133.7,4493.4,4986.4z M7743,2551.5l75.9-66.7V1175.2V-132l-269.3-6.9l-271.6-6.9v1107v1104.7H4999.7H2721.3V546.9V-974.3l131.2,6.9l131.2,6.9l520.1,810.1c285.4,446.5,522.4,810.1,529.3,810.1s244-363.6,529.3-810.1l517.8-810.1l147.3-6.9c119.7-4.6,145,0,133.5,25.3c-6.9,18.4-117.4,195.6-246.3,395.8l-232.4,361.3l156.5,239.3c85.2,133.5,158.8,246.3,165.7,248.6c6.9,4.6,197.9-280.8,423.4-632.9l412-642.1h158.8h158.8l4.6-568.4l6.9-570.8l386.6-6.9l384.3-4.6v-138.1v-138.1H4735H2330l-73.6,66.7l-75.9,66.7V109.7v2375.1l75.9,66.7l73.6,66.7h2669.6h2669.6L7743,2551.5z M6613,1483.6c151.9-80.6,234.7-214,246.3-393.5c6.9-112.8,0-163.4-36.8-234.7c-195.6-379.7-706.5-377.4-881.4,2.3c-108.2,234.8-2.3,510.9,243.9,639.8C6290.8,1555,6491,1545.8,6613,1483.6z M8014.5-856.9v-391.2h379.7H8774v-264.7v-264.7h-379.7h-379.7v-379.7v-379.7h-276.2h-276.2v379.7v379.7h-379.7h-379.7v264.7v264.7h379.7h379.7V-873c0,207.1,6.9,384.3,16.1,391.2c6.9,9.2,131.2,16.1,276.2,16.1h260.1V-856.9z"})})}),Object(ce.jsx)("input",{hidden:!0,type:"file",accept:"image/*",id:"photoInput",onChange:function(e){if(void 0!==e.target.files[0]){var a=URL.createObjectURL(e.target.files[0]),c=new XMLHttpRequest;c.onload=function(){var e=new FileReader;e.onloadend=function(){t($e({reportId:n,thumbnailData:"WIP",fullImageData:e.result}))},e.readAsDataURL(c.response)},c.open("GET",a),c.responseType="blob",c.send()}}}),Object(ce.jsx)("h4",{children:"Add Photo"})]}),c?Object(ce.jsxs)(h.a,{children:[Object(ce.jsx)("svg",{className:"svg-delete-photo",onClick:function(){t(Ze({reportId:n}))},children:Object(ce.jsx)("g",{transform:"translate(100.000000, 145.000000) scale(0.1000, -0.10000)",children:Object(ce.jsx)("path",{d:"M500,10C230.5,10,10,230.5,10,500s220.5,490,490,490s490-220.5,490-490S769.5,10,500,10z M726.6,622.5c24.5,24.5,24.5,73.5,0,98c-12.3,12.3-30.6,18.4-49,18.4s-36.8-6.1-49-18.4L506.1,598L383.6,720.5c-24.5,18.4-42.9,24.5-61.3,24.5c-18.4,0-36.8-6.1-49-18.4c-24.5-24.5-24.5-73.5,0-98l122.5-122.5L273.4,383.6c-24.5-24.5-24.5-73.5,0-98s73.5-24.5,98,0l122.5,122.5l122.5-122.5c24.5-24.5,73.5-24.5,98,0s24.5,73.5,0,98L591.9,506.1L726.6,622.5z"})})}),Object(ce.jsx)("h4",{children:"Delete All Photos"})]}):null]})})]})},Gt=function(){var e=Object(a.useState)(!0),t=Object(ze.a)(e,2),n=t[0],c=t[1];return Object(ce.jsxs)(j.a,{className:"mt-4 p-3 rounded border shadow",children:[Object(ce.jsx)("h1",{className:"mb-4 display-4",children:"Results"}),Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(jt,{protocol:d,editable:!0})})}),Object(ce.jsx)(j.a,{children:Object(ce.jsx)(b.a,{className:"justify-content-center",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(qe.a,{show:n,onClose:function(){return c(!1)},variant:"info",dismissible:!0,className:"text-center",children:"Need to change volume data? Tap corrosponding table entries to edit."})})})}),Object(ce.jsx)(Tt,{}),Object(ce.jsx)(zt,{}),Object(ce.jsx)(Et,{}),Object(ce.jsx)(qt,{}),Object(ce.jsx)(Ct,{protocol:d})]})},Ut=function(){return Object(ce.jsx)(Pe,{protocol:d})},Wt=function(){var e=Object(a.useState)(!0),t=Object(ze.a)(e,2),n=t[0],c=t[1];return Object(ce.jsxs)(j.a,{className:"mt-4 p-3 rounded border shadow",children:[Object(ce.jsx)("h1",{className:"mb-4 display-4",children:"Results"}),Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(jt,{protocol:o,editable:!0})})}),Object(ce.jsx)(j.a,{children:Object(ce.jsx)(b.a,{className:"justify-content-center",children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)(qe.a,{show:n,onClose:function(){return c(!1)},variant:"info",dismissible:!0,className:"text-center",children:"Need to change volume data? Tap corrosponding table entries to edit."})})})}),Object(ce.jsx)(Et,{}),Object(ce.jsx)(qt,{}),Object(ce.jsx)(Ct,{protocol:o})]})},Kt=(n(186),n(152),function(e){var t=e.intervals,n=Object(x.c)($),a=Object(x.c)(X).initialVolume,c=function(){for(var e=[{time:0,volume:a}],c=1;c<t;c++)e=[].concat(Object(N.a)(e),[{time:n*c,volume:null}]);return e},r=Object(x.c)(V)[Object(x.c)(z)].readings,i=0,l=function(e){if(0===e)return!0;if(r.length<=1)return!0;var t;for(t=1;t<r.length&&Number(r[t].secondsElapsed)!==e;t++);if(t>=r.length)return!0;var n=r[t].volume;return 0===n||!(n<0)&&Number(r[t-1].volume)>=Number(n)};return Object(ce.jsx)(j.a,{children:Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsxs)("table",{class:"table table-light table-striped table-hover",children:[Object(ce.jsx)("thead",{children:Object(ce.jsx)("tr",{class:"table-dark",children:Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("th",{children:"Time (s)"}),Object(ce.jsx)("th",{children:"Volume (mL)"})]})})}),Object(ce.jsx)("tbody",{children:Object(ce.jsx)(ce.Fragment,{children:c().map((function(e){return 0===e.time?Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("td",{children:"0"}),Object(ce.jsx)("td",{children:a})]}):Object(ce.jsx)(_t,{time:e.time,isValid:l(e.time),index:++i})}))})})]})})})})}),_t=function(e){var t=e.time,n=(e.isValid,e.index,Object(x.c)(X)),c=n.initialVolume,r=Object(x.b)(),i=Object(x.c)(V)[Object(x.c)(z)].readings,l=Object(a.useState)(c),s=Object(ze.a)(l,2),o=s[0],d=s[1],j=function(e){var a=e.target.value;0!==String(a).length&&void 0!=a&&null!=a?r(S({volume:a,secondsElapsed:t,lat:n.coordinates.lat,lon:n.coordinates.lon})):r(E(t))};return Object(a.useEffect)((function(){for(var e=Number(c),n=0;n<i.length;n++){if(i[n].secondsElapsed===t){d(e);break}e>=Number(i[n].volume)&&(e=Number(i[n].volume),d(e))}}),[i]),Object(ce.jsxs)("tr",{children:[Object(ce.jsx)("td",{children:t}),Object(ce.jsx)("td",{children:Object(ce.jsx)(u.a,{validated:!0,children:Object(ce.jsx)(u.a.Control,{autoFocus:!0,id:"volume"+t,type:"number",step:"any",size:"sm",min:"0",max:o,placeholder:"Volume (mL)",onChange:j,onSubmit:j})})})]})},Yt=function(){var e=Object(x.c)($),t=Object(x.b)(),n=ut(bt),c=Object(ze.a)(n,2),r=(c[0],c[1]),i=Object(a.useState)({timerIsPlaying:!1,key:0}),l=Object(ze.a)(i,2),s=l[0],o=l[1],d=Object(a.useState)(0),m=Object(ze.a)(d,2),O=m[0],f=m[1],v=Object(a.useState)(!1),g=Object(ze.a)(v,2),L=g[0],N=g[1],w=Object(a.useState)(!1),I=Object(ze.a)(w,2),k=I[0],C=I[1],S=Object(x.c)(V)[Object(x.c)(z)].readings;function E(){t(T(!1)),t(y(ke))}function D(){N(!1),o(Object(Re.a)(Object(Re.a)({},s),{},{timerIsPlaying:!1}))}function R(){for(var e=1;e<S.length;e++)if(Number(S[e-1].volume)<Number(S[e].volume))return!1;return!0}return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsxs)(j.a,{className:"mt-4 p-3 rounded border shadow",children:[Object(ce.jsx)(b.a,{children:Object(ce.jsx)(h.a,{children:Object(ce.jsx)("div",{className:"mb-3 timer-wrapper",children:Object(ce.jsx)(Me.CountdownCircleTimer,{isPlaying:s.timerIsPlaying,duration:Number(e),colors:[["#004777",.33],["#F7B801",.33],["#A30000"]],onComplete:function(){return r(!1),r(!0),void o({timerIsPlaying:!0,key:s.key+1})},children:function(e){var t=e.remainingTime;return f(t),0===t?Object(ce.jsx)("div",{className:"timer",children:"Time is up!"}):Object(ce.jsxs)("div",{className:"timer",children:[Object(ce.jsx)("div",{className:"text",children:"Time remaining:"}),Object(ce.jsx)("div",{className:"value",children:t}),Object(ce.jsx)("div",{className:"text",children:"seconds"})]})}},s.key)})})}),Object(ce.jsx)(Kt,{intervals:s.key}),Object(ce.jsx)(b.a,{className:"justify-content-center",children:Object(ce.jsx)(p.a,{variant:"dark",className:"w-50",size:"lg",id:"startButton",disabled:s.timerIsPlaying,onClick:function(){o({timerIsPlaying:!0,key:s.key+1}),document.getElementById("startButton").className="w-50 visually-hidden"},children:s.timerIsPlaying?"Replication Running...":"Start Protocol"})}),R()?null:Object(ce.jsx)(b.a,{className:"text-center mb-2",children:Object(ce.jsx)(qe.a,{variant:"danger",className:"w-100",children:"Please correct all invalid data before continuing."})}),Object(ce.jsx)(b.a,{className:"justify-content-center mt-2",children:Object(ce.jsx)(p.a,{variant:"secondary",className:"w-50",size:"lg",onClick:R()?E:function(){o(Object(Re.a)(Object(Re.a)({},s),{},{timerIsPlaying:!1})),N(!0)},children:s.timerIsPlaying?"End Protocol":"Continue"})}),Object(ce.jsxs)(b.a,{className:"justify-content-center mt-2",children:[Object(ce.jsx)(p.a,{variant:"primary",hidden:s.timerIsPlaying,className:"w-50",size:"lg",onClick:function(){return C(!0)},children:"Help"}),Object(ce.jsxs)(Ae.a,{show:k,onHide:function(){return C(!1)},placement:"bottom",children:[Object(ce.jsx)(Ae.a.Header,{closeButton:!0,children:Object(ce.jsx)(Ae.a.Title,{children:"Protocol Guide"})}),Object(ce.jsxs)(Ae.a.Body,{children:[Object(ce.jsx)("h4",{children:"To properly conduct a Standard Protocol replication:"}),Object(ce.jsxs)("ol",{children:[Object(ce.jsx)("li",{children:"Expose the soil about 1 to 3 cm in depth, removing any overlying ash or minerals."}),Object(ce.jsx)("li",{children:'With a full infiltrometer, place the porous disk flat against the soil and perpendicular to the surface. Tap the \u201cStart Protocol" button as soon as the infiltrometer disk and the soil come into contact.'}),Object(ce.jsx)("li",{children:"At the end of each interval, a field in the above table will automatically appear and be selected for data entry. Record the current volume."}),Object(ce.jsx)("li",{children:"Repeat these steps for as many intervals as necessary."}),Object(ce.jsx)("li",{children:'Once all replications have been completed, select the "End Protocol" button. You can then review your data and edit fields as necessary.'}),Object(ce.jsx)("li",{children:'Tap the "Continue" button to proceed to the results page.'})]})]})]})]})]}),Object(ce.jsxs)(Fe.a,{show:L,onHide:D,backdrop:"static",centered:!0,children:[Object(ce.jsx)(Fe.a.Header,{children:Object(ce.jsx)(Fe.a.Title,{children:"Continue with invalid data?"})}),Object(ce.jsx)(u.a,{noValidate:!0,validated:!0,onSubmit:function(){E()},children:Object(ce.jsxs)(Fe.a.Footer,{children:[Object(ce.jsx)(p.a,{variant:"outline-secondary",size:"lg",onClick:D,children:"Edit Fields"}),Object(ce.jsx)(p.a,{type:"submit",variant:"dark",size:"lg",children:"Continue"})]})})]}),Object(ce.jsx)(He.a,{className:"fixed-bottom",now:O/e*100})]})},Jt=function(){return Object(ce.jsxs)(l.a,{children:[Object(ce.jsx)("title",{children:"Infiltrometer Companion"}),Object(ce.jsx)(ft,{}),Object(ce.jsx)(De,{protectedElements:Object(ce.jsxs)(s.d,{children:[Object(ce.jsx)(s.b,{exact:!0,path:ye,children:Object(ce.jsx)(gt,{})}),Object(ce.jsx)(s.b,{exact:!0,path:ge,children:Object(ce.jsx)(Ve,{})}),Object(ce.jsx)(s.b,{exact:!0,path:Le,children:Object(ce.jsx)(ht,{})}),Object(ce.jsx)(s.b,{exact:!0,path:Ne,children:Object(ce.jsx)(Wt,{})}),Object(ce.jsx)(s.b,{exact:!0,path:we,children:Object(ce.jsx)(Ut,{})}),Object(ce.jsx)(s.b,{exact:!0,path:Ie,children:Object(ce.jsx)(Yt,{})}),Object(ce.jsx)(s.b,{exact:!0,path:ke,children:Object(ce.jsx)(Gt,{})}),Object(ce.jsx)(s.b,{exact:!0,path:Se,children:Object(ce.jsx)(Nt,{pdf:wt})}),Object(ce.jsx)(s.b,{exact:!0,path:Ce,children:Object(ce.jsx)(Nt,{pdf:It})}),Object(ce.jsx)(s.b,{exact:!0,path:Te,children:Object(ce.jsx)(Nt,{pdf:kt})}),Object(ce.jsx)(s.b,{exact:!0,path:Ee,children:Object(ce.jsx)(yt,{})})]})})]})},Xt=n(23),$t=n(122),Qt=n.n($t),Zt=n(146);function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var tn=Object(f.b)("counter/fetchCount",function(){var e=Object(Zt.a)(Qt.a.mark((function e(t){var n;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),nn=Object(f.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(tn.pending,(function(e){e.status="loading"})).addCase(tn.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),an=nn.actions,cn=(an.increment,an.decrement,an.incrementByAmount,nn.reducer),rn=Object(f.c)({name:"baerResults",initialState:{notes:"hi im a note"},reducers:{setNotes:function(e,t){e.notes=t.payload,console.log(e.notes)}}}).reducer,ln=n(282),sn=n(37),on=n(147),dn=n.n(on),jn=Object(Xt.b)({baerInitialize:te,baerReplication:_,baerResults:rn,album:nt,counter:cn,reports:F,form:ln.a,redirector:L}),un={key:"root",storage:dn()("myDB")},bn=Object(sn.g)(un,jn),hn=Object(f.a)({reducer:bn,middleware:function(e){return e({serializableCheck:{ignoredActions:[sn.a,sn.f,sn.b,sn.c,sn.d,sn.e]}})}}),mn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function On(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(263);var pn=n(150),xn=Object(sn.h)(hn);i.a.render(Object(ce.jsx)(c.a.StrictMode,{children:Object(ce.jsx)(x.a,{store:hn,children:Object(ce.jsx)(pn.a,{loading:null,persistor:xn,children:Object(ce.jsx)(Jt,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Infiltrometer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Infiltrometer","/service-worker.js");mn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):On(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):On(t,e)}))}}(),Ke()}},[[264,1,2]]]);
//# sourceMappingURL=main.1d904e66.chunk.js.map